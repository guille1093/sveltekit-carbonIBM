import{s as _e,H as Te,r as x,f as p,a as O,g as E,h as C,d as I,c as R,j as s,C as w,B as se,i as X,x as b,D,O as Y,_ as Z,I as ke,J as Ie,K as Le,E as he,z as ie,P as Ae,A as De,F as W,p as Fe,l as ge,m as ve,n as Pe,T as ne,U as oe,W as Ue}from"../chunks/scheduler.8d709755.js";import{S as pe,i as Ee,a as $,t as ee,b as fe,d as ue,m as de,e as ce}from"../chunks/index.eb84c1c6.js";import{e as Be,a as Ce,i as Ve}from"../chunks/forms.2fc59014.js";import{g as me}from"../chunks/utils.fe61ee76.js";import{g as ze,B as Me}from"../chunks/Button.734935ca.js";const we=t=>({}),be=t=>({});function ye(t){let l;return{c(){l=ge(t[5])},l(e){l=ve(e,t[5])},m(e,o){X(e,l,o)},p(e,o){o&32&&Pe(l,e[5])},d(e){e&&I(l)}}}function He(t){let l,e,o,L,n,i,h,c;const F=t[15].labelText,m=Te(F,t,t[14],be),d=m||ye(t);let A=[t[13]],g={};for(let r=0;r<A.length;r+=1)g=x(g,A[r]);return{c(){l=p("div"),e=p("label"),o=p("div"),d&&d.c(),L=O(),n=p("input"),this.h()},l(r){l=E(r,"DIV",{});var f=C(l);e=E(f,"LABEL",{for:!0,tabindex:!0});var V=C(e);o=E(V,"DIV",{role:!0});var _=C(o);d&&d.l(_),_.forEach(I),V.forEach(I),L=R(f),n=E(f,"INPUT",{type:!0,tabindex:!0,id:!0,accept:!0,name:!0}),f.forEach(I),this.h()},h(){s(o,"role",t[6]),w(o,"bx--file__drop-container",!0),w(o,"bx--file__drop-container--drag-over",t[11]),s(e,"for",t[9]),s(e,"tabindex",t[8]),w(e,"bx--file-browse-btn",!0),w(e,"bx--file-browse-btn--disabled",t[7]),s(n,"type","file"),s(n,"tabindex","-1"),s(n,"id",t[9]),n.disabled=t[7],s(n,"accept",t[2]),s(n,"name",t[10]),n.multiple=t[3],w(n,"bx--file-input",!0),se(l,g),w(l,"bx--file",!0)},m(r,f){X(r,l,f),b(l,e),b(e,o),d&&d.m(o,null),b(l,L),b(l,n),t[22](n),i=!0,h||(c=[D(e,"keydown",t[20]),D(e,"keydown",t[21]),D(n,"change",t[23]),D(n,"click",t[19]),D(n,"click",Ne),D(l,"dragover",t[16]),D(l,"dragover",Y(Z(t[24]))),D(l,"dragleave",t[17]),D(l,"dragleave",Y(Z(t[25]))),D(l,"drop",t[18]),D(l,"drop",Y(Z(t[26])))],h=!0)},p(r,[f]){m?m.p&&(!i||f&16384)&&ke(m,F,r,r[14],i?Le(F,r[14],f,we):Ie(r[14]),be):d&&d.p&&(!i||f&32)&&d.p(r,i?f:-1),(!i||f&64)&&s(o,"role",r[6]),(!i||f&2048)&&w(o,"bx--file__drop-container--drag-over",r[11]),(!i||f&512)&&s(e,"for",r[9]),(!i||f&256)&&s(e,"tabindex",r[8]),(!i||f&128)&&w(e,"bx--file-browse-btn--disabled",r[7]),(!i||f&512)&&s(n,"id",r[9]),(!i||f&128)&&(n.disabled=r[7]),(!i||f&4)&&s(n,"accept",r[2]),(!i||f&1024)&&s(n,"name",r[10]),(!i||f&8)&&(n.multiple=r[3]),se(l,g=ze(A,[f&8192&&r[13]])),w(l,"bx--file",!0)},i(r){i||($(d,r),i=!0)},o(r){ee(d,r),i=!1},d(r){r&&I(l),d&&d.d(r),t[22](null),h=!1,he(c)}}}const Ne=({target:t})=>{t.value=null};function Oe(t,l,e){const o=["accept","files","multiple","validateFiles","labelText","role","disabled","tabindex","id","name","ref"];let L=ie(l,o),{$$slots:n={},$$scope:i}=l,{accept:h=[]}=l,{files:c=[]}=l,{multiple:F=!1}=l,{validateFiles:m=a=>a}=l,{labelText:d="Add file"}=l,{role:A="button"}=l,{disabled:g=!1}=l,{tabindex:r="0"}=l,{id:f="ccs-"+Math.random().toString(36)}=l,{name:V=""}=l,{ref:_=null}=l;const z=Ae();let k=!1;function j(a){W.call(this,t,a)}function P(a){W.call(this,t,a)}function S(a){W.call(this,t,a)}function q(a){W.call(this,t,a)}function y(a){W.call(this,t,a)}const U=({key:a})=>{(a===" "||a==="Enter")&&_.click()};function M(a){Fe[a?"unshift":"push"](()=>{_=a,e(1,_)})}const G=({target:a})=>{e(0,c=m([...a.files])),z("add",c),z("change",c)},Q=({dataTransfer:a})=>{g||(e(11,k=!0),a.dropEffect="copy")},u=({dataTransfer:a})=>{g||(e(11,k=!1),a.dropEffect="move")},v=({dataTransfer:a})=>{g||(e(11,k=!1),e(0,c=m([...a.files])),z("add",c),z("change",c))};return t.$$set=a=>{l=x(x({},l),De(a)),e(13,L=ie(l,o)),"accept"in a&&e(2,h=a.accept),"files"in a&&e(0,c=a.files),"multiple"in a&&e(3,F=a.multiple),"validateFiles"in a&&e(4,m=a.validateFiles),"labelText"in a&&e(5,d=a.labelText),"role"in a&&e(6,A=a.role),"disabled"in a&&e(7,g=a.disabled),"tabindex"in a&&e(8,r=a.tabindex),"id"in a&&e(9,f=a.id),"name"in a&&e(10,V=a.name),"ref"in a&&e(1,_=a.ref),"$$scope"in a&&e(14,i=a.$$scope)},[c,_,h,F,m,d,A,g,r,f,V,k,z,L,i,n,j,P,S,q,y,U,M,G,Q,u,v]}class Re extends pe{constructor(l){super(),Ee(this,l,Oe,He,_e,{accept:2,files:0,multiple:3,validateFiles:4,labelText:5,role:6,disabled:7,tabindex:8,id:9,name:10,ref:1})}}const Se=Re;function je(t){let l;return{c(){l=ge("Actualizar perfil")},l(e){l=ve(e,"Actualizar perfil")},m(e,o){X(e,l,o)},d(e){e&&I(l)}}}function qe(t){let l,e,o,L="Actualizar perfil",n,i,h,c='<span class="label-text dark:text-gray-200">Imagen de perfil</span>',F,m,d,A,g,r,f,V,_,z,k,j,P,S,q,y,U,M,G,Q;return k=new Se({props:{name:"avatar",id:"avatar",multiple:!0,disabled:t[2],labelText:"Drag and drop files here or click to upload",validateFiles:Ge}}),k.$on("change",t[3]),U=new Me({props:{class:"w-full max-w-lg",type:"submit",disabled:t[2],$$slots:{default:[je]},$$scope:{ctx:t}}}),{c(){l=p("div"),e=p("form"),o=p("h3"),o.textContent=L,n=O(),i=p("div"),h=p("label"),h.innerHTML=c,F=O(),m=p("label"),d=p("label"),A=O(),g=p("div"),r=p("img"),V=O(),_=p("input"),z=O(),fe(k.$$.fragment),j=O(),P=p("input"),q=O(),y=p("div"),fe(U.$$.fragment),this.h()},l(u){l=E(u,"DIV",{class:!0});var v=C(l);e=E(v,"FORM",{action:!0,method:!0,class:!0,enctype:!0});var a=C(e);o=E(a,"H3",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-g2msr4"&&(o.textContent=L),n=R(a),i=E(a,"DIV",{class:!0});var T=C(i);h=E(T,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-1sl2en0"&&(h.innerHTML=c),F=R(T),m=E(T,"LABEL",{for:!0,class:!0});var B=C(m);d=E(B,"LABEL",{for:!0,class:!0}),C(d).forEach(I),A=R(B),g=E(B,"DIV",{class:!0});var H=C(g);r=E(H,"IMG",{src:!0,alt:!0,id:!0}),H.forEach(I),B.forEach(I),V=R(T),_=E(T,"INPUT",{type:!0,name:!0,id:!0,accept:!0}),z=R(T),ue(k.$$.fragment,T),T.forEach(I),j=R(a),P=E(a,"INPUT",{id:!0,label:!0}),q=R(a),y=E(a,"DIV",{class:!0});var N=C(y);ue(U.$$.fragment,N),N.forEach(I),a.forEach(I),v.forEach(I),this.h()},h(){var u,v,a,T,B,H,N,J,K;s(o,"class","text-2xl font-medium dark:text-gray-200"),s(h,"for","avatar"),s(h,"class","label font-medium pb-1"),s(d,"for","avatar"),s(d,"class","absolute -bottom-0.5 -right-0.5 hover:cursor-pointer"),oe(r.src,f=(u=t[0].user)!=null&&u.avatar?me((v=t[0].user)==null?void 0:v.collectionId,(a=t[0].user)==null?void 0:a.id,(T=t[0].user)==null?void 0:T.avatar):`https://ui-avatars.com/api/?name=${(B=t[0].user)==null?void 0:B.name}`)||s(r,"src",f),s(r,"alt","user avatar"),s(r,"id","avatar-preview"),s(g,"class","w-32 rounded-full"),s(m,"for","avatar"),s(m,"class","avatar w-32 rounded-full hover:cursor-pointer"),s(_,"type","file"),s(_,"name","avatar"),s(_,"id","avatar"),_.value="",s(_,"accept","image/*"),_.hidden=!0,_.disabled=t[2],s(i,"class","form-control w-full max-w-lg"),s(P,"id","name"),s(P,"label","Nombre"),P.value=S=((N=(H=t[1])==null?void 0:H.data)==null?void 0:N.name)??((K=(J=t[0])==null?void 0:J.user)==null?void 0:K.name),s(y,"class","w-full max-w-lg pt-3"),s(e,"action","?/updateProfile"),s(e,"method","POST"),s(e,"class","flex flex-col space-y-2 w-full"),s(e,"enctype","multipart/form-data"),s(l,"class","flex items-center flex-col md:w-1/2 w-full h-screen")},m(u,v){X(u,l,v),b(l,e),b(e,o),b(e,n),b(e,i),b(i,h),b(i,F),b(i,m),b(m,d),b(m,A),b(m,g),b(g,r),b(i,V),b(i,_),b(i,z),de(k,i,null),b(e,j),b(e,P),b(e,q),b(e,y),de(U,y,null),M=!0,G||(Q=[D(_,"change",t[3]),Ue(Be.call(null,e,t[4]))],G=!0)},p(u,[v]){var B,H,N,J,K,ae,te,le,re;(!M||v&1&&!oe(r.src,f=(B=u[0].user)!=null&&B.avatar?me((H=u[0].user)==null?void 0:H.collectionId,(N=u[0].user)==null?void 0:N.id,(J=u[0].user)==null?void 0:J.avatar):`https://ui-avatars.com/api/?name=${(K=u[0].user)==null?void 0:K.name}`))&&s(r,"src",f),(!M||v&4)&&(_.disabled=u[2]);const a={};v&4&&(a.disabled=u[2]),k.$set(a),(!M||v&3&&S!==(S=((te=(ae=u[1])==null?void 0:ae.data)==null?void 0:te.name)??((re=(le=u[0])==null?void 0:le.user)==null?void 0:re.name))&&P.value!==S)&&(P.value=S);const T={};v&4&&(T.disabled=u[2]),v&32&&(T.$$scope={dirty:v,ctx:u}),U.$set(T)},i(u){M||($(k.$$.fragment,u),$(U.$$.fragment,u),M=!0)},o(u){ee(k.$$.fragment,u),ee(U.$$.fragment,u),M=!1},d(u){u&&I(l),ce(k),ce(U),G=!1,he(Q)}}}const Ge=t=>t.filter(l=>l.size<1024);function Je(t,l,e){let{data:o}=l,{form:L}=l,n;const i=c=>{const m=c.target.files;if(m.length>0){const d=URL.createObjectURL(m[0]),A=document.getElementById("avatar-preview");A.src=d}},h=()=>(e(2,n=!0),async({result:c})=>{switch(c.type){case"success":await Ve();break;case"error":break;default:await Ce(c)}e(2,n=!1)});return t.$$set=c=>{"data"in c&&e(0,o=c.data),"form"in c&&e(1,L=c.form)},e(2,n=!1),[o,L,n,i,h]}class Ze extends pe{constructor(l){super(),Ee(this,l,Je,qe,_e,{data:0,form:1})}}export{Ze as component};
