import{s as Ye,r as Mt,f as jt,g as Wt,h as de,d as z,B as ze,C as ve,i as J,z as se,M as cd,Y as ud,L as hd,b as Xc,A as sn,F as Xt,p as Ae,H as $o,D as He,I as Mo,J as Ao,K as Co,E as qc,l as Ge,m as je,x as hr,n as ri,G as fd,a as Et,c as $t,N as kn,y as oe,P as dd,o as pd,S as md,u as Ia,v as Pa,j as gd,w as Na,T as Dn}from"../chunks/scheduler.8d709755.js";import{S as Xe,i as qe,g as vd,t as H,c as yd,a as F,b as G,d as j,m as W,e as Y,j as bd,k as _d,f as Ln}from"../chunks/index.eb84c1c6.js";import{P as wd}from"../chunks/Printer.a32559c2.js";import{f as xd,s as Td}from"../chunks/index.c1cab4b5.js";import{T as ko}from"../chunks/Tile.a37671a5.js";import{A as Od,a as Sd}from"../chunks/AccordionItem.bc72310a.js";import{D as Ed,P as $d,T as Md,a as Ad,b as Cd,c as kd}from"../chunks/Pagination.0fd4041d.js";import{g as Ze,a as Do,B as Dd}from"../chunks/Button.734935ca.js";import{g as Ld}from"../chunks/_commonjsHelpers.23102255.js";import{D as Zc,e as Kc,a as ii}from"../chunks/es.cbeea5b7.js";import{G as Rd,R as en,C as te}from"../chunks/Column.b254b044.js";function Id(t){let e,n,r,i;const s=t[16].default,o=$o(s,t,t[15],null),a=o||Nd(t);let l=[t[7]],c={};for(let u=0;u<l.length;u+=1)c=Mt(c,l[u]);return{c(){e=jt("button"),a&&a.c(),this.h()},l(u){e=Wt(u,"BUTTON",{});var h=de(e);a&&a.l(h),h.forEach(z),this.h()},h(){ze(e,c)},m(u,h){J(u,e,h),a&&a.m(e,null),e.autofocus&&e.focus(),t[24](e),n=!0,r||(i=[He(e,"click",t[19]),He(e,"click",t[25]),He(e,"keydown",t[20]),He(e,"keydown",t[26])],r=!0)},p(u,h){o?o.p&&(!n||h&32768)&&Mo(o,s,u,u[15],n?Co(s,u[15],h,null):Ao(u[15]),null):a&&a.p&&(!n||h&2)&&a.p(u,n?h:-1),ze(e,c=Ze(l,[h&128&&u[7]]))},i(u){n||(F(a,u),n=!0)},o(u){H(a,u),n=!1},d(u){u&&z(e),a&&a.d(u),t[24](null),r=!1,qc(i)}}}function Pd(t){let e,n,r,i;const s=t[16].default,o=$o(s,t,t[15],null),a=o||Ud(t);let l=[t[7]],c={};for(let u=0;u<l.length;u+=1)c=Mt(c,l[u]);return{c(){e=jt("a"),a&&a.c(),this.h()},l(u){e=Wt(u,"A",{});var h=de(e);a&&a.l(h),h.forEach(z),this.h()},h(){ze(e,c)},m(u,h){J(u,e,h),a&&a.m(e,null),t[21](e),n=!0,r||(i=[He(e,"click",t[17]),He(e,"click",t[22]),He(e,"keydown",t[18]),He(e,"keydown",t[23])],r=!0)},p(u,h){o?o.p&&(!n||h&32768)&&Mo(o,s,u,u[15],n?Co(s,u[15],h,null):Ao(u[15]),null):a&&a.p&&(!n||h&2)&&a.p(u,n?h:-1),ze(e,c=Ze(l,[h&128&&u[7]]))},i(u){n||(F(a,u),n=!0)},o(u){H(a,u),n=!1},d(u){u&&z(e),a&&a.d(u),t[21](null),r=!1,qc(i)}}}function Nd(t){let e,n;return{c(){e=jt("div"),n=Ge(t[1]),this.h()},l(r){e=Wt(r,"DIV",{});var i=de(e);n=je(i,t[1]),i.forEach(z),this.h()},h(){ve(e,"bx--overflow-menu-options__option-content",!0)},m(r,i){J(r,e,i),hr(e,n)},p(r,i){i&2&&ri(n,r[1])},d(r){r&&z(e)}}}function Ud(t){let e,n;return{c(){e=jt("div"),n=Ge(t[1]),this.h()},l(r){e=Wt(r,"DIV",{});var i=de(e);n=je(i,t[1]),i.forEach(z),this.h()},h(){ve(e,"bx--overflow-menu-options__option-content",!0)},m(r,i){J(r,e,i),hr(e,n)},p(r,i){i&2&&ri(n,r[1])},d(r){r&&z(e)}}}function Bd(t){let e,n,r,i;const s=[Pd,Id],o=[];function a(u,h){return u[2]?0:1}n=a(t),r=o[n]=s[n](t);let l=[{role:"none"},{id:t[6]},t[11]],c={};for(let u=0;u<l.length;u+=1)c=Mt(c,l[u]);return{c(){e=jt("li"),r.c(),this.h()},l(u){e=Wt(u,"LI",{role:!0,id:!0});var h=de(e);r.l(h),h.forEach(z),this.h()},h(){ze(e,c),ve(e,"bx--overflow-menu-options__option",!0),ve(e,"bx--overflow-menu--divider",t[4]),ve(e,"bx--overflow-menu-options__option--danger",t[5]),ve(e,"bx--overflow-menu-options__option--disabled",t[3])},m(u,h){J(u,e,h),o[n].m(e,null),i=!0},p(u,[h]){let f=n;n=a(u),n===f?o[n].p(u,h):(vd(),H(o[f],1,1,()=>{o[f]=null}),yd(),r=o[n],r?r.p(u,h):(r=o[n]=s[n](u),r.c()),F(r,1),r.m(e,null)),ze(e,c=Ze(l,[{role:"none"},(!i||h&64)&&{id:u[6]},h&2048&&u[11]])),ve(e,"bx--overflow-menu-options__option",!0),ve(e,"bx--overflow-menu--divider",u[4]),ve(e,"bx--overflow-menu-options__option--danger",u[5]),ve(e,"bx--overflow-menu-options__option--disabled",u[3])},i(u){i||(F(r),i=!0)},o(u){H(r),i=!1},d(u){u&&z(e),o[n].d()}}}function Hd(t,e,n){let r;const i=["text","href","primaryFocus","disabled","hasDivider","danger","requireTitle","id","ref"];let s=se(e,i),o,{$$slots:a={},$$scope:l}=e;const c=cd(a);let{text:u="Provide text"}=e,{href:h=""}=e,{primaryFocus:f=!1}=e,{disabled:d=!1}=e,{hasDivider:p=!1}=e,{danger:y=!1}=e,{requireTitle:m=!0}=e,{id:g="ccs-"+Math.random().toString(36)}=e,{ref:_=null}=e;const{focusedId:T,add:O,update:w,change:x}=ud("OverflowMenu");hd(t,T,A=>n(14,o=A)),O({id:g,text:u,primaryFocus:f,disabled:d}),Xc(()=>{_&&f&&_.focus()});function b(A){Xt.call(this,t,A)}function E(A){Xt.call(this,t,A)}function L(A){Xt.call(this,t,A)}function k(A){Xt.call(this,t,A)}function R(A){Ae[A?"unshift":"push"](()=>{_=A,n(0,_)})}const V=()=>{w(g)},I=({key:A})=>{A==="ArrowDown"?x(1):A==="ArrowUp"&&x(-1)};function N(A){Ae[A?"unshift":"push"](()=>{_=A,n(0,_)})}const et=()=>{w(g)},K=({key:A})=>{A==="ArrowDown"?x(1):A==="ArrowUp"&&x(-1)};return t.$$set=A=>{e=Mt(Mt({},e),sn(A)),n(11,s=se(e,i)),"text"in A&&n(1,u=A.text),"href"in A&&n(2,h=A.href),"primaryFocus"in A&&n(12,f=A.primaryFocus),"disabled"in A&&n(3,d=A.disabled),"hasDivider"in A&&n(4,p=A.hasDivider),"danger"in A&&n(5,y=A.danger),"requireTitle"in A&&n(13,m=A.requireTitle),"id"in A&&n(6,g=A.id),"ref"in A&&n(0,_=A.ref),"$$scope"in A&&n(15,l=A.$$scope)},t.$$.update=()=>{t.$$.dirty&16448&&n(12,f=o===g),t.$$.dirty&8206&&n(7,r={role:"menuitem",tabindex:"-1",class:"bx--overflow-menu-options__btn",disabled:h?void 0:d,href:h||void 0,title:m?c.default?void 0:u:void 0})},[_,u,h,d,p,y,g,r,T,w,x,s,f,m,o,l,a,b,E,L,k,R,V,I,N,et,K]}class Fd extends Xe{constructor(e){super(),qe(this,e,Hd,Bd,Ye,{text:1,href:2,primaryFocus:12,disabled:3,hasDivider:4,danger:5,requireTitle:13,id:6,ref:0})}}const Vd=Fd;function zd(t){let e;const n=t[1].default,r=$o(n,t,t[4],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&16)&&Mo(r,n,i,i[4],e?Co(n,i[4],s,null):Ao(i[4]),null)},i(i){e||(F(r,i),e=!0)},o(i){H(r,i),e=!1},d(i){r&&r.d(i)}}}function Gd(t){let e,n;const r=[t[0]];let i={$$slots:{default:[zd]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)i=Mt(i,r[s]);return e=new Vd({props:i}),e.$on("click",t[2]),e.$on("keydown",t[3]),{c(){G(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,o){W(e,s,o),n=!0},p(s,[o]){const a=o&1?Ze(r,[Do(s[0])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(F(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){Y(e,s)}}}function jd(t,e,n){const r=[];let i=se(e,r),{$$slots:s={},$$scope:o}=e;function a(c){Xt.call(this,t,c)}function l(c){Xt.call(this,t,c)}return t.$$set=c=>{e=Mt(Mt({},e),sn(c)),n(0,i=se(e,r)),"$$scope"in c&&n(4,o=c.$$scope)},[i,s,a,l,o]}class Wd extends Xe{constructor(e){super(),qe(this,e,jd,Gd,Ye,{})}}const as=Wd;function Yd(t){let e;return{c(){e=Ge("Restart all")},l(n){e=je(n,"Restart all")},m(n,r){J(n,e,r)},d(n){n&&z(e)}}}function Xd(t){let e;return{c(){e=Ge("API documentation")},l(n){e=je(n,"API documentation")},m(n,r){J(n,e,r)},d(n){n&&z(e)}}}function qd(t){let e;return{c(){e=Ge("Stop all")},l(n){e=je(n,"Stop all")},m(n,r){J(n,e,r)},d(n){n&&z(e)}}}function Zd(t){let e,n,r,i,s,o;return e=new as({props:{primaryFocus:!0,$$slots:{default:[Yd]},$$scope:{ctx:t}}}),r=new as({props:{href:"https://cloud.ibm.com/docs/loadbalancer-service",$$slots:{default:[Xd]},$$scope:{ctx:t}}}),s=new as({props:{hasDivider:!0,danger:!0,$$slots:{default:[qd]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment),i=Et(),G(s.$$.fragment)},l(a){j(e.$$.fragment,a),n=$t(a),j(r.$$.fragment,a),i=$t(a),j(s.$$.fragment,a)},m(a,l){W(e,a,l),J(a,n,l),W(r,a,l),J(a,i,l),W(s,a,l),o=!0},p(a,l){const c={};l&256&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l&256&&(u.$$scope={dirty:l,ctx:a}),r.$set(u);const h={};l&256&&(h.$$scope={dirty:l,ctx:a}),s.$set(h)},i(a){o||(F(e.$$.fragment,a),F(r.$$.fragment,a),F(s.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(r.$$.fragment,a),H(s.$$.fragment,a),o=!1},d(a){a&&(z(n),z(i)),Y(e,a),Y(r,a),Y(s,a)}}}function Kd(t){let e;return{c(){e=Ge("Imprimir reporte")},l(n){e=je(n,"Imprimir reporte")},m(n,r){J(n,e,r)},d(n){n&&z(e)}}}function Qd(t){let e,n,r,i,s,o;return e=new Cd({props:{placeholder:"Buscar",persistent:!0,shouldFilterRows:!0}}),r=new kd({props:{$$slots:{default:[Zd]},$$scope:{ctx:t}}}),s=new Dd({props:{icon:wd,$$slots:{default:[Kd]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment),i=Et(),G(s.$$.fragment)},l(a){j(e.$$.fragment,a),n=$t(a),j(r.$$.fragment,a),i=$t(a),j(s.$$.fragment,a)},m(a,l){W(e,a,l),J(a,n,l),W(r,a,l),J(a,i,l),W(s,a,l),o=!0},p(a,l){const c={};l&256&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const u={};l&256&&(u.$$scope={dirty:l,ctx:a}),s.$set(u)},i(a){o||(F(e.$$.fragment,a),F(r.$$.fragment,a),F(s.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(r.$$.fragment,a),H(s.$$.fragment,a),o=!1},d(a){a&&(z(n),z(i)),Y(e,a),Y(r,a),Y(s,a)}}}function Jd(t){let e,n;return e=new Ad({props:{$$slots:{default:[Qd]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&256&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function tp(t){let e,n;return e=new Md({props:{size:"sm",$$slots:{default:[Jd]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&256&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function ep(t){let e,n,r,i,s,o;e=new Ed({props:{useStaticWidth:!0,stickyHeader:!0,class:"w-full",sortKey:"Fecha",sortDirection:"descending",sortable:!0,headers:[{key:"Paquete",value:"Paquete"},{key:"Titular",value:"Titular"},{key:"Importe",value:"Importe"},{key:"Fecha",value:"Fecha"}],pageSize:t[3],page:t[4],rows:t[2],$$slots:{default:[tp]},$$scope:{ctx:t}}});function a(u){t[6](u)}function l(u){t[7](u)}let c={totalItems:t[2].length,pageSizeInputDisabled:!0};return t[3]!==void 0&&(c.pageSize=t[3]),t[4]!==void 0&&(c.page=t[4]),r=new $d({props:c}),Ae.push(()=>Ln(r,"pageSize",a)),Ae.push(()=>Ln(r,"page",l)),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(u){j(e.$$.fragment,u),n=$t(u),j(r.$$.fragment,u)},m(u,h){W(e,u,h),J(u,n,h),W(r,u,h),o=!0},p(u,h){const f={};h&8&&(f.pageSize=u[3]),h&16&&(f.page=u[4]),h&4&&(f.rows=u[2]),h&256&&(f.$$scope={dirty:h,ctx:u}),e.$set(f);const d={};h&4&&(d.totalItems=u[2].length),!i&&h&8&&(i=!0,d.pageSize=u[3],kn(()=>i=!1)),!s&&h&16&&(s=!0,d.page=u[4],kn(()=>s=!1)),r.$set(d)},i(u){o||(F(e.$$.fragment,u),F(r.$$.fragment,u),o=!0)},o(u){H(e.$$.fragment,u),H(r.$$.fragment,u),o=!1},d(u){u&&z(n),Y(e,u),Y(r,u)}}}function np(t){let e,n,r,i,s;return{c(){e=jt("h5"),n=Ge(t[0]),r=Et(),i=jt("h3"),s=Ge(t[1])},l(o){e=Wt(o,"H5",{});var a=de(e);n=je(a,t[0]),a.forEach(z),r=$t(o),i=Wt(o,"H3",{});var l=de(i);s=je(l,t[1]),l.forEach(z)},m(o,a){J(o,e,a),hr(e,n),J(o,r,a),J(o,i,a),hr(i,s)},p(o,a){a&1&&ri(n,o[0]),a&2&&ri(s,o[1])},d(o){o&&(z(e),z(r),z(i))}}}function rp(t){let e,n;return e=new Sd({props:{$$slots:{title:[np],default:[ep]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&287&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function ip(t){let e,n;return e=new Od({props:{size:"sm",$$slots:{default:[rp]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&287&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function sp(t){let e,n,r,i,s;return n=new ko({props:{$$slots:{default:[ip]},$$scope:{ctx:t}}}),{c(){e=jt("div"),G(n.$$.fragment)},l(o){e=Wt(o,"DIV",{});var a=de(e);j(n.$$.fragment,a),a.forEach(z)},m(o,a){J(o,e,a),W(n,e,null),s=!0},p(o,[a]){const l={};a&287&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){s||(F(n.$$.fragment,o),o&&fd(()=>{s&&(i&&i.end(1),r=bd(e,xd,{y:100}),r.start())}),s=!0)},o(o){H(n.$$.fragment,o),r&&r.invalidate(),o&&(i=_d(e,Td,{})),s=!1},d(o){o&&z(e),Y(n),o&&i&&i.end()}}}function op(t,e,n){let{data:r}=e,{titulo:i}=e,s=0;r.ventas.forEach(h=>{h.expand.pagos&&h.expand.pagos.forEach(f=>{n(1,s+=parseInt(f.valor))})}),s=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(s);let o=r.ventas.map(h=>{if(h.expand.pagos)return{id:h.expand.pagos[0].id,Paquete:h.expand.paquete.nombre+" "+new Date(h.expand.paquete.fechasalida).toLocaleDateString("es-AR",{year:"numeric",month:"numeric",day:"numeric"}),Titular:h.expand.cliente.nombre+" "+h.expand.cliente.apellido,Importe:new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(h.expand.pagos.reduce((f,d)=>f+d.valor,0)),Fecha:new Date(h.expand.pagos[0].created).toLocaleDateString("es-AR",{year:"numeric",month:"numeric",day:"numeric"})}});o=o.filter(h=>h!==void 0);let a=5,l=1;function c(h){a=h,n(3,a)}function u(h){l=h,n(4,l)}return t.$$set=h=>{"data"in h&&n(5,r=h.data),"titulo"in h&&n(0,i=h.titulo)},[i,s,o,a,l,r,c,u]}class Lo extends Xe{constructor(e){super(),qe(this,e,op,sp,Ye,{data:5,titulo:0})}}var Qc=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(Qc||{}),Jc=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(Jc||{}),tu=(t=>(t.UPDATE="model-update",t))(tu||{}),eu=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t))(eu||{}),nu=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(nu||{}),ru=(t=>(t.CHANGE="zoom-domain-change",t))(ru||{}),iu=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(iu||{}),su=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(su||{}),ou=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(ou||{}),au=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(au||{}),lu=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(lu||{}),cu=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(cu||{}),uu=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(uu||{}),hu=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(hu||{}),fu=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(fu||{}),du=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(du||{}),pu=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(pu||{}),mu=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(mu||{}),gu=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(gu||{}),vu=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(vu||{}),yu=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(yu||{}),bu=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(bu||{}),_u=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(_u||{}),wu=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(wu||{}),xu=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(xu||{}),Tu=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(Tu||{}),Ou=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(Ou||{});const ap=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:wu,Area:ou,Axis:su,Bar:uu,Boxplot:hu,CanvasZoom:iu,Chart:Qc,Choropleth:Ou,CirclePack:_u,Gauge:cu,Heatmap:Tu,Legend:bu,Line:du,Meter:xu,Modal:Jc,Model:tu,Pie:lu,Radar:pu,Scatter:fu,Threshold:yu,Toolbar:eu,Tooltip:vu,Tree:mu,Treemap:gu,WordCloud:au,ZoomBar:nu,ZoomDomain:ru},Symbol.toStringTag,{value:"Module"})),S=ap;var ot=(t=>(t.HTML="html",t.SVG="svg",t))(ot||{}),Su=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(Su||{}),Lt=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Lt||{}),$=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))($||{}),ye=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(ye||{}),he=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(he||{}),Kt=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(Kt||{}),B=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(B||{}),ar=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(ar||{}),ee=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(ee||{}),fr=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(fr||{}),Eu=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(Eu||{}),At=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(At||{}),yt=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(yt||{}),Ui=(t=>(t.CENTER="center",t))(Ui||{}),Vr=(t=>(t.LEFT="left",t.RIGHT="right",t))(Vr||{}),Fe=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Fe||{}),$u=(t=>(t.SEMI="semi",t.FULL="full",t))($u||{}),zr=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(zr||{}),Be=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(Be||{}),xt=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(xt||{}),Is=(t=>(t.LEFT="left",t.RIGHT="right",t))(Is||{}),Dt=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(Dt||{}),Mu=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Mu||{}),Ro=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(Ro||{}),Au=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Au||{});function Gr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lp(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Io(t){let e,n,r;t.length!==2?(e=Gr,n=(a,l)=>Gr(t(a),l),r=(a,l)=>t(a)-l):(e=t===Gr||t===lp?t:cp,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=i(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function cp(){return 0}function up(t){return t===null?NaN:+t}const hp=Io(Gr),fp=hp.right;Io(up).center;const Cu=fp;function dp(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function En(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Ua extends Map{constructor(e,n=gp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ba(this,e))}has(e){return super.has(Ba(this,e))}set(e,n){return super.set(pp(this,e),n)}delete(e){return super.delete(mp(this,e))}}function Ba({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pp({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function mp({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gp(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vp(t){return t}var yp=Array.prototype,bp=yp.slice;function ls(t){return()=>t}const _p=Math.sqrt(50),wp=Math.sqrt(10),xp=Math.sqrt(2);function si(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=_p?10:s>=wp?5:s>=xp?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?si(t,e,n*2):[a,l,c]}function oi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?si(e,t,n):si(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function Rn(t,e,n){return e=+e,t=+t,n=+n,si(t,e,n)[2]}function Ps(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Rn(e,t,n):Rn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Tp(t,e,n){let r;for(;;){const i=Rn(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Op(t){return Math.max(1,Math.ceil(Math.log(dp(t))/Math.LN2)+1)}function Sp(){var t=vp,e=En,n=Op;function r(i){Array.isArray(i)||(i=Array.from(i));var s,o=i.length,a,l,c=new Array(o);for(s=0;s<o;++s)c[s]=t(i[s],s,i);var u=e(c),h=u[0],f=u[1],d=n(c,h,f);if(!Array.isArray(d)){const T=f,O=+d;if(e===En&&([h,f]=Tp(h,f,O)),d=oi(h,f,O),d[0]<=h&&(l=Rn(h,f,O)),d[d.length-1]>=f)if(T>=f&&e===En){const w=Rn(h,f,O);isFinite(w)&&(w>0?f=(Math.floor(f/w)+1)*w:w<0&&(f=(Math.ceil(f*-w)+1)/-w))}else d.pop()}for(var p=d.length,y=0,m=p;d[y]<=h;)++y;for(;d[m-1]>f;)--m;(y||m<p)&&(d=d.slice(y,m),p=m-y);var g=new Array(p+1),_;for(s=0;s<=p;++s)_=g[s]=[],_.x0=s>0?d[s-1]:h,_.x1=s<p?d[s]:f;if(isFinite(l)){if(l>0)for(s=0;s<o;++s)(a=c[s])!=null&&h<=a&&a<=f&&g[Math.min(p,Math.floor((a-h)/l))].push(i[s]);else if(l<0){for(s=0;s<o;++s)if((a=c[s])!=null&&h<=a&&a<=f){const T=Math.floor((h-a)*l);g[Math.min(p,T+(d[T]<=a))].push(i[s])}}}else for(s=0;s<o;++s)(a=c[s])!=null&&h<=a&&a<=f&&g[Cu(d,a,0,p)].push(i[s]);return g}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:ls(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:ls([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:ls(Array.isArray(i)?bp.call(i):i),r):n},r}function Ep(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $p(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mp(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ap(t){return t}var jr=1,Wr=2,Ns=3,nr=4,Ha=1e-6;function Cp(t){return"translate("+t+",0)"}function kp(t){return"translate(0,"+t+")"}function Dp(t){return e=>+t(e)}function Lp(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Rp(){return!this.__axis}function Bi(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===jr||t===nr?-1:1,u=t===nr||t===Wr?"x":"y",h=t===jr||t===Ns?Cp:kp;function f(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),y=i??(e.tickFormat?e.tickFormat.apply(e,n):Ap),m=Math.max(s,0)+a,g=e.range(),_=+g[0]+l,T=+g[g.length-1]+l,O=(e.bandwidth?Lp:Dp)(e.copy(),l),w=d.selection?d.selection():d,x=w.selectAll(".domain").data([null]),b=w.selectAll(".tick").data(p,e).order(),E=b.exit(),L=b.enter().append("g").attr("class","tick"),k=b.select("line"),R=b.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(L),k=k.merge(L.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(L.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",t===jr?"0em":t===Ns?"0.71em":"0.32em")),d!==w&&(x=x.transition(d),b=b.transition(d),k=k.transition(d),R=R.transition(d),E=E.transition(d).attr("opacity",Ha).attr("transform",function(V){return isFinite(V=O(V))?h(V+l):this.getAttribute("transform")}),L.attr("opacity",Ha).attr("transform",function(V){var I=this.parentNode.__axis;return h((I&&isFinite(I=I(V))?I:O(V))+l)})),E.remove(),x.attr("d",t===nr||t===Wr?o?"M"+c*o+","+_+"H"+l+"V"+T+"H"+c*o:"M"+l+","+_+"V"+T:o?"M"+_+","+c*o+"V"+l+"H"+T+"V"+c*o:"M"+_+","+l+"H"+T),b.attr("opacity",1).attr("transform",function(V){return h(O(V)+l)}),k.attr(u+"2",c*s),R.attr(u,c*m).text(y),w.filter(Rp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Wr?"start":t===nr?"end":"middle"),w.each(function(){this.__axis=O})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(s=o=+d,f):s},f.tickSizeInner=function(d){return arguments.length?(s=+d,f):s},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function Ip(t){return Bi(jr,t)}function Pp(t){return Bi(Wr,t)}function ku(t){return Bi(Ns,t)}function Du(t){return Bi(nr,t)}var Np={value:()=>{}};function Po(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yr(n)}function Yr(t){this._=t}function Up(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yr.prototype=Po.prototype={constructor:Yr,on:function(t,e){var n=this._,r=Up(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Bp(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Fa(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Fa(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Yr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Bp(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Fa(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Np,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Us="http://www.w3.org/1999/xhtml";const Va={svg:"http://www.w3.org/2000/svg",xhtml:Us,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hi(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Va.hasOwnProperty(e)?{space:Va[e],local:t}:t}function Hp(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Us&&e.documentElement.namespaceURI===Us?e.createElement(t):e.createElementNS(n,t)}}function Fp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lu(t){var e=Hi(t);return(e.local?Fp:Hp)(e)}function Vp(){}function No(t){return t==null?Vp:function(){return this.querySelector(t)}}function zp(t){typeof t!="function"&&(t=No(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new ne(r,this._parents)}function Gp(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function jp(){return[]}function Ru(t){return t==null?jp:function(){return this.querySelectorAll(t)}}function Wp(t){return function(){return Gp(t.apply(this,arguments))}}function Yp(t){typeof t=="function"?t=Wp(t):t=Ru(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new ne(r,i)}function Iu(t){return function(){return this.matches(t)}}function Pu(t){return function(e){return e.matches(t)}}var Xp=Array.prototype.find;function qp(t){return function(){return Xp.call(this.children,t)}}function Zp(){return this.firstElementChild}function Kp(t){return this.select(t==null?Zp:qp(typeof t=="function"?t:Pu(t)))}var Qp=Array.prototype.filter;function Jp(){return Array.from(this.children)}function tm(t){return function(){return Qp.call(this.children,t)}}function em(t){return this.selectAll(t==null?Jp:tm(typeof t=="function"?t:Pu(t)))}function nm(t){typeof t!="function"&&(t=Iu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new ne(r,this._parents)}function Nu(t){return new Array(t.length)}function rm(){return new ne(this._enter||this._groups.map(Nu),this._parents)}function ai(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ai.prototype={constructor:ai,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function im(t){return function(){return t}}function sm(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new ai(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function om(t,e,n,r,i,s,o){var a,l,c=new Map,u=e.length,h=s.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=o.call(l,l.__data__,a,e)+"",c.has(d)?i[a]=l:c.set(d,l));for(a=0;a<h;++a)d=o.call(t,s[a],a,s)+"",(l=c.get(d))?(r[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new ai(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(i[a]=l)}function am(t){return t.__data__}function lm(t,e){if(!arguments.length)return Array.from(this,am);var n=e?om:sm,r=this._parents,i=this._groups;typeof t!="function"&&(t=im(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],f=h.length,d=cm(t.call(u,u&&u.__data__,c,r)),p=d.length,y=a[c]=new Array(p),m=o[c]=new Array(p),g=l[c]=new Array(f);n(u,h,y,m,g,d,e);for(var _=0,T=0,O,w;_<p;++_)if(O=y[_]){for(_>=T&&(T=_+1);!(w=m[T])&&++T<p;);O._next=w||null}}return o=new ne(o,r),o._enter=a,o._exit=l,o}function cm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function um(){return new ne(this._exit||this._groups.map(Nu),this._parents)}function hm(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fm(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],h=c.length,f=a[l]=new Array(h),d,p=0;p<h;++p)(d=c[p]||u[p])&&(f[p]=d);for(;l<i;++l)a[l]=n[l];return new ne(a,this._parents)}function dm(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pm(t){t||(t=mm);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new ne(i,this._parents).order()}function mm(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gm(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vm(){return Array.from(this)}function ym(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function bm(){let t=0;for(const e of this)++t;return t}function _m(){return!this.node()}function wm(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function xm(t){return function(){this.removeAttribute(t)}}function Tm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Om(t,e){return function(){this.setAttribute(t,e)}}function Sm(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Em(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function $m(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Mm(t,e){var n=Hi(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Tm:xm:typeof e=="function"?n.local?$m:Em:n.local?Sm:Om)(n,e))}function Uu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Am(t){return function(){this.style.removeProperty(t)}}function Cm(t,e,n){return function(){this.style.setProperty(t,e,n)}}function km(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Dm(t,e,n){return arguments.length>1?this.each((e==null?Am:typeof e=="function"?km:Cm)(t,e,n??"")):In(this.node(),t)}function In(t,e){return t.style.getPropertyValue(e)||Uu(t).getComputedStyle(t,null).getPropertyValue(e)}function Lm(t){return function(){delete this[t]}}function Rm(t,e){return function(){this[t]=e}}function Im(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Pm(t,e){return arguments.length>1?this.each((e==null?Lm:typeof e=="function"?Im:Rm)(t,e)):this.node()[t]}function Bu(t){return t.trim().split(/^|\s+/)}function Uo(t){return t.classList||new Hu(t)}function Hu(t){this._node=t,this._names=Bu(t.getAttribute("class")||"")}Hu.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fu(t,e){for(var n=Uo(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Vu(t,e){for(var n=Uo(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Nm(t){return function(){Fu(this,t)}}function Um(t){return function(){Vu(this,t)}}function Bm(t,e){return function(){(e.apply(this,arguments)?Fu:Vu)(this,t)}}function Hm(t,e){var n=Bu(t+"");if(arguments.length<2){for(var r=Uo(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Bm:e?Nm:Um)(n,e))}function Fm(){this.textContent=""}function Vm(t){return function(){this.textContent=t}}function zm(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Gm(t){return arguments.length?this.each(t==null?Fm:(typeof t=="function"?zm:Vm)(t)):this.node().textContent}function jm(){this.innerHTML=""}function Wm(t){return function(){this.innerHTML=t}}function Ym(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Xm(t){return arguments.length?this.each(t==null?jm:(typeof t=="function"?Ym:Wm)(t)):this.node().innerHTML}function qm(){this.nextSibling&&this.parentNode.appendChild(this)}function Zm(){return this.each(qm)}function Km(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qm(){return this.each(Km)}function Jm(t){var e=typeof t=="function"?t:Lu(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tg(){return null}function eg(t,e){var n=typeof t=="function"?t:Lu(t),r=e==null?tg:typeof e=="function"?e:No(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ng(){var t=this.parentNode;t&&t.removeChild(this)}function rg(){return this.each(ng)}function ig(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sg(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function og(t){return this.select(t?sg:ig)}function ag(t){return arguments.length?this.property("__data__",t):this.node().__data__}function lg(t){return function(e){t.call(this,e,this.__data__)}}function cg(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ug(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function hg(t,e,n){return function(){var r=this.__on,i,s=lg(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fg(t,e,n){var r=cg(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?hg:ug,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function zu(t,e,n){var r=Uu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dg(t,e){return function(){return zu(this,t,e)}}function pg(t,e){return function(){return zu(this,t,e.apply(this,arguments))}}function mg(t,e){return this.each((typeof e=="function"?pg:dg)(t,e))}function*gg(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Gu=[null];function ne(t,e){this._groups=t,this._parents=e}function Or(){return new ne([[document.documentElement]],Gu)}function vg(){return this}ne.prototype=Or.prototype={constructor:ne,select:zp,selectAll:Yp,selectChild:Kp,selectChildren:em,filter:nm,data:lm,enter:rm,exit:um,join:hm,merge:fm,selection:vg,order:dm,sort:pm,call:gm,nodes:vm,node:ym,size:bm,empty:_m,each:wm,attr:Mm,style:Dm,property:Pm,classed:Hm,text:Gm,html:Xm,raise:Zm,lower:Qm,append:Jm,insert:eg,remove:rg,clone:og,datum:ag,on:fg,dispatch:mg,[Symbol.iterator]:gg};function M(t){return typeof t=="string"?new ne([[document.querySelector(t)]],[document.documentElement]):new ne([[t]],Gu)}function yg(t){let e;for(;e=t.sourceEvent;)t=e;return t}function on(t,e){if(t=yg(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Bs={capture:!0,passive:!1};function Hs(t){t.preventDefault(),t.stopImmediatePropagation()}function bg(t){var e=t.document.documentElement,n=M(t).on("dragstart.drag",Hs,Bs);"onselectstart"in e?n.on("selectstart.drag",Hs,Bs):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function _g(t,e){var n=t.document.documentElement,r=M(t).on("dragstart.drag",null);e&&(r.on("click.drag",Hs,Bs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Bo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ju(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sr(){}var dr=.7,li=1/dr,$n="\\s*([+-]?\\d+)\\s*",pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wg=/^#([0-9a-f]{3,8})$/,xg=new RegExp(`^rgb\\(${$n},${$n},${$n}\\)$`),Tg=new RegExp(`^rgb\\(${be},${be},${be}\\)$`),Og=new RegExp(`^rgba\\(${$n},${$n},${$n},${pr}\\)$`),Sg=new RegExp(`^rgba\\(${be},${be},${be},${pr}\\)$`),Eg=new RegExp(`^hsl\\(${pr},${be},${be}\\)$`),$g=new RegExp(`^hsla\\(${pr},${be},${be},${pr}\\)$`),za={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bo(Sr,an,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ga,formatHex:Ga,formatHex8:Mg,formatHsl:Ag,formatRgb:ja,toString:ja});function Ga(){return this.rgb().formatHex()}function Mg(){return this.rgb().formatHex8()}function Ag(){return Wu(this).formatHsl()}function ja(){return this.rgb().formatRgb()}function an(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wg.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Wa(e):n===3?new qt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xg.exec(t))?new qt(e[1],e[2],e[3],1):(e=Tg.exec(t))?new qt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Og.exec(t))?Rr(e[1],e[2],e[3],e[4]):(e=Sg.exec(t))?Rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Eg.exec(t))?qa(e[1],e[2]/100,e[3]/100,1):(e=$g.exec(t))?qa(e[1],e[2]/100,e[3]/100,e[4]):za.hasOwnProperty(t)?Wa(za[t]):t==="transparent"?new qt(NaN,NaN,NaN,0):null}function Wa(t){return new qt(t>>16&255,t>>8&255,t&255,1)}function Rr(t,e,n,r){return r<=0&&(t=e=n=NaN),new qt(t,e,n,r)}function Cg(t){return t instanceof Sr||(t=an(t)),t?(t=t.rgb(),new qt(t.r,t.g,t.b,t.opacity)):new qt}function Fs(t,e,n,r){return arguments.length===1?Cg(t):new qt(t,e,n,r??1)}function qt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Bo(qt,Fs,ju(Sr,{brighter(t){return t=t==null?li:Math.pow(li,t),new qt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dr:Math.pow(dr,t),new qt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qt(rn(this.r),rn(this.g),rn(this.b),ci(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ya,formatHex:Ya,formatHex8:kg,formatRgb:Xa,toString:Xa}));function Ya(){return`#${nn(this.r)}${nn(this.g)}${nn(this.b)}`}function kg(){return`#${nn(this.r)}${nn(this.g)}${nn(this.b)}${nn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xa(){const t=ci(this.opacity);return`${t===1?"rgb(":"rgba("}${rn(this.r)}, ${rn(this.g)}, ${rn(this.b)}${t===1?")":`, ${t})`}`}function ci(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nn(t){return t=rn(t),(t<16?"0":"")+t.toString(16)}function qa(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ue(t,e,n,r)}function Wu(t){if(t instanceof ue)return new ue(t.h,t.s,t.l,t.opacity);if(t instanceof Sr||(t=an(t)),!t)return new ue;if(t instanceof ue)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ue(o,a,l,t.opacity)}function Dg(t,e,n,r){return arguments.length===1?Wu(t):new ue(t,e,n,r??1)}function ue(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Bo(ue,Dg,ju(Sr,{brighter(t){return t=t==null?li:Math.pow(li,t),new ue(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dr:Math.pow(dr,t),new ue(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qt(cs(t>=240?t-240:t+120,i,r),cs(t,i,r),cs(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ue(Za(this.h),Ir(this.s),Ir(this.l),ci(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ci(this.opacity);return`${t===1?"hsl(":"hsla("}${Za(this.h)}, ${Ir(this.s)*100}%, ${Ir(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Za(t){return t=(t||0)%360,t<0?t+360:t}function Ir(t){return Math.max(0,Math.min(1,t||0))}function cs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ho=t=>()=>t;function Lg(t,e){return function(n){return t+n*e}}function Rg(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ig(t){return(t=+t)==1?Yu:function(e,n){return n-e?Rg(e,n,t):Ho(isNaN(e)?n:e)}}function Yu(t,e){var n=e-t;return n?Lg(t,n):Ho(isNaN(t)?e:t)}const ui=function t(e){var n=Ig(e);function r(i,s){var o=n((i=Fs(i)).r,(s=Fs(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Yu(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Pg(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Ng(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ug(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Er(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Bg(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function re(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Hg(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Er(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Vs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(Vs.source,"g");function Fg(t){return function(){return t}}function Vg(t){return function(e){return t(e)+""}}function Xu(t,e){var n=Vs.lastIndex=us.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Vs.exec(t))&&(i=us.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:re(r,i)})),n=us.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Vg(l[0].x):Fg(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Er(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ho(e):(n==="number"?re:n==="string"?(r=an(e))?(e=r,ui):Xu:e instanceof an?ui:e instanceof Date?Bg:Ng(e)?Pg:Array.isArray(e)?Ug:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hg:re)(t,e)}function qu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ka=180/Math.PI,zs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zu(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ka,skewX:Math.atan(l)*Ka,scaleX:o,scaleY:a}}var Pr;function zg(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zs:Zu(e.a,e.b,e.c,e.d,e.e,e.f)}function Gg(t){return t==null||(Pr||(Pr=document.createElementNS("http://www.w3.org/2000/svg","g")),Pr.setAttribute("transform",t),!(t=Pr.transform.baseVal.consolidate()))?zs:(t=t.matrix,Zu(t.a,t.b,t.c,t.d,t.e,t.f))}function Ku(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,f,d,p){if(c!==h||u!==f){var y=d.push("translate(",null,e,null,n);p.push({i:y-4,x:re(c,h)},{i:y-2,x:re(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:re(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:re(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,p){if(c!==h||u!==f){var y=d.push(i(d)+"scale(",null,",",null,")");p.push({i:y-4,x:re(c,h)},{i:y-2,x:re(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var p=-1,y=f.length,m;++p<y;)h[(m=f[p]).i]=m.x(d);return h.join("")}}}var jg=Ku(zg,"px, ","px)","deg)"),Wg=Ku(Gg,", ",")",")"),Pn=0,rr=0,Xn=0,Qu=1e3,hi,ir,fi=0,ln=0,Fi=0,mr=typeof performance=="object"&&performance.now?performance:Date,Ju=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fo(){return ln||(Ju(Yg),ln=mr.now()+Fi)}function Yg(){ln=0}function di(){this._call=this._time=this._next=null}di.prototype=th.prototype={constructor:di,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Fo():+n)+(e==null?0:+e),!this._next&&ir!==this&&(ir?ir._next=this:hi=this,ir=this),this._call=t,this._time=n,Gs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gs())}};function th(t,e,n){var r=new di;return r.restart(t,e,n),r}function Xg(){Fo(),++Pn;for(var t=hi,e;t;)(e=ln-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pn}function Qa(){ln=(fi=mr.now())+Fi,Pn=rr=0;try{Xg()}finally{Pn=0,Zg(),ln=0}}function qg(){var t=mr.now(),e=t-fi;e>Qu&&(Fi-=e,fi=t)}function Zg(){for(var t,e=hi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:hi=n);ir=t,Gs(r)}function Gs(t){if(!Pn){rr&&(rr=clearTimeout(rr));var e=t-ln;e>24?(t<1/0&&(rr=setTimeout(Qa,t-mr.now()-Fi)),Xn&&(Xn=clearInterval(Xn))):(Xn||(fi=mr.now(),Xn=setInterval(qg,Qu)),Pn=1,Ju(Qa))}}function Ja(t,e,n){var r=new di;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Kg=Po("start","end","cancel","interrupt"),Qg=[],eh=0,tl=1,js=2,Xr=3,el=4,Ws=5,qr=6;function Vi(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Jg(t,n,{name:e,index:r,group:i,on:Kg,tween:Qg,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:eh})}function Vo(t,e){var n=pe(t,e);if(n.state>eh)throw new Error("too late; already scheduled");return n}function we(t,e){var n=pe(t,e);if(n.state>Xr)throw new Error("too late; already running");return n}function pe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Jg(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=th(s,0,n.time);function s(c){n.state=tl,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==tl)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Xr)return Ja(o);d.state===el?(d.state=qr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=qr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Ja(function(){n.state===Xr&&(n.state=el,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=js,n.on.call("start",t,t.__data__,n.index,n.group),n.state===js){for(n.state=Xr,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ws,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===Ws&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=qr,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Ys(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>js&&r.state<Ws,r.state=qr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function tv(t){return this.each(function(){Ys(this,t)})}function ev(t,e){var n,r;return function(){var i=we(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nv(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=we(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function rv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=pe(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?ev:nv)(n,t,e))}function zo(t,e,n){var r=t._id;return t.each(function(){var i=we(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return pe(i,r).value[e]}}function nh(t,e){var n;return(typeof e=="number"?re:e instanceof an?ui:(n=an(e))?(e=n,ui):Xu)(t,e)}function iv(t){return function(){this.removeAttribute(t)}}function sv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ov(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function av(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function lv(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function cv(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function uv(t,e){var n=Hi(t),r=n==="transform"?Wg:nh;return this.attrTween(t,typeof e=="function"?(n.local?cv:lv)(n,r,zo(this,"attr."+t,e)):e==null?(n.local?sv:iv)(n):(n.local?av:ov)(n,r,e))}function hv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function dv(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&fv(t,s)),n}return i._value=e,i}function pv(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&hv(t,s)),n}return i._value=e,i}function mv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Hi(t);return this.tween(n,(r.local?dv:pv)(r,e))}function gv(t,e){return function(){Vo(this,t).delay=+e.apply(this,arguments)}}function vv(t,e){return e=+e,function(){Vo(this,t).delay=e}}function yv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gv:vv)(e,t)):pe(this.node(),e).delay}function bv(t,e){return function(){we(this,t).duration=+e.apply(this,arguments)}}function _v(t,e){return e=+e,function(){we(this,t).duration=e}}function wv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bv:_v)(e,t)):pe(this.node(),e).duration}function xv(t,e){if(typeof e!="function")throw new Error;return function(){we(this,t).ease=e}}function Tv(t){var e=this._id;return arguments.length?this.each(xv(e,t)):pe(this.node(),e).ease}function Ov(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;we(this,t).ease=n}}function Sv(t){if(typeof t!="function")throw new Error;return this.each(Ov(this._id,t))}function Ev(t){typeof t!="function"&&(t=Iu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Ce(r,this._parents,this._name,this._id)}function $v(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<r;++a)o[a]=e[a];return new Ce(o,this._parents,this._name,this._id)}function Mv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Av(t,e,n){var r,i,s=Mv(e)?Vo:we;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function Cv(t,e){var n=this._id;return arguments.length<2?pe(this.node(),n).on.on(t):this.each(Av(n,t,e))}function kv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Dv(){return this.on("end.remove",kv(this._id))}function Lv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=No(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=t.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Vi(c[f],e,n,f,c,pe(u,n)));return new Ce(s,this._parents,e,n)}function Rv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ru(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,p=pe(u,n),y=0,m=f.length;y<m;++y)(d=f[y])&&Vi(d,e,n,y,f,p);s.push(f),o.push(u)}return new Ce(s,o,e,n)}var Iv=Or.prototype.constructor;function Pv(){return new Iv(this._groups,this._parents)}function Nv(t,e){var n,r,i;return function(){var s=In(this,t),o=(this.style.removeProperty(t),In(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function rh(t){return function(){this.style.removeProperty(t)}}function Uv(t,e,n){var r,i=n+"",s;return function(){var o=In(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Bv(t,e,n){var r,i,s;return function(){var o=In(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),In(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function Hv(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=we(this,t),c=l.on,u=l.value[s]==null?a||(a=rh(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function Fv(t,e,n){var r=(t+="")=="transform"?jg:nh;return e==null?this.styleTween(t,Nv(t,r)).on("end.style."+t,rh(t)):typeof e=="function"?this.styleTween(t,Bv(t,r,zo(this,"style."+t,e))).each(Hv(this._id,t)):this.styleTween(t,Uv(t,r,e),n).on("end.style."+t,null)}function Vv(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zv(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Vv(t,o,n)),r}return s._value=e,s}function Gv(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zv(t,e,n??""))}function jv(t){return function(){this.textContent=t}}function Wv(t){return function(){var e=t(this);this.textContent=e??""}}function Yv(t){return this.tween("text",typeof t=="function"?Wv(zo(this,"text",t)):jv(t==null?"":t+""))}function Xv(t){return function(e){this.textContent=t.call(this,e)}}function qv(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Xv(i)),e}return r._value=t,r}function Zv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qv(t))}function Kv(){for(var t=this._name,e=this._id,n=ih(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=pe(l,e);Vi(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ce(r,this._parents,t,n)}function Qv(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=we(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var Jv=0;function Ce(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ih(){return++Jv}var xe=Or.prototype;Ce.prototype={constructor:Ce,select:Lv,selectAll:Rv,selectChild:xe.selectChild,selectChildren:xe.selectChildren,filter:Ev,merge:$v,selection:Pv,transition:Kv,call:xe.call,nodes:xe.nodes,node:xe.node,size:xe.size,empty:xe.empty,each:xe.each,on:Cv,attr:uv,attrTween:mv,style:Fv,styleTween:Gv,text:Yv,textTween:Zv,remove:Dv,tween:rv,delay:yv,duration:wv,ease:Tv,easeVarying:Sv,end:Qv,[Symbol.iterator]:xe[Symbol.iterator]};const t0=t=>+t;function sh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var e0={time:null,delay:0,duration:250,ease:sh};function n0(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function r0(t){var e,n;t instanceof Ce?(e=t._id,t=t._name):(e=ih(),(n=e0).time=Fo(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Vi(l,t,e,c,o,n||n0(l,e));return new Ce(r,this._parents,t,e)}Or.prototype.interrupt=tv;Or.prototype.transition=r0;const hs=t=>()=>t;function i0(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function s0(t){t.stopImmediatePropagation()}function fs(t){t.preventDefault(),t.stopImmediatePropagation()}var nl={name:"drag"},ds={name:"space"},vn={name:"handle"},yn={name:"center"};const{abs:rl,max:Nt,min:Ut}=Math;function il(t){return[+t[0],+t[1]]}function sl(t){return[il(t[0]),il(t[1])]}var Zr={name:"x",handles:["w","e"].map(pi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ps={name:"y",handles:["n","s"].map(pi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Te={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ol={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},al={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},o0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},a0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function pi(t){return{type:t}}function l0(t){return!t.ctrlKey&&!t.button}function c0(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function u0(){return navigator.maxTouchPoints||"ontouchstart"in this}function ms(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function h0(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function oh(){return f0(Zr)}function f0(t){var e=c0,n=l0,r=u0,i=!0,s=Po("start","brush","end"),o=6,a;function l(m){var g=m.property("__brush",y).selectAll(".overlay").data([pi("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Te.overlay).merge(g).each(function(){var T=ms(this).extent;M(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),m.selectAll(".selection").data([pi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Te.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=m.selectAll(".handle").data(t.handles,function(T){return T.type});_.exit().remove(),_.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return Te[T.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,g,_){m.tween?m.on("start.brush",function(T){u(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){u(this,arguments).end(T)}).tween("brush",function(){var T=this,O=T.__brush,w=u(T,arguments),x=O.selection,b=t.input(typeof g=="function"?g.apply(this,arguments):g,O.extent),E=Er(x,b);function L(k){O.selection=k===1&&b===null?null:E(k),c.call(T),w.brush()}return x!==null&&b!==null?L:L(1)}):m.each(function(){var T=this,O=arguments,w=T.__brush,x=t.input(typeof g=="function"?g.apply(T,O):g,w.extent),b=u(T,O).beforestart();Ys(T),w.selection=x===null?null:x,c.call(T),b.start(_).brush(_).end(_)})},l.clear=function(m,g){l.move(m,null,g)};function c(){var m=M(this),g=ms(this).selection;g?(m.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?g[1][0]-o/2:g[0][0]-o/2}).attr("y",function(_){return _.type[0]==="s"?g[1][1]-o/2:g[0][1]-o/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?g[1][0]-g[0][0]+o:o}).attr("height",function(_){return _.type==="e"||_.type==="w"?g[1][1]-g[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,g,_){var T=m.__brush.emitter;return T&&(!_||!T.clean)?T:new h(m,g,_)}function h(m,g,_){this.that=m,this.args=g,this.state=m.__brush,this.active=0,this.clean=_}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,g){return this.starting?(this.starting=!1,this.emit("start",m,g)):this.emit("brush",m),this},brush:function(m,g){return this.emit("brush",m,g),this},end:function(m,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,g)),this},emit:function(m,g,_){var T=M(this.that).datum();s.call(m,this.that,new i0(m,{sourceEvent:g,target:l,selection:t.output(this.state.selection),mode:_,dispatch:s}),T)}};function f(m){if(a&&!m.touches||!n.apply(this,arguments))return;var g=this,_=m.target.__data__.type,T=(i&&m.metaKey?_="overlay":_)==="selection"?nl:i&&m.altKey?yn:vn,O=t===ps?null:o0[_],w=t===Zr?null:a0[_],x=ms(g),b=x.extent,E=x.selection,L=b[0][0],k,R,V=b[0][1],I,N,et=b[1][0],K,A,pt=b[1][1],nt,mt,ht=0,lt=0,ce,U=O&&w&&i&&m.shiftKey,Z,ut,rt=Array.from(m.touches||[m],q=>{const St=q.identifier;return q=on(q,g),q.point0=q.slice(),q.identifier=St,q});Ys(g);var Tt=u(g,arguments,!0).beforestart();if(_==="overlay"){E&&(ce=!0);const q=[rt[0],rt[1]||rt[0]];x.selection=E=[[k=t===ps?L:Ut(q[0][0],q[1][0]),I=t===Zr?V:Ut(q[0][1],q[1][1])],[K=t===ps?et:Nt(q[0][0],q[1][0]),nt=t===Zr?pt:Nt(q[0][1],q[1][1])]],rt.length>1&&Ot(m)}else k=E[0][0],I=E[0][1],K=E[1][0],nt=E[1][1];R=k,N=I,A=K,mt=nt;var P=M(g).attr("pointer-events","none"),X=P.selectAll(".overlay").attr("cursor",Te[_]);if(m.touches)Tt.moved=C,Tt.ended=ft;else{var it=M(m.view).on("mousemove.brush",C,!0).on("mouseup.brush",ft,!0);i&&it.on("keydown.brush",zt,!0).on("keyup.brush",Gt,!0),bg(m.view)}c.call(g),Tt.start(m,T.name);function C(q){for(const St of q.changedTouches||[q])for(const Yn of rt)Yn.identifier===St.identifier&&(Yn.cur=on(St,g));if(U&&!Z&&!ut&&rt.length===1){const St=rt[0];rl(St.cur[0]-St[0])>rl(St.cur[1]-St[1])?ut=!0:Z=!0}for(const St of rt)St.cur&&(St[0]=St.cur[0],St[1]=St.cur[1]);ce=!0,fs(q),Ot(q)}function Ot(q){const St=rt[0],Yn=St.point0;var Pe;switch(ht=St[0]-Yn[0],lt=St[1]-Yn[1],T){case ds:case nl:{O&&(ht=Nt(L-k,Ut(et-K,ht)),R=k+ht,A=K+ht),w&&(lt=Nt(V-I,Ut(pt-nt,lt)),N=I+lt,mt=nt+lt);break}case vn:{rt[1]?(O&&(R=Nt(L,Ut(et,rt[0][0])),A=Nt(L,Ut(et,rt[1][0])),O=1),w&&(N=Nt(V,Ut(pt,rt[0][1])),mt=Nt(V,Ut(pt,rt[1][1])),w=1)):(O<0?(ht=Nt(L-k,Ut(et-k,ht)),R=k+ht,A=K):O>0&&(ht=Nt(L-K,Ut(et-K,ht)),R=k,A=K+ht),w<0?(lt=Nt(V-I,Ut(pt-I,lt)),N=I+lt,mt=nt):w>0&&(lt=Nt(V-nt,Ut(pt-nt,lt)),N=I,mt=nt+lt));break}case yn:{O&&(R=Nt(L,Ut(et,k-ht*O)),A=Nt(L,Ut(et,K+ht*O))),w&&(N=Nt(V,Ut(pt,I-lt*w)),mt=Nt(V,Ut(pt,nt+lt*w)));break}}A<R&&(O*=-1,Pe=k,k=K,K=Pe,Pe=R,R=A,A=Pe,_ in ol&&X.attr("cursor",Te[_=ol[_]])),mt<N&&(w*=-1,Pe=I,I=nt,nt=Pe,Pe=N,N=mt,mt=Pe,_ in al&&X.attr("cursor",Te[_=al[_]])),x.selection&&(E=x.selection),Z&&(R=E[0][0],A=E[1][0]),ut&&(N=E[0][1],mt=E[1][1]),(E[0][0]!==R||E[0][1]!==N||E[1][0]!==A||E[1][1]!==mt)&&(x.selection=[[R,N],[A,mt]],c.call(g),Tt.brush(q,T.name))}function ft(q){if(s0(q),q.touches){if(q.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else _g(q.view,ce),it.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),X.attr("cursor",Te.overlay),x.selection&&(E=x.selection),h0(E)&&(x.selection=null,c.call(g)),Tt.end(q,T.name)}function zt(q){switch(q.keyCode){case 16:{U=O&&w;break}case 18:{T===vn&&(O&&(K=A-ht*O,k=R+ht*O),w&&(nt=mt-lt*w,I=N+lt*w),T=yn,Ot(q));break}case 32:{(T===vn||T===yn)&&(O<0?K=A-ht:O>0&&(k=R-ht),w<0?nt=mt-lt:w>0&&(I=N-lt),T=ds,X.attr("cursor",Te.selection),Ot(q));break}default:return}fs(q)}function Gt(q){switch(q.keyCode){case 16:{U&&(Z=ut=U=!1,Ot(q));break}case 18:{T===yn&&(O<0?K=A:O>0&&(k=R),w<0?nt=mt:w>0&&(I=N),T=vn,Ot(q));break}case 32:{T===ds&&(q.altKey?(O&&(K=A-ht*O,k=R+ht*O),w&&(nt=mt-lt*w,I=N+lt*w),T=yn):(O<0?K=A:O>0&&(k=R),w<0?nt=mt:w>0&&(I=N),T=vn),X.attr("cursor",Te[_]),Ot(q));break}default:return}fs(q)}}function d(m){u(this,arguments).moved(m)}function p(m){u(this,arguments).ended(m)}function y(){var m=this.__brush||{selection:null};return m.extent=sl(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:hs(sl(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:hs(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:hs(!!m),l):r},l.handleSize=function(m){return arguments.length?(o=+m,l):o},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=s.on.apply(s,arguments);return m===s?l:m},l}const Xs=Math.PI,qs=2*Xs,Qe=1e-6,d0=qs-Qe;function ah(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function p0(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ah;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class m0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ah:p0(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Qe)if(!(Math.abs(h*l-c*u)>Qe)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-a,y=l*l+c*c,m=d*d+p*p,g=Math.sqrt(y),_=Math.sqrt(f),T=s*Math.tan((Xs-Math.acos((y+f-m)/(2*g*_)))/2),O=T/_,w=T/g;Math.abs(O-1)>Qe&&this._append`L${e+O*u},${n+O*h}`,this._append`A${s},${s},0,0,${+(h*d>u*p)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,h=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Qe||Math.abs(this._y1-u)>Qe)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%qs+qs),f>d0?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:f>Qe&&this._append`A${r},${r},0,${+(f>=Xs)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function g0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function mi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nn(t){return t=mi(Math.abs(t)),t?t[1]:NaN}function v0(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function y0(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var b0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gr(t){if(!(e=b0.exec(t)))throw new Error("invalid format: "+t);var e;return new Go({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}gr.prototype=Go.prototype;function Go(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Go.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _0(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var lh;function w0(t,e){var n=mi(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(lh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+mi(t,Math.max(0,e+s-1))[0]}function ll(t,e){var n=mi(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const cl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:g0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ll(t*100,e),r:ll,s:w0,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ul(t){return t}var hl=Array.prototype.map,fl=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function x0(t){var e=t.grouping===void 0||t.thousands===void 0?ul:v0(hl.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ul:y0(hl.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=gr(h);var f=h.fill,d=h.align,p=h.sign,y=h.symbol,m=h.zero,g=h.width,_=h.comma,T=h.precision,O=h.trim,w=h.type;w==="n"?(_=!0,w="g"):cl[w]||(T===void 0&&(T=12),O=!0,w="g"),(m||f==="0"&&d==="=")&&(m=!0,f="0",d="=");var x=y==="$"?n:y==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b=y==="$"?r:/[%p]/.test(w)?o:"",E=cl[w],L=/[defgprs%]/.test(w);T=T===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function k(R){var V=x,I=b,N,et,K;if(w==="c")I=E(R)+I,R="";else{R=+R;var A=R<0||1/R<0;if(R=isNaN(R)?l:E(Math.abs(R),T),O&&(R=_0(R)),A&&+R==0&&p!=="+"&&(A=!1),V=(A?p==="("?p:a:p==="-"||p==="("?"":p)+V,I=(w==="s"?fl[8+lh/3]:"")+I+(A&&p==="("?")":""),L){for(N=-1,et=R.length;++N<et;)if(K=R.charCodeAt(N),48>K||K>57){I=(K===46?i+R.slice(N+1):R.slice(N))+I,R=R.slice(0,N);break}}}_&&!m&&(R=e(R,1/0));var pt=V.length+R.length+I.length,nt=pt<g?new Array(g-pt+1).join(f):"";switch(_&&m&&(R=e(nt+R,nt.length?g-I.length:1/0),nt=""),d){case"<":R=V+R+I+nt;break;case"=":R=V+nt+R+I;break;case"^":R=nt.slice(0,pt=nt.length>>1)+V+R+I+nt.slice(pt);break;default:R=nt+V+R+I;break}return s(R)}return k.toString=function(){return h+""},k}function u(h,f){var d=c((h=gr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Nn(f)/3)))*3,y=Math.pow(10,-p),m=fl[8+p/3];return function(g){return d(y*g)+m}}return{format:c,formatPrefix:u}}var Nr,jo,ch;T0({thousands:",",grouping:[3],currency:["$",""]});function T0(t){return Nr=x0(t),jo=Nr.format,ch=Nr.formatPrefix,Nr}function O0(t){return Math.max(0,-Nn(Math.abs(t)))}function S0(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nn(e)/3)))*3-Nn(Math.abs(t)))}function E0(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nn(e)-Nn(t))+1}function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const dl=Symbol("implicit");function Wo(){var t=new Ua,e=[],n=[],r=dl;function i(s){let o=t.get(s);if(o===void 0){if(r!==dl)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Ua;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Wo(e,n).unknown(r)},$r.apply(i,arguments),i}function Yo(){var t=Wo().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,d=i<r,p=d?i:r,y=d?r:i;s=(y-p)/Math.max(1,f-l+c*2),a&&(s=Math.floor(s)),p+=(y-p-s*(f-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var m=Mp(f).map(function(g){return p+s*g});return n(d?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,h()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return Yo(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},$r.apply(h(),arguments)}function $0(t){return function(){return t}}function M0(t){return+t}var pl=[0,1];function xn(t){return t}function Zs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$0(isNaN(e)?NaN:.5)}function A0(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function C0(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Zs(i,r),s=n(o,s)):(r=Zs(r,i),s=n(s,o)),function(a){return s(r(a))}}function k0(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Zs(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Cu(t,a,1,r)-1;return s[l](i[l](a))}}function Xo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uh(){var t=pl,e=pl,n=Er,r,i,s,o=xn,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==xn&&(o=A0(t[0],t[f-1])),a=f>2?k0:C0,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((c||(c=a(e,t.map(r),re)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,M0),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=qu,u()},h.clamp=function(f){return arguments.length?(o=f?!0:xn,u()):o!==xn},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return r=f,i=d,u()}}function hh(){return uh()(xn,xn)}function D0(t,e,n,r){var i=Ps(t,e,n),s;switch(r=gr(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=S0(i,o))&&(r.precision=s),ch(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=E0(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=O0(i))&&(r.precision=s-(r.type==="%")*2);break}}return jo(r)}function L0(t){var e=t.domain;return t.ticks=function(n){var r=e();return oi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return D0(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=Rn(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function gi(){var t=hh();return t.copy=function(){return Xo(t,gi())},$r.apply(t,arguments),L0(t)}function fh(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function ml(t){return Math.log(t)}function gl(t){return Math.exp(t)}function R0(t){return-Math.log(-t)}function I0(t){return-Math.exp(-t)}function P0(t){return isFinite(t)?+("1e"+t):t<0?0:t}function N0(t){return t===10?P0:t===Math.E?Math.exp:e=>Math.pow(t,e)}function U0(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vl(t){return(e,n)=>-t(-e,n)}function B0(t){const e=t(ml,gl),n=e.domain;let r=10,i,s;function o(){return i=U0(r),s=N0(r),n()[0]<0?(i=vl(i),s=vl(s),t(R0,I0)):t(ml,gl),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=i(c),d=i(u),p,y;const m=a==null?10:+a;let g=[];if(!(r%1)&&d-f<m){if(f=Math.floor(f),d=Math.ceil(d),c>0){for(;f<=d;++f)for(p=1;p<r;++p)if(y=f<0?p/s(-f):p*s(f),!(y<c)){if(y>u)break;g.push(y)}}else for(;f<=d;++f)for(p=r-1;p>=1;--p)if(y=f>0?p/s(-f):p*s(f),!(y<c)){if(y>u)break;g.push(y)}g.length*2<m&&(g=oi(c,u,m))}else g=oi(f,d,Math.min(d-f,m)).map(s);return h?g.reverse():g},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=gr(l)).precision==null&&(l.trim=!0),l=jo(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(fh(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function dh(){const t=B0(uh()).domain([1,10]);return t.copy=()=>Xo(t,dh()).base(t.base()),$r.apply(t,arguments),t}const gs=new Date,vs=new Date;function kt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>kt(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(gs.setTime(+s),vs.setTime(+o),t(gs),t(vs),Math.floor(n(gs,vs))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const vi=kt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);vi.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?kt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):vi);vi.range;const Ee=1e3,ie=Ee*60,$e=ie*60,ke=$e*24,qo=ke*7,yl=ke*30,ys=ke*365,Tn=kt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ee)},(t,e)=>(e-t)/Ee,t=>t.getUTCSeconds());Tn.range;const Zo=kt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ee)},(t,e)=>{t.setTime(+t+e*ie)},(t,e)=>(e-t)/ie,t=>t.getMinutes());Zo.range;const H0=kt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ie)},(t,e)=>(e-t)/ie,t=>t.getUTCMinutes());H0.range;const Ko=kt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ee-t.getMinutes()*ie)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getHours());Ko.range;const F0=kt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getUTCHours());F0.range;const Mr=kt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ie)/ke,t=>t.getDate()-1);Mr.range;const Qo=kt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ke,t=>t.getUTCDate()-1);Qo.range;const V0=kt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ke,t=>Math.floor(t/ke));V0.range;function fn(t){return kt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ie)/qo)}const zi=fn(0),yi=fn(1),z0=fn(2),G0=fn(3),Un=fn(4),j0=fn(5),W0=fn(6);zi.range;yi.range;z0.range;G0.range;Un.range;j0.range;W0.range;function dn(t){return kt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/qo)}const ph=dn(0),bi=dn(1),Y0=dn(2),X0=dn(3),Bn=dn(4),q0=dn(5),Z0=dn(6);ph.range;bi.range;Y0.range;X0.range;Bn.range;q0.range;Z0.range;const Jo=kt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Jo.range;const K0=kt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());K0.range;const De=kt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());De.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});De.range;const cn=kt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());cn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});cn.range;function Q0(t,e,n,r,i,s){const o=[[Tn,1,Ee],[Tn,5,5*Ee],[Tn,15,15*Ee],[Tn,30,30*Ee],[s,1,ie],[s,5,5*ie],[s,15,15*ie],[s,30,30*ie],[i,1,$e],[i,3,3*$e],[i,6,6*$e],[i,12,12*$e],[r,1,ke],[r,2,2*ke],[n,1,qo],[e,1,yl],[e,3,3*yl],[t,1,ys]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),p=d?d.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,h){const f=Math.abs(u-c)/h,d=Io(([,,m])=>m).right(o,f);if(d===o.length)return t.every(Ps(c/ys,u/ys,h));if(d===0)return vi.every(Math.max(Ps(c,u,h),1));const[p,y]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return p.every(y)}return[a,l]}const[J0,ty]=Q0(De,Jo,zi,Mr,Ko,Zo);function bs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _s(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function qn(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ey(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Zn(i),u=Kn(i),h=Zn(s),f=Kn(s),d=Zn(o),p=Kn(o),y=Zn(a),m=Kn(a),g=Zn(l),_=Kn(l),T={a:A,A:pt,b:nt,B:mt,c:null,d:Ol,e:Ol,f:Oy,g:Ry,G:Py,H:wy,I:xy,j:Ty,L:mh,m:Sy,M:Ey,p:ht,q:lt,Q:$l,s:Ml,S:$y,u:My,U:Ay,V:Cy,w:ky,W:Dy,x:null,X:null,y:Ly,Y:Iy,Z:Ny,"%":El},O={a:ce,A:U,b:Z,B:ut,c:null,d:Sl,e:Sl,f:Fy,g:Ky,G:Jy,H:Uy,I:By,j:Hy,L:vh,m:Vy,M:zy,p:rt,q:Tt,Q:$l,s:Ml,S:Gy,u:jy,U:Wy,V:Yy,w:Xy,W:qy,x:null,X:null,y:Zy,Y:Qy,Z:t1,"%":El},w={a:k,A:R,b:V,B:I,c:N,d:xl,e:xl,f:vy,g:wl,G:_l,H:Tl,I:Tl,j:dy,L:gy,m:fy,M:py,p:L,q:hy,Q:by,s:_y,S:my,u:oy,U:ay,V:ly,w:sy,W:cy,x:et,X:K,y:wl,Y:_l,Z:uy,"%":yy};T.x=x(n,T),T.X=x(r,T),T.c=x(e,T),O.x=x(n,O),O.X=x(r,O),O.c=x(e,O);function x(P,X){return function(it){var C=[],Ot=-1,ft=0,zt=P.length,Gt,q,St;for(it instanceof Date||(it=new Date(+it));++Ot<zt;)P.charCodeAt(Ot)===37&&(C.push(P.slice(ft,Ot)),(q=bl[Gt=P.charAt(++Ot)])!=null?Gt=P.charAt(++Ot):q=Gt==="e"?" ":"0",(St=X[Gt])&&(Gt=St(it,q)),C.push(Gt),ft=Ot+1);return C.push(P.slice(ft,Ot)),C.join("")}}function b(P,X){return function(it){var C=qn(1900,void 0,1),Ot=E(C,P,it+="",0),ft,zt;if(Ot!=it.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(X&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(ft=_s(qn(C.y,0,1)),zt=ft.getUTCDay(),ft=zt>4||zt===0?bi.ceil(ft):bi(ft),ft=Qo.offset(ft,(C.V-1)*7),C.y=ft.getUTCFullYear(),C.m=ft.getUTCMonth(),C.d=ft.getUTCDate()+(C.w+6)%7):(ft=bs(qn(C.y,0,1)),zt=ft.getDay(),ft=zt>4||zt===0?yi.ceil(ft):yi(ft),ft=Mr.offset(ft,(C.V-1)*7),C.y=ft.getFullYear(),C.m=ft.getMonth(),C.d=ft.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),zt="Z"in C?_s(qn(C.y,0,1)).getUTCDay():bs(qn(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(zt+5)%7:C.w+C.U*7-(zt+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,_s(C)):bs(C)}}function E(P,X,it,C){for(var Ot=0,ft=X.length,zt=it.length,Gt,q;Ot<ft;){if(C>=zt)return-1;if(Gt=X.charCodeAt(Ot++),Gt===37){if(Gt=X.charAt(Ot++),q=w[Gt in bl?X.charAt(Ot++):Gt],!q||(C=q(P,it,C))<0)return-1}else if(Gt!=it.charCodeAt(C++))return-1}return C}function L(P,X,it){var C=c.exec(X.slice(it));return C?(P.p=u.get(C[0].toLowerCase()),it+C[0].length):-1}function k(P,X,it){var C=d.exec(X.slice(it));return C?(P.w=p.get(C[0].toLowerCase()),it+C[0].length):-1}function R(P,X,it){var C=h.exec(X.slice(it));return C?(P.w=f.get(C[0].toLowerCase()),it+C[0].length):-1}function V(P,X,it){var C=g.exec(X.slice(it));return C?(P.m=_.get(C[0].toLowerCase()),it+C[0].length):-1}function I(P,X,it){var C=y.exec(X.slice(it));return C?(P.m=m.get(C[0].toLowerCase()),it+C[0].length):-1}function N(P,X,it){return E(P,e,X,it)}function et(P,X,it){return E(P,n,X,it)}function K(P,X,it){return E(P,r,X,it)}function A(P){return o[P.getDay()]}function pt(P){return s[P.getDay()]}function nt(P){return l[P.getMonth()]}function mt(P){return a[P.getMonth()]}function ht(P){return i[+(P.getHours()>=12)]}function lt(P){return 1+~~(P.getMonth()/3)}function ce(P){return o[P.getUTCDay()]}function U(P){return s[P.getUTCDay()]}function Z(P){return l[P.getUTCMonth()]}function ut(P){return a[P.getUTCMonth()]}function rt(P){return i[+(P.getUTCHours()>=12)]}function Tt(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var X=x(P+="",T);return X.toString=function(){return P},X},parse:function(P){var X=b(P+="",!1);return X.toString=function(){return P},X},utcFormat:function(P){var X=x(P+="",O);return X.toString=function(){return P},X},utcParse:function(P){var X=b(P+="",!0);return X.toString=function(){return P},X}}}var bl={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,ny=/^%/,ry=/[\\^$*+?|[\]().{}]/g;function at(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function iy(t){return t.replace(ry,"\\$&")}function Zn(t){return new RegExp("^(?:"+t.map(iy).join("|")+")","i")}function Kn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function sy(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function oy(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ay(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ly(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function cy(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _l(t,e,n){var r=Rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function wl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uy(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hy(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function fy(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function xl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dy(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Tl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function py(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function my(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gy(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vy(t,e,n){var r=Rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yy(t,e,n){var r=ny.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function by(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _y(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ol(t,e){return at(t.getDate(),e,2)}function wy(t,e){return at(t.getHours(),e,2)}function xy(t,e){return at(t.getHours()%12||12,e,2)}function Ty(t,e){return at(1+Mr.count(De(t),t),e,3)}function mh(t,e){return at(t.getMilliseconds(),e,3)}function Oy(t,e){return mh(t,e)+"000"}function Sy(t,e){return at(t.getMonth()+1,e,2)}function Ey(t,e){return at(t.getMinutes(),e,2)}function $y(t,e){return at(t.getSeconds(),e,2)}function My(t){var e=t.getDay();return e===0?7:e}function Ay(t,e){return at(zi.count(De(t)-1,t),e,2)}function gh(t){var e=t.getDay();return e>=4||e===0?Un(t):Un.ceil(t)}function Cy(t,e){return t=gh(t),at(Un.count(De(t),t)+(De(t).getDay()===4),e,2)}function ky(t){return t.getDay()}function Dy(t,e){return at(yi.count(De(t)-1,t),e,2)}function Ly(t,e){return at(t.getFullYear()%100,e,2)}function Ry(t,e){return t=gh(t),at(t.getFullYear()%100,e,2)}function Iy(t,e){return at(t.getFullYear()%1e4,e,4)}function Py(t,e){var n=t.getDay();return t=n>=4||n===0?Un(t):Un.ceil(t),at(t.getFullYear()%1e4,e,4)}function Ny(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+at(e/60|0,"0",2)+at(e%60,"0",2)}function Sl(t,e){return at(t.getUTCDate(),e,2)}function Uy(t,e){return at(t.getUTCHours(),e,2)}function By(t,e){return at(t.getUTCHours()%12||12,e,2)}function Hy(t,e){return at(1+Qo.count(cn(t),t),e,3)}function vh(t,e){return at(t.getUTCMilliseconds(),e,3)}function Fy(t,e){return vh(t,e)+"000"}function Vy(t,e){return at(t.getUTCMonth()+1,e,2)}function zy(t,e){return at(t.getUTCMinutes(),e,2)}function Gy(t,e){return at(t.getUTCSeconds(),e,2)}function jy(t){var e=t.getUTCDay();return e===0?7:e}function Wy(t,e){return at(ph.count(cn(t)-1,t),e,2)}function yh(t){var e=t.getUTCDay();return e>=4||e===0?Bn(t):Bn.ceil(t)}function Yy(t,e){return t=yh(t),at(Bn.count(cn(t),t)+(cn(t).getUTCDay()===4),e,2)}function Xy(t){return t.getUTCDay()}function qy(t,e){return at(bi.count(cn(t)-1,t),e,2)}function Zy(t,e){return at(t.getUTCFullYear()%100,e,2)}function Ky(t,e){return t=yh(t),at(t.getUTCFullYear()%100,e,2)}function Qy(t,e){return at(t.getUTCFullYear()%1e4,e,4)}function Jy(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Bn(t):Bn.ceil(t),at(t.getUTCFullYear()%1e4,e,4)}function t1(){return"+0000"}function El(){return"%"}function $l(t){return+t}function Ml(t){return Math.floor(+t/1e3)}var bn,bh;e1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e1(t){return bn=ey(t),bh=bn.format,bn.parse,bn.utcFormat,bn.utcParse,bn}function n1(t){return new Date(t)}function r1(t){return t instanceof Date?+t:+new Date(+t)}function _h(t,e,n,r,i,s,o,a,l,c){var u=hh(),h=u.invert,f=u.domain,d=c(".%L"),p=c(":%S"),y=c("%I:%M"),m=c("%I %p"),g=c("%a %d"),_=c("%b %d"),T=c("%B"),O=c("%Y");function w(x){return(l(x)<x?d:a(x)<x?p:o(x)<x?y:s(x)<x?m:r(x)<x?i(x)<x?g:_:n(x)<x?T:O)(x)}return u.invert=function(x){return new Date(h(x))},u.domain=function(x){return arguments.length?f(Array.from(x,r1)):f().map(n1)},u.ticks=function(x){var b=f();return t(b[0],b[b.length-1],x??10)},u.tickFormat=function(x,b){return b==null?w:c(b)},u.nice=function(x){var b=f();return(!x||typeof x.range!="function")&&(x=e(b[0],b[b.length-1],x??10)),x?f(fh(b,x)):u},u.copy=function(){return Xo(u,_h(t,e,n,r,i,s,o,a,l,c))},u}function wh(){return $r.apply(_h(J0,ty,De,Jo,zi,Mr,Ko,Zo,Tn,bh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function st(t){return function(){return t}}const Al=Math.abs,Bt=Math.atan2,Ke=Math.cos,i1=Math.max,ws=Math.min,ge=Math.sin,On=Math.sqrt,Ht=1e-12,vr=Math.PI,_i=vr/2,Kr=2*vr;function s1(t){return t>1?0:t<-1?vr:Math.acos(t)}function Cl(t){return t>=1?_i:t<=-1?-_i:Math.asin(t)}function ta(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new m0(e)}function o1(t){return t.innerRadius}function a1(t){return t.outerRadius}function l1(t){return t.startAngle}function c1(t){return t.endAngle}function u1(t){return t&&t.padAngle}function h1(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,h=a-s,f=h*l-u*c;if(!(f*f<Ht))return f=(u*(e-s)-h*(t-i))/f,[t+f*l,e+f*c]}function Ur(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/On(a*a+l*l),u=c*l,h=-c*a,f=t+u,d=e+h,p=n+u,y=r+h,m=(f+p)/2,g=(d+y)/2,_=p-f,T=y-d,O=_*_+T*T,w=i-s,x=f*y-p*d,b=(T<0?-1:1)*On(i1(0,w*w*O-x*x)),E=(x*T-_*b)/O,L=(-x*_-T*b)/O,k=(x*T+_*b)/O,R=(-x*_+T*b)/O,V=E-m,I=L-g,N=k-m,et=R-g;return V*V+I*I>N*N+et*et&&(E=k,L=R),{cx:E,cy:L,x01:-u,y01:-h,x11:E*(i/w-1),y11:L*(i/w-1)}}function Ks(){var t=o1,e=a1,n=st(0),r=null,i=l1,s=c1,o=u1,a=null,l=ta(c);function c(){var u,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-_i,y=s.apply(this,arguments)-_i,m=Al(y-p),g=y>p;if(a||(a=u=l()),d<f&&(h=d,d=f,f=h),!(d>Ht))a.moveTo(0,0);else if(m>Kr-Ht)a.moveTo(d*Ke(p),d*ge(p)),a.arc(0,0,d,p,y,!g),f>Ht&&(a.moveTo(f*Ke(y),f*ge(y)),a.arc(0,0,f,y,p,g));else{var _=p,T=y,O=p,w=y,x=m,b=m,E=o.apply(this,arguments)/2,L=E>Ht&&(r?+r.apply(this,arguments):On(f*f+d*d)),k=ws(Al(d-f)/2,+n.apply(this,arguments)),R=k,V=k,I,N;if(L>Ht){var et=Cl(L/f*ge(E)),K=Cl(L/d*ge(E));(x-=et*2)>Ht?(et*=g?1:-1,O+=et,w-=et):(x=0,O=w=(p+y)/2),(b-=K*2)>Ht?(K*=g?1:-1,_+=K,T-=K):(b=0,_=T=(p+y)/2)}var A=d*Ke(_),pt=d*ge(_),nt=f*Ke(w),mt=f*ge(w);if(k>Ht){var ht=d*Ke(T),lt=d*ge(T),ce=f*Ke(O),U=f*ge(O),Z;if(m<vr)if(Z=h1(A,pt,ce,U,ht,lt,nt,mt)){var ut=A-Z[0],rt=pt-Z[1],Tt=ht-Z[0],P=lt-Z[1],X=1/ge(s1((ut*Tt+rt*P)/(On(ut*ut+rt*rt)*On(Tt*Tt+P*P)))/2),it=On(Z[0]*Z[0]+Z[1]*Z[1]);R=ws(k,(f-it)/(X-1)),V=ws(k,(d-it)/(X+1))}else R=V=0}b>Ht?V>Ht?(I=Ur(ce,U,A,pt,d,V,g),N=Ur(ht,lt,nt,mt,d,V,g),a.moveTo(I.cx+I.x01,I.cy+I.y01),V<k?a.arc(I.cx,I.cy,V,Bt(I.y01,I.x01),Bt(N.y01,N.x01),!g):(a.arc(I.cx,I.cy,V,Bt(I.y01,I.x01),Bt(I.y11,I.x11),!g),a.arc(0,0,d,Bt(I.cy+I.y11,I.cx+I.x11),Bt(N.cy+N.y11,N.cx+N.x11),!g),a.arc(N.cx,N.cy,V,Bt(N.y11,N.x11),Bt(N.y01,N.x01),!g))):(a.moveTo(A,pt),a.arc(0,0,d,_,T,!g)):a.moveTo(A,pt),!(f>Ht)||!(x>Ht)?a.lineTo(nt,mt):R>Ht?(I=Ur(nt,mt,ht,lt,f,-R,g),N=Ur(A,pt,ce,U,f,-R,g),a.lineTo(I.cx+I.x01,I.cy+I.y01),R<k?a.arc(I.cx,I.cy,R,Bt(I.y01,I.x01),Bt(N.y01,N.x01),!g):(a.arc(I.cx,I.cy,R,Bt(I.y01,I.x01),Bt(I.y11,I.x11),!g),a.arc(0,0,f,Bt(I.cy+I.y11,I.cx+I.x11),Bt(N.cy+N.y11,N.cx+N.x11),g),a.arc(N.cx,N.cy,R,Bt(N.y11,N.x11),Bt(N.y01,N.x01),!g))):a.arc(0,0,f,w,O,g)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-vr/2;return[Ke(h)*u,ge(h)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:st(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:st(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:st(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:st(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:st(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:st(+u),c):s},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:st(+u),c):o},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function Gi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xh(t){this._context=t}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ea(t){return new xh(t)}function Th(t){return t[0]}function Oh(t){return t[1]}function na(t,e){var n=st(!0),r=null,i=ea,s=null,o=ta(a);t=typeof t=="function"?t:t===void 0?Th:st(t),e=typeof e=="function"?e:e===void 0?Oh:st(e);function a(l){var c,u=(l=Gi(l)).length,h,f=!1,d;for(r==null&&(s=i(d=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,c,l),+e(h,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:st(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:st(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:st(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function ra(t,e,n){var r=null,i=st(!0),s=null,o=ea,a=null,l=ta(c);t=typeof t=="function"?t:t===void 0?Th:st(+t),e=typeof e=="function"?e:st(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Oh:st(+n);function c(h){var f,d,p,y=(h=Gi(h)).length,m,g=!1,_,T=new Array(y),O=new Array(y);for(s==null&&(a=o(_=l())),f=0;f<=y;++f){if(!(f<y&&i(m=h[f],f,h))===g)if(g=!g)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=d;--p)a.point(T[p],O[p]);a.lineEnd(),a.areaEnd()}g&&(T[f]=+t(m,f,h),O[f]=+e(m,f,h),a.point(r?+r(m,f,h):T[f],n?+n(m,f,h):O[f]))}if(_)return a=null,_+""||null}function u(){return na().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:st(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:st(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:st(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:st(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:st(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:st(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:st(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}function f1(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function d1(t){return t}function p1(){var t=d1,e=f1,n=null,r=st(0),i=st(Kr),s=st(0);function o(a){var l,c=(a=Gi(a)).length,u,h,f=0,d=new Array(c),p=new Array(c),y=+r.apply(this,arguments),m=Math.min(Kr,Math.max(-Kr,i.apply(this,arguments)-y)),g,_=Math.min(Math.abs(m)/c,s.apply(this,arguments)),T=_*(m<0?-1:1),O;for(l=0;l<c;++l)(O=p[d[l]=l]=+t(a[l],l,a))>0&&(f+=O);for(e!=null?d.sort(function(w,x){return e(p[w],p[x])}):n!=null&&d.sort(function(w,x){return n(a[w],a[x])}),l=0,h=f?(m-c*T)/f:0;l<c;++l,y=g)u=d[l],O=p[u],g=y+(O>0?O*h:0)+T,p[u]={data:a[u],index:l,value:O,startAngle:y,endAngle:g,padAngle:_};return p}return o.value=function(a){return arguments.length?(t=typeof a=="function"?a:st(+a),o):t},o.sortValues=function(a){return arguments.length?(e=a,n=null,o):e},o.sort=function(a){return arguments.length?(n=a,e=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:st(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:st(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:st(+a),o):s},o}function We(){}function wi(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ji(t){this._context=t}ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function m1(t){return new ji(t)}function Sh(t){this._context=t}Sh.prototype={areaStart:We,areaEnd:We,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function g1(t){return new Sh(t)}function Eh(t){this._context=t}Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function v1(t){return new Eh(t)}function $h(t,e){this._basis=new ji(t),this._beta=e}$h.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const y1=function t(e){function n(r){return e===1?new ji(r):new $h(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function xi(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ia(t,e){this._context=t,this._k=(1-e)/6}ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xi(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:xi(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const b1=function t(e){function n(r){return new ia(r,e)}return n.tension=function(r){return t(+r)},n}(0);function sa(t,e){this._context=t,this._k=(1-e)/6}sa.prototype={areaStart:We,areaEnd:We,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xi(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _1=function t(e){function n(r){return new sa(r,e)}return n.tension=function(r){return t(+r)},n}(0);function oa(t,e){this._context=t,this._k=(1-e)/6}oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xi(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const w1=function t(e){function n(r){return new oa(r,e)}return n.tension=function(r){return t(+r)},n}(0);function aa(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Ht){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Ht){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function Mh(t,e){this._context=t,this._alpha=e}Mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:aa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const x1=function t(e){function n(r){return e?new Mh(r,e):new ia(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ah(t,e){this._context=t,this._alpha=e}Ah.prototype={areaStart:We,areaEnd:We,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:aa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const T1=function t(e){function n(r){return e?new Ah(r,e):new sa(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ch(t,e){this._context=t,this._alpha=e}Ch.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const O1=function t(e){function n(r){return e?new Ch(r,e):new oa(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function kh(t){this._context=t}kh.prototype={areaStart:We,areaEnd:We,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function S1(t){return new kh(t)}function kl(t){return t<0?-1:1}function Dl(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(kl(s)+kl(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ll(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function xs(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Ti(t){this._context=t}Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xs(this,this._t0,Ll(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,xs(this,Ll(this,n=Dl(this,t,e)),n);break;default:xs(this,this._t0,n=Dl(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dh(t){this._context=new Lh(t)}(Dh.prototype=Object.create(Ti.prototype)).point=function(t,e){Ti.prototype.point.call(this,e,t)};function Lh(t){this._context=t}Lh.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function E1(t){return new Ti(t)}function $1(t){return new Dh(t)}function Rh(t){this._context=t}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Rl(t),i=Rl(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Rl(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function M1(t){return new Rh(t)}function Wi(t,e){this._context=t,this._t=e}Wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function A1(t){return new Wi(t,.5)}function C1(t){return new Wi(t,0)}function k1(t){return new Wi(t,1)}function Il(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Pl(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function D1(t,e){return t[e]}function L1(t){const e=[];return e.key=t,e}function Ts(){var t=st([]),e=Pl,n=Il,r=D1;function i(s){var o=Array.from(t.apply(this,arguments),L1),a,l=o.length,c=-1,u;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,u=Gi(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:st(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:st(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Pl:typeof s=="function"?s:st(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Il,i):n},i}function R1(t,e){if((l=t.length)>0)for(var n,r=0,i,s,o,a,l,c=t[e[0]].length;r<c;++r)for(o=a=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=s):s<0?(i[1]=a,i[0]=a+=s):(i[0]=0,i[1]=s)}function sr(t,e,n){this.k=t,this.x=e,this.y=n}sr.prototype={constructor:sr,scale:function(t){return t===1?this:new sr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new sr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sr.prototype;function Os(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}function Qn(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}function Jn(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?P1(a,function(h){return h.test(o)}):I1(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function I1(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function P1(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function N1(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}function Oi(t){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(t)}function Ct(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Q(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ct(t){Q(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Oi(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Yi(t,e){Q(2,arguments);var n=ct(t).getTime(),r=Ct(e);return new Date(n+r)}var U1={};function Xi(){return U1}function Qs(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function B1(t){return Q(1,arguments),t instanceof Date||Oi(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function H1(t){if(Q(1,arguments),!B1(t)&&typeof t!="number")return!1;var e=ct(t);return!isNaN(Number(e))}function F1(t,e){Q(2,arguments);var n=Ct(e);return Yi(t,-n)}var V1=864e5;function z1(t){Q(1,arguments);var e=ct(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/V1)+1}function Si(t){Q(1,arguments);var e=1,n=ct(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Ih(t){Q(1,arguments);var e=ct(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Si(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Si(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function G1(t){Q(1,arguments);var e=Ih(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Si(n);return r}var j1=6048e5;function W1(t){Q(1,arguments);var e=ct(t),n=Si(e).getTime()-G1(e).getTime();return Math.round(n/j1)+1}function Ei(t,e){var n,r,i,s,o,a,l,c;Q(1,arguments);var u=Xi(),h=Ct((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ct(t),d=f.getUTCDay(),p=(d<h?7:0)+d-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Ph(t,e){var n,r,i,s,o,a,l,c;Q(1,arguments);var u=ct(t),h=u.getUTCFullYear(),f=Xi(),d=Ct((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,d),p.setUTCHours(0,0,0,0);var y=Ei(p,e),m=new Date(0);m.setUTCFullYear(h,0,d),m.setUTCHours(0,0,0,0);var g=Ei(m,e);return u.getTime()>=y.getTime()?h+1:u.getTime()>=g.getTime()?h:h-1}function Y1(t,e){var n,r,i,s,o,a,l,c;Q(1,arguments);var u=Xi(),h=Ct((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=Ph(t,e),d=new Date(0);d.setUTCFullYear(f,0,h),d.setUTCHours(0,0,0,0);var p=Ei(d,e);return p}var X1=6048e5;function q1(t,e){Q(1,arguments);var n=ct(t),r=Ei(n,e).getTime()-Y1(n,e).getTime();return Math.round(r/X1)+1}function dt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Z1={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return dt(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):dt(n+1,2)},d:function(t,e){return dt(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return dt(t.getUTCHours()%12||12,e.length)},H:function(t,e){return dt(t.getUTCHours(),e.length)},m:function(t,e){return dt(t.getUTCMinutes(),e.length)},s:function(t,e){return dt(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return dt(i,e.length)}};const Ne=Z1;var _n={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},K1={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ne.y(t,e)},Y:function(t,e,n,r){var i=Ph(t,r),s=i>0?i:1-i;if(e==="YY"){var o=s%100;return dt(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):dt(s,e.length)},R:function(t,e){var n=Ih(t);return dt(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return dt(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return dt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return dt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Ne.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return dt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=q1(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):dt(i,e.length)},I:function(t,e,n){var r=W1(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):dt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ne.d(t,e)},D:function(t,e,n){var r=z1(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):dt(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return dt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return dt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return dt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),i;switch(r===12?i=_n.noon:r===0?i=_n.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),i;switch(r>=17?i=_n.evening:r>=12?i=_n.afternoon:r>=4?i=_n.morning:i=_n.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ne.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ne.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):dt(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):dt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ne.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ne.s(t,e)},S:function(t,e){return Ne.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ul(s);case"XXXX":case"XX":return Je(s);case"XXXXX":case"XXX":default:return Je(s,":")}},x:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"x":return Ul(s);case"xxxx":case"xx":return Je(s);case"xxxxx":case"xxx":default:return Je(s,":")}},O:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Nl(s,":");case"OOOO":default:return"GMT"+Je(s,":")}},z:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Nl(s,":");case"zzzz":default:return"GMT"+Je(s,":")}},t:function(t,e,n,r){var i=r._originalDate||t,s=Math.floor(i.getTime()/1e3);return dt(s,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,s=i.getTime();return dt(s,e.length)}};function Nl(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+dt(s,2)}function Ul(t,e){if(t%60===0){var n=t>0?"-":"+";return n+dt(Math.abs(t)/60,2)}return Je(t,e)}function Je(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=dt(Math.floor(i/60),2),o=dt(i%60,2);return r+s+n+o}const Q1=K1;var Bl=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Nh=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},J1=function(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Bl(t,e);var s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Bl(r,e)).replace("{{time}}",Nh(i,e))},tb={p:Nh,P:J1};const eb=tb;var nb=["D","DD"],rb=["YY","YYYY"];function ib(t){return nb.indexOf(t)!==-1}function sb(t){return rb.indexOf(t)!==-1}function Hl(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ob={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ab=function(t,e,n){var r,i=ob[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const lb=ab;var cb={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ub={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hb={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fb={date:Os({formats:cb,defaultWidth:"full"}),time:Os({formats:ub,defaultWidth:"full"}),dateTime:Os({formats:hb,defaultWidth:"full"})};const db=fb;var pb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mb=function(t,e,n,r){return pb[t]};const gb=mb;var vb={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_b={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tb=function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ob={ordinalNumber:Tb,era:Qn({values:vb,defaultWidth:"wide"}),quarter:Qn({values:yb,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Qn({values:bb,defaultWidth:"wide"}),day:Qn({values:_b,defaultWidth:"wide"}),dayPeriod:Qn({values:wb,defaultWidth:"wide",formattingValues:xb,defaultFormattingWidth:"wide"})};const Sb=Ob;var Eb=/^(\d+)(th|st|nd|rd)?/i,$b=/\d+/i,Mb={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ab={any:[/^b/i,/^(a|c)/i]},Cb={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kb={any:[/1/i,/2/i,/3/i,/4/i]},Db={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Lb={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rb={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ib={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pb={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nb={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ub={ordinalNumber:N1({matchPattern:Eb,parsePattern:$b,valueCallback:function(t){return parseInt(t,10)}}),era:Jn({matchPatterns:Mb,defaultMatchWidth:"wide",parsePatterns:Ab,defaultParseWidth:"any"}),quarter:Jn({matchPatterns:Cb,defaultMatchWidth:"wide",parsePatterns:kb,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Jn({matchPatterns:Db,defaultMatchWidth:"wide",parsePatterns:Lb,defaultParseWidth:"any"}),day:Jn({matchPatterns:Rb,defaultMatchWidth:"wide",parsePatterns:Ib,defaultParseWidth:"any"}),dayPeriod:Jn({matchPatterns:Pb,defaultMatchWidth:"any",parsePatterns:Nb,defaultParseWidth:"any"})};const Bb=Ub;var Hb={code:"en-US",formatDistance:lb,formatLong:db,formatRelative:gb,localize:Sb,match:Bb,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Uh=Hb;var Fb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zb=/^'([^]*?)'?$/,Gb=/''/g,jb=/[a-zA-Z]/;function Hn(t,e,n){var r,i,s,o,a,l,c,u,h,f,d,p,y,m,g,_,T,O;Q(2,arguments);var w=String(e),x=Xi(),b=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:x.locale)!==null&&r!==void 0?r:Uh,E=Ct((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&o!==void 0?o:(h=x.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=Ct((d=(p=(y=(m=n==null?void 0:n.weekStartsOn)!==null&&m!==void 0?m:n==null||(g=n.locale)===null||g===void 0||(_=g.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&y!==void 0?y:x.weekStartsOn)!==null&&p!==void 0?p:(T=x.locale)===null||T===void 0||(O=T.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&d!==void 0?d:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw new RangeError("locale must contain localize property");if(!b.formatLong)throw new RangeError("locale must contain formatLong property");var k=ct(t);if(!H1(k))throw new RangeError("Invalid time value");var R=Qs(k),V=F1(k,R),I={firstWeekContainsDate:E,weekStartsOn:L,locale:b,_originalDate:k},N=w.match(Vb).map(function(et){var K=et[0];if(K==="p"||K==="P"){var A=eb[K];return A(et,b.formatLong)}return et}).join("").match(Fb).map(function(et){if(et==="''")return"'";var K=et[0];if(K==="'")return Wb(et);var A=Q1[K];if(A)return!(n!=null&&n.useAdditionalWeekYearTokens)&&sb(et)&&Hl(et,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&ib(et)&&Hl(et,e,String(t)),A(V,et,b.localize,I);if(K.match(jb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return et}).join("");return N}function Wb(t){var e=t.match(zb);return e?e[1].replace(Gb,"'"):t}var Yb=typeof global=="object"&&global&&global.Object===Object&&global;const Bh=Yb;var Xb=typeof self=="object"&&self&&self.Object===Object&&self,qb=Bh||Xb||Function("return this")();const me=qb;var Zb=me.Symbol;const ae=Zb;var Hh=Object.prototype,Kb=Hh.hasOwnProperty,Qb=Hh.toString,tr=ae?ae.toStringTag:void 0;function Jb(t){var e=Kb.call(t,tr),n=t[tr];try{t[tr]=void 0;var r=!0}catch{}var i=Qb.call(t);return r&&(e?t[tr]=n:delete t[tr]),i}var t_=Object.prototype,e_=t_.toString;function n_(t){return e_.call(t)}var r_="[object Null]",i_="[object Undefined]",Fl=ae?ae.toStringTag:void 0;function pn(t){return t==null?t===void 0?i_:r_:Fl&&Fl in Object(t)?Jb(t):n_(t)}function _e(t){return t!=null&&typeof t=="object"}var s_="[object Symbol]";function qi(t){return typeof t=="symbol"||_e(t)&&pn(t)==s_}function o_(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var a_=Array.isArray;const Ft=a_;var l_=1/0,Vl=ae?ae.prototype:void 0,zl=Vl?Vl.toString:void 0;function Fh(t){if(typeof t=="string")return t;if(Ft(t))return o_(t,Fh)+"";if(qi(t))return zl?zl.call(t):"";var e=t+"";return e=="0"&&1/t==-l_?"-0":e}function le(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function la(t){return t}var c_="[object AsyncFunction]",u_="[object Function]",h_="[object GeneratorFunction]",f_="[object Proxy]";function ca(t){if(!le(t))return!1;var e=pn(t);return e==u_||e==h_||e==c_||e==f_}var d_=me["__core-js_shared__"];const Ss=d_;var Gl=function(){var t=/[^.]+$/.exec(Ss&&Ss.keys&&Ss.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function p_(t){return!!Gl&&Gl in t}var m_=Function.prototype,g_=m_.toString;function mn(t){if(t!=null){try{return g_.call(t)}catch{}try{return t+""}catch{}}return""}var v_=/[\\^$.*+?()[\]{}|]/g,y_=/^\[object .+?Constructor\]$/,b_=Function.prototype,__=Object.prototype,w_=b_.toString,x_=__.hasOwnProperty,T_=RegExp("^"+w_.call(x_).replace(v_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O_(t){if(!le(t)||p_(t))return!1;var e=ca(t)?T_:y_;return e.test(mn(t))}function S_(t,e){return t==null?void 0:t[e]}function gn(t,e){var n=S_(t,e);return O_(n)?n:void 0}var E_=gn(me,"WeakMap");const Js=E_;var jl=Object.create,$_=function(){function t(){}return function(e){if(!le(e))return{};if(jl)return jl(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const M_=$_;function A_(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function C_(){}function Vh(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var k_=800,D_=16,L_=Date.now;function R_(t){var e=0,n=0;return function(){var r=L_(),i=D_-(r-n);if(n=r,i>0){if(++e>=k_)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function I_(t){return function(){return t}}var P_=function(){try{var t=gn(Object,"defineProperty");return t({},"",{}),t}catch{}}();const $i=P_;var N_=$i?function(t,e){return $i(t,"toString",{configurable:!0,enumerable:!1,value:I_(e),writable:!0})}:la;const U_=N_;var B_=R_(U_);const H_=B_;function F_(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function V_(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function z_(t){return t!==t}function G_(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function j_(t,e,n){return e===e?G_(t,e,n):V_(t,z_,n)}function W_(t,e){var n=t==null?0:t.length;return!!n&&j_(t,e,0)>-1}var Y_=9007199254740991,X_=/^(?:0|[1-9]\d*)$/;function ua(t,e){var n=typeof t;return e=e??Y_,!!e&&(n=="number"||n!="symbol"&&X_.test(t))&&t>-1&&t%1==0&&t<e}function Zi(t,e,n){e=="__proto__"&&$i?$i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ar(t,e){return t===e||t!==t&&e!==e}var q_=Object.prototype,Z_=q_.hasOwnProperty;function zh(t,e,n){var r=t[e];(!(Z_.call(t,e)&&Ar(r,n))||n===void 0&&!(e in t))&&Zi(t,e,n)}function Cr(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?Zi(n,a,l):zh(n,a,l)}return n}var Wl=Math.max;function K_(t,e,n){return e=Wl(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Wl(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),A_(t,this,a)}}function Gh(t,e){return H_(K_(t,e,la),t+"")}var Q_=9007199254740991;function ha(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Q_}function Wn(t){return t!=null&&ha(t.length)&&!ca(t)}function jh(t,e,n){if(!le(n))return!1;var r=typeof e;return(r=="number"?Wn(n)&&ua(e,n.length):r=="string"&&e in n)?Ar(n[e],t):!1}function J_(t){return Gh(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&jh(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var tw=Object.prototype;function Ki(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||tw;return t===n}function ew(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var nw="[object Arguments]";function Yl(t){return _e(t)&&pn(t)==nw}var Wh=Object.prototype,rw=Wh.hasOwnProperty,iw=Wh.propertyIsEnumerable,sw=Yl(function(){return arguments}())?Yl:function(t){return _e(t)&&rw.call(t,"callee")&&!iw.call(t,"callee")};const Fn=sw;function ow(){return!1}var Yh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xl=Yh&&typeof module=="object"&&module&&!module.nodeType&&module,aw=Xl&&Xl.exports===Yh,ql=aw?me.Buffer:void 0,lw=ql?ql.isBuffer:void 0,cw=lw||ow;const Vn=cw;var uw="[object Arguments]",hw="[object Array]",fw="[object Boolean]",dw="[object Date]",pw="[object Error]",mw="[object Function]",gw="[object Map]",vw="[object Number]",yw="[object Object]",bw="[object RegExp]",_w="[object Set]",ww="[object String]",xw="[object WeakMap]",Tw="[object ArrayBuffer]",Ow="[object DataView]",Sw="[object Float32Array]",Ew="[object Float64Array]",$w="[object Int8Array]",Mw="[object Int16Array]",Aw="[object Int32Array]",Cw="[object Uint8Array]",kw="[object Uint8ClampedArray]",Dw="[object Uint16Array]",Lw="[object Uint32Array]",bt={};bt[Sw]=bt[Ew]=bt[$w]=bt[Mw]=bt[Aw]=bt[Cw]=bt[kw]=bt[Dw]=bt[Lw]=!0;bt[uw]=bt[hw]=bt[Tw]=bt[fw]=bt[Ow]=bt[dw]=bt[pw]=bt[mw]=bt[gw]=bt[vw]=bt[yw]=bt[bw]=bt[_w]=bt[ww]=bt[xw]=!1;function Rw(t){return _e(t)&&ha(t.length)&&!!bt[pn(t)]}function fa(t){return function(e){return t(e)}}var Xh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lr=Xh&&typeof module=="object"&&module&&!module.nodeType&&module,Iw=lr&&lr.exports===Xh,Es=Iw&&Bh.process,Pw=function(){try{var t=lr&&lr.require&&lr.require("util").types;return t||Es&&Es.binding&&Es.binding("util")}catch{}}();const zn=Pw;var Zl=zn&&zn.isTypedArray,Nw=Zl?fa(Zl):Rw;const Qi=Nw;var Uw=Object.prototype,Bw=Uw.hasOwnProperty;function qh(t,e){var n=Ft(t),r=!n&&Fn(t),i=!n&&!r&&Vn(t),s=!n&&!r&&!i&&Qi(t),o=n||r||i||s,a=o?ew(t.length,String):[],l=a.length;for(var c in t)(e||Bw.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ua(c,l)))&&a.push(c);return a}function Zh(t,e){return function(n){return t(e(n))}}var Hw=Zh(Object.keys,Object);const Fw=Hw;var Vw=Object.prototype,zw=Vw.hasOwnProperty;function Kh(t){if(!Ki(t))return Fw(t);var e=[];for(var n in Object(t))zw.call(t,n)&&n!="constructor"&&e.push(n);return e}function kr(t){return Wn(t)?qh(t):Kh(t)}function Gw(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var jw=Object.prototype,Ww=jw.hasOwnProperty;function Yw(t){if(!le(t))return Gw(t);var e=Ki(t),n=[];for(var r in t)r=="constructor"&&(e||!Ww.call(t,r))||n.push(r);return n}function Dr(t){return Wn(t)?qh(t,!0):Yw(t)}var Xw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qw=/^\w*$/;function da(t,e){if(Ft(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||qi(t)?!0:qw.test(t)||!Xw.test(t)||e!=null&&t in Object(e)}var Zw=gn(Object,"create");const yr=Zw;function Kw(){this.__data__=yr?yr(null):{},this.size=0}function Qw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Jw="__lodash_hash_undefined__",tx=Object.prototype,ex=tx.hasOwnProperty;function nx(t){var e=this.__data__;if(yr){var n=e[t];return n===Jw?void 0:n}return ex.call(e,t)?e[t]:void 0}var rx=Object.prototype,ix=rx.hasOwnProperty;function sx(t){var e=this.__data__;return yr?e[t]!==void 0:ix.call(e,t)}var ox="__lodash_hash_undefined__";function ax(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yr&&e===void 0?ox:e,this}function un(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}un.prototype.clear=Kw;un.prototype.delete=Qw;un.prototype.get=nx;un.prototype.has=sx;un.prototype.set=ax;function lx(){this.__data__=[],this.size=0}function Ji(t,e){for(var n=t.length;n--;)if(Ar(t[n][0],e))return n;return-1}var cx=Array.prototype,ux=cx.splice;function hx(t){var e=this.__data__,n=Ji(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ux.call(e,n,1),--this.size,!0}function fx(t){var e=this.__data__,n=Ji(e,t);return n<0?void 0:e[n][1]}function dx(t){return Ji(this.__data__,t)>-1}function px(t,e){var n=this.__data__,r=Ji(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Le(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Le.prototype.clear=lx;Le.prototype.delete=hx;Le.prototype.get=fx;Le.prototype.has=dx;Le.prototype.set=px;var mx=gn(me,"Map");const br=mx;function gx(){this.size=0,this.__data__={hash:new un,map:new(br||Le),string:new un}}function vx(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ts(t,e){var n=t.__data__;return vx(e)?n[typeof e=="string"?"string":"hash"]:n.map}function yx(t){var e=ts(this,t).delete(t);return this.size-=e?1:0,e}function bx(t){return ts(this,t).get(t)}function _x(t){return ts(this,t).has(t)}function wx(t,e){var n=ts(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Re(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Re.prototype.clear=gx;Re.prototype.delete=yx;Re.prototype.get=bx;Re.prototype.has=_x;Re.prototype.set=wx;var xx="Expected a function";function pa(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(xx);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(pa.Cache||Re),n}pa.Cache=Re;var Tx=500;function Ox(t){var e=pa(t,function(r){return n.size===Tx&&n.clear(),r}),n=e.cache;return e}var Sx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ex=/\\(\\)?/g,$x=Ox(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Sx,function(n,r,i,s){e.push(i?s.replace(Ex,"$1"):r||n)}),e});const Mx=$x;function Ax(t){return t==null?"":Fh(t)}function Qh(t,e){return Ft(t)?t:da(t,e)?[t]:Mx(Ax(t))}var Cx=1/0;function es(t){if(typeof t=="string"||qi(t))return t;var e=t+"";return e=="0"&&1/t==-Cx?"-0":e}function Jh(t,e){e=Qh(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[es(e[n++])];return n&&n==r?t:void 0}function ma(t,e,n){var r=t==null?void 0:Jh(t,e);return r===void 0?n:r}function ga(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Kl=ae?ae.isConcatSpreadable:void 0;function kx(t){return Ft(t)||Fn(t)||!!(Kl&&t&&t[Kl])}function va(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=kx),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?va(a,e-1,n,r,i):ga(i,a):r||(i[i.length]=a)}return i}var Dx=Zh(Object.getPrototypeOf,Object);const ya=Dx;var Lx="[object Object]",Rx=Function.prototype,Ix=Object.prototype,tf=Rx.toString,Px=Ix.hasOwnProperty,Nx=tf.call(Object);function Ux(t){if(!_e(t)||pn(t)!=Lx)return!1;var e=ya(t);if(e===null)return!0;var n=Px.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&tf.call(n)==Nx}function Bx(){this.__data__=new Le,this.size=0}function Hx(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Fx(t){return this.__data__.get(t)}function Vx(t){return this.__data__.has(t)}var zx=200;function Gx(t,e){var n=this.__data__;if(n instanceof Le){var r=n.__data__;if(!br||r.length<zx-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Re(r)}return n.set(t,e),this.size=n.size,this}function fe(t){var e=this.__data__=new Le(t);this.size=e.size}fe.prototype.clear=Bx;fe.prototype.delete=Hx;fe.prototype.get=Fx;fe.prototype.has=Vx;fe.prototype.set=Gx;function jx(t,e){return t&&Cr(e,kr(e),t)}function Wx(t,e){return t&&Cr(e,Dr(e),t)}var ef=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ql=ef&&typeof module=="object"&&module&&!module.nodeType&&module,Yx=Ql&&Ql.exports===ef,Jl=Yx?me.Buffer:void 0,tc=Jl?Jl.allocUnsafe:void 0;function nf(t,e){if(e)return t.slice();var n=t.length,r=tc?tc(n):new t.constructor(n);return t.copy(r),r}function Xx(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function rf(){return[]}var qx=Object.prototype,Zx=qx.propertyIsEnumerable,ec=Object.getOwnPropertySymbols,Kx=ec?function(t){return t==null?[]:(t=Object(t),Xx(ec(t),function(e){return Zx.call(t,e)}))}:rf;const ba=Kx;function Qx(t,e){return Cr(t,ba(t),e)}var Jx=Object.getOwnPropertySymbols,tT=Jx?function(t){for(var e=[];t;)ga(e,ba(t)),t=ya(t);return e}:rf;const sf=tT;function eT(t,e){return Cr(t,sf(t),e)}function of(t,e,n){var r=e(t);return Ft(t)?r:ga(r,n(t))}function to(t){return of(t,kr,ba)}function nT(t){return of(t,Dr,sf)}var rT=gn(me,"DataView");const eo=rT;var iT=gn(me,"Promise");const no=iT;var sT=gn(me,"Set");const Mn=sT;var nc="[object Map]",oT="[object Object]",rc="[object Promise]",ic="[object Set]",sc="[object WeakMap]",oc="[object DataView]",aT=mn(eo),lT=mn(br),cT=mn(no),uT=mn(Mn),hT=mn(Js),tn=pn;(eo&&tn(new eo(new ArrayBuffer(1)))!=oc||br&&tn(new br)!=nc||no&&tn(no.resolve())!=rc||Mn&&tn(new Mn)!=ic||Js&&tn(new Js)!=sc)&&(tn=function(t){var e=pn(t),n=e==oT?t.constructor:void 0,r=n?mn(n):"";if(r)switch(r){case aT:return oc;case lT:return nc;case cT:return rc;case uT:return ic;case hT:return sc}return e});const Gn=tn;var fT=Object.prototype,dT=fT.hasOwnProperty;function pT(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&dT.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var mT=me.Uint8Array;const Mi=mT;function _a(t){var e=new t.constructor(t.byteLength);return new Mi(e).set(new Mi(t)),e}function gT(t,e){var n=e?_a(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var vT=/\w*$/;function yT(t){var e=new t.constructor(t.source,vT.exec(t));return e.lastIndex=t.lastIndex,e}var ac=ae?ae.prototype:void 0,lc=ac?ac.valueOf:void 0;function bT(t){return lc?Object(lc.call(t)):{}}function af(t,e){var n=e?_a(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var _T="[object Boolean]",wT="[object Date]",xT="[object Map]",TT="[object Number]",OT="[object RegExp]",ST="[object Set]",ET="[object String]",$T="[object Symbol]",MT="[object ArrayBuffer]",AT="[object DataView]",CT="[object Float32Array]",kT="[object Float64Array]",DT="[object Int8Array]",LT="[object Int16Array]",RT="[object Int32Array]",IT="[object Uint8Array]",PT="[object Uint8ClampedArray]",NT="[object Uint16Array]",UT="[object Uint32Array]";function BT(t,e,n){var r=t.constructor;switch(e){case MT:return _a(t);case _T:case wT:return new r(+t);case AT:return gT(t,n);case CT:case kT:case DT:case LT:case RT:case IT:case PT:case NT:case UT:return af(t,n);case xT:return new r;case TT:case ET:return new r(t);case OT:return yT(t);case ST:return new r;case $T:return bT(t)}}function lf(t){return typeof t.constructor=="function"&&!Ki(t)?M_(ya(t)):{}}var HT="[object Map]";function FT(t){return _e(t)&&Gn(t)==HT}var cc=zn&&zn.isMap,VT=cc?fa(cc):FT;const zT=VT;var GT="[object Set]";function jT(t){return _e(t)&&Gn(t)==GT}var uc=zn&&zn.isSet,WT=uc?fa(uc):jT;const YT=WT;var XT=1,qT=2,ZT=4,cf="[object Arguments]",KT="[object Array]",QT="[object Boolean]",JT="[object Date]",tO="[object Error]",uf="[object Function]",eO="[object GeneratorFunction]",nO="[object Map]",rO="[object Number]",hf="[object Object]",iO="[object RegExp]",sO="[object Set]",oO="[object String]",aO="[object Symbol]",lO="[object WeakMap]",cO="[object ArrayBuffer]",uO="[object DataView]",hO="[object Float32Array]",fO="[object Float64Array]",dO="[object Int8Array]",pO="[object Int16Array]",mO="[object Int32Array]",gO="[object Uint8Array]",vO="[object Uint8ClampedArray]",yO="[object Uint16Array]",bO="[object Uint32Array]",gt={};gt[cf]=gt[KT]=gt[cO]=gt[uO]=gt[QT]=gt[JT]=gt[hO]=gt[fO]=gt[dO]=gt[pO]=gt[mO]=gt[nO]=gt[rO]=gt[hf]=gt[iO]=gt[sO]=gt[oO]=gt[aO]=gt[gO]=gt[vO]=gt[yO]=gt[bO]=!0;gt[tO]=gt[uf]=gt[lO]=!1;function Qr(t,e,n,r,i,s){var o,a=e&XT,l=e&qT,c=e&ZT;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!le(t))return t;var u=Ft(t);if(u){if(o=pT(t),!a)return Vh(t,o)}else{var h=Gn(t),f=h==uf||h==eO;if(Vn(t))return nf(t,a);if(h==hf||h==cf||f&&!i){if(o=l||f?{}:lf(t),!a)return l?eT(t,Wx(o,t)):Qx(t,jx(o,t))}else{if(!gt[h])return i?t:{};o=BT(t,h,a)}}s||(s=new fe);var d=s.get(t);if(d)return d;s.set(t,o),YT(t)?t.forEach(function(m){o.add(Qr(m,e,n,m,t,s))}):zT(t)&&t.forEach(function(m,g){o.set(g,Qr(m,e,n,g,t,s))});var p=c?l?nT:to:l?Dr:kr,y=u?void 0:p(t);return F_(y||t,function(m,g){y&&(g=m,m=t[g]),zh(o,g,Qr(m,e,n,g,t,s))}),o}var _O=1,wO=4;function ns(t){return Qr(t,_O|wO)}var xO="__lodash_hash_undefined__";function TO(t){return this.__data__.set(t,xO),this}function OO(t){return this.__data__.has(t)}function _r(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Re;++e<n;)this.add(t[e])}_r.prototype.add=_r.prototype.push=TO;_r.prototype.has=OO;function ff(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function df(t,e){return t.has(e)}var SO=1,EO=2;function pf(t,e,n,r,i,s){var o=n&SO,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=n&EO?new _r:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var p=t[h],y=e[h];if(r)var m=o?r(y,p,h,e,t,s):r(p,y,h,t,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!ff(e,function(g,_){if(!df(d,_)&&(p===g||i(p,g,n,r,s)))return d.push(_)})){f=!1;break}}else if(!(p===y||i(p,y,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function $O(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function wa(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var MO=1,AO=2,CO="[object Boolean]",kO="[object Date]",DO="[object Error]",LO="[object Map]",RO="[object Number]",IO="[object RegExp]",PO="[object Set]",NO="[object String]",UO="[object Symbol]",BO="[object ArrayBuffer]",HO="[object DataView]",hc=ae?ae.prototype:void 0,$s=hc?hc.valueOf:void 0;function FO(t,e,n,r,i,s,o){switch(n){case HO:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case BO:return!(t.byteLength!=e.byteLength||!s(new Mi(t),new Mi(e)));case CO:case kO:case RO:return Ar(+t,+e);case DO:return t.name==e.name&&t.message==e.message;case IO:case NO:return t==e+"";case LO:var a=$O;case PO:var l=r&MO;if(a||(a=wa),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=AO,o.set(t,e);var u=pf(a(t),a(e),r,i,s,o);return o.delete(t),u;case UO:if($s)return $s.call(t)==$s.call(e)}return!1}var VO=1,zO=Object.prototype,GO=zO.hasOwnProperty;function jO(t,e,n,r,i,s){var o=n&VO,a=to(t),l=a.length,c=to(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:GO.call(e,f)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var y=!0;s.set(t,e),s.set(e,t);for(var m=o;++h<l;){f=a[h];var g=t[f],_=e[f];if(r)var T=o?r(_,g,f,e,t,s):r(g,_,f,t,e,s);if(!(T===void 0?g===_||i(g,_,n,r,s):T)){y=!1;break}m||(m=f=="constructor")}if(y&&!m){var O=t.constructor,w=e.constructor;O!=w&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof w=="function"&&w instanceof w)&&(y=!1)}return s.delete(t),s.delete(e),y}var WO=1,fc="[object Arguments]",dc="[object Array]",Br="[object Object]",YO=Object.prototype,pc=YO.hasOwnProperty;function XO(t,e,n,r,i,s){var o=Ft(t),a=Ft(e),l=o?dc:Gn(t),c=a?dc:Gn(e);l=l==fc?Br:l,c=c==fc?Br:c;var u=l==Br,h=c==Br,f=l==c;if(f&&Vn(t)){if(!Vn(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new fe),o||Qi(t)?pf(t,e,n,r,i,s):FO(t,e,l,n,r,i,s);if(!(n&WO)){var d=u&&pc.call(t,"__wrapped__"),p=h&&pc.call(e,"__wrapped__");if(d||p){var y=d?t.value():t,m=p?e.value():e;return s||(s=new fe),i(y,m,n,r,s)}}return f?(s||(s=new fe),jO(t,e,n,r,i,s)):!1}function rs(t,e,n,r,i){return t===e?!0:t==null||e==null||!_e(t)&&!_e(e)?t!==t&&e!==e:XO(t,e,n,r,rs,i)}var qO=1,ZO=2;function KO(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new fe;if(r)var f=r(c,u,l,t,e,h);if(!(f===void 0?rs(u,c,qO|ZO,r,h):f))return!1}}return!0}function mf(t){return t===t&&!le(t)}function QO(t){for(var e=kr(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,mf(i)]}return e}function gf(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function JO(t){var e=QO(t);return e.length==1&&e[0][2]?gf(e[0][0],e[0][1]):function(n){return n===t||KO(n,t,e)}}function tS(t,e){return t!=null&&e in Object(t)}function eS(t,e,n){e=Qh(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=es(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&ha(i)&&ua(o,i)&&(Ft(t)||Fn(t)))}function nS(t,e){return t!=null&&eS(t,e,tS)}var rS=1,iS=2;function sS(t,e){return da(t)&&mf(e)?gf(es(t),e):function(n){var r=ma(n,t);return r===void 0&&r===e?nS(n,t):rs(e,r,rS|iS)}}function oS(t){return function(e){return e==null?void 0:e[t]}}function aS(t){return function(e){return Jh(e,t)}}function lS(t){return da(t)?oS(es(t)):aS(t)}function xa(t){return typeof t=="function"?t:t==null?la:typeof t=="object"?Ft(t)?sS(t[0],t[1]):JO(t):lS(t)}function cS(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var uS=cS();const vf=uS;function ro(t,e,n){(n!==void 0&&!Ar(t[e],n)||n===void 0&&!(e in t))&&Zi(t,e,n)}function io(t){return _e(t)&&Wn(t)}function so(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function hS(t){return Cr(t,Dr(t))}function fS(t,e,n,r,i,s,o){var a=so(t,n),l=so(e,n),c=o.get(l);if(c){ro(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var f=Ft(l),d=!f&&Vn(l),p=!f&&!d&&Qi(l);u=l,f||d||p?Ft(a)?u=a:io(a)?u=Vh(a):d?(h=!1,u=nf(l,!0)):p?(h=!1,u=af(l,!0)):u=[]:Ux(l)||Fn(l)?(u=a,Fn(a)?u=hS(a):(!le(a)||ca(a))&&(u=lf(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),ro(t,n,u)}function yf(t,e,n,r,i){t!==e&&vf(e,function(s,o){if(i||(i=new fe),le(s))fS(t,e,o,n,yf,r,i);else{var a=r?r(so(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),ro(t,o,a)}},Dr)}function dS(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pS(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var mS="[object Map]",gS="[object Set]",vS=Object.prototype,yS=vS.hasOwnProperty;function bS(t){if(t==null)return!0;if(Wn(t)&&(Ft(t)||typeof t=="string"||typeof t.splice=="function"||Vn(t)||Qi(t)||Fn(t)))return!t.length;var e=Gn(t);if(e==mS||e==gS)return!t.size;if(Ki(t))return!Kh(t).length;for(var n in t)if(yS.call(t,n))return!1;return!0}var _S=J_(function(t,e,n){yf(t,e,n)});const tt=_S;var wS=1/0,xS=Mn&&1/wa(new Mn([,-0]))[1]==wS?function(t){return new Mn(t)}:C_;const TS=xS;var OS=200;function bf(t,e,n){var r=-1,i=W_,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=dS;else if(s>=OS){var c=e?null:TS(t);if(c)return wa(c);o=!1,i=df,l=new _r}else l=e?[]:a;t:for(;++r<s;){var u=t[r],h=e?e(u):u;if(u=n||u!==0?u:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}var SS=Gh(function(t){var e=pS(t);return io(e)&&(e=void 0),bf(va(t,1,io,!0),xa(e))});const ES=SS;function wr(t){return t&&t.length?bf(t):[]}const Yt="cds",Se={opacity:{unselected:.05,selected:.4}},Ve={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},mc={duration:1e3,ease:sh,zoomLevel:3},$S={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},MS={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},AS={defaultBins:10},It={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},Ms={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},vt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},gc={default:{size:24}},CS={horizontalOffset:10},vc={default:{duration:300},pie_slice_mouseover:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},Jt={height:{[ye.GRAPH_VIEW]:32,[ye.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},kS=[{type:Dt.RADIUS,name:"Radius"},{type:Dt.AREA,name:"Poor area"},{type:Dt.AREA,name:"Satisfactory area"},{type:Dt.AREA,name:"Great area"},{type:Dt.QUARTILE,name:"Quartiles"}],Sn={type:he.END_LINE,threshold:16,numCharacter:14},DS={enabled:!0,position:ar.BOTTOM,clickable:!0,truncation:Sn,alignment:ee.LEFT,order:null,additionalItems:[]},LS={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},RS={enabled:!0},_f={enabled:!0,showTotal:!0,truncation:Sn,groupLabel:"Group"},wf={top:{visible:!0,includeZero:!0,truncation:Sn},bottom:{visible:!0,includeZero:!0,truncation:Sn},left:{visible:!0,includeZero:!0,truncation:Sn},right:{visible:!0,includeZero:!0,truncation:Sn}},is={addSpaceOnEdges:1,showDayName:!1,localeObject:Uh,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},IS=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),Vt={width:null,height:null,resizable:!0,theme:Su.WHITE,tooltip:_f,legend:DS,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:xt.SHOW_AS_DATATABLE},...IS?[{type:xt.MAKE_FULLSCREEN}]:[],{type:xt.EXPORT_CSV},{type:xt.EXPORT_PNG},{type:xt.EXPORT_JPG}]}},xf=tt({},Vt,{thematic:{projection:Au.geoNaturalEarth1}}),Lr=tt({},Vt,{axes:wf,timeScale:is,grid:LS,ruler:RS,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:ye.GRAPH_VIEW}}}),hn=tt({},Lr,{bars:{maxWidth:16,spacingFactor:.25},timeScale:tt(is,{addSpaceOnEdges:1})}),PS=tt({},hn,{}),NS=tt({},hn,{}),US=tt({},hn,{bars:tt({},hn.bars,{dividerSize:1.5})}),BS=tt({},hn,{}),Ta=tt({},Lr,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),HS=Ta,Tf=tt({},Ta,{points:{radius:3,filled:!1,enabled:!0}}),Of=tt({},Tf,{timeScale:tt(is,{addSpaceOnEdges:0})}),FS=Of,VS=tt({},Lr,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Dt.RADIUS,name:"Radius"}]}}),zS=tt({},Lr,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Dt.AREA,name:"Poor area"},{type:Dt.AREA,name:"Satisfactory area"},{type:Dt.AREA,name:"Great area"},{type:Dt.QUARTILE,name:"Quartiles"}]}}),GS=tt({},hn,{bars:{dividerSize:1.5},timeScale:tt(is,{addSpaceOnEdges:0})}),jS=tt({},Vt,{tooltip:tt({},_f,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),Sf=tt({},Vt,{pie:{labels:{formatter:null,enabled:!0},alignment:ee.LEFT,sortFunction:null,valueMapsTo:"value"}}),WS=tt({},Vt,{legend:{enabled:!1},gauge:{type:$u.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,numberFormatter:t=>Number(t.toFixed(2))%1!==0?t.toFixed(2).toLocaleString():t.toFixed().toLocaleString(),alignment:ee.LEFT}}),YS=tt({},Sf,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20),numberFormatter:t=>Math.floor(t).toLocaleString()},alignment:ee.LEFT}}),Ef=tt({},Vt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),XS=tt({},Ef,{legend:{enabled:!0}}),qS=tt({},Vt,{radar:{axes:{angle:"key",value:"value"},alignment:ee.LEFT},tooltip:{gridline:{enabled:!0},valueFormatter:t=>t??"N/A"}}),ZS=tt({},hn,{comboChartTypes:[]}),KS=tt({tree:{type:Eu.TREE}},Vt,{}),QS=tt({},Vt,{data:tt(Vt.data,{groupMapsTo:"name"})}),JS=tt({},Vt,$S,{data:tt(Vt.data,{groupMapsTo:"name"})}),tE=tt({},Vt,{alluvial:{data:tt(Vt.data,{groupMapsTo:"source"}),nodeAlignment:ee.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),eE=tt({},Vt,{axes:wf,heatmap:{divider:{state:Mu.AUTO},colorLegend:{type:"linear"}}}),nE=tt({},xf,{choropleth:{colorLegend:{type:"linear"}}}),Oa={alluvialChart:tE,areaChart:Of,axisChart:Lr,boxplotChart:BS,bubbleChart:VS,bulletChart:zS,chart:Vt,circlePackChart:JS,choroplethChart:nE,comboChart:ZS,donutChart:YS,gaugeChart:WS,groupedBarChart:NS,heatmapChart:eE,histogramChart:GS,lineChart:Tf,lollipopChart:HS,meterChart:Ef,pieChart:Sf,proportionalMeterChart:XS,radarChart:qS,scatterChart:Ta,simpleBarChart:PS,stackedAreaChart:FS,stackedBarChart:US,thematicChart:xf,treeChart:KS,treemapChart:QS,wordCloudChart:jS};function rE(t,e,n){let r=null;return function(...i){const s=this;s.mousePosition=on(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(s,i)},e)}}function Sa(t,e){var n;const r=ns(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const s in r.axes)if(i.includes(s)){const o=e.axes[s];if((o.primary||o.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format"),o.mapsTo==null){const l=o.scaleType;l==null?o.mapsTo="value":l===B.TIME?o.mapsTo="date":l===B.LABELS&&(o.mapsTo="key")}}else delete r.axes[s];return $f(r,e),tt(r,e)}function Oe(t){if(!t)return;const e=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=t.getAttribute("transform").match(e);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function As(t,e,n="value",r=!1){const i=t/e.reduce((s,o)=>s+o[n],0)*100;return r?i:i%1!==0?parseFloat(i.toFixed(1)):i}function xr(t,e,n){if(n>t.length)return t;if(e===he.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===he.FRONT_LINE)return"..."+t.substr(-n);if(e===he.END_LINE)return t.substr(0,n)+"..."}function $f(t,e){const n=v(t,"legend","additionalItems"),r=v(e,"legend","additionalItems");if(n&&r){const i=r.map(a=>a.type),s=n.map(a=>a.type),o=kS.filter(a=>s.includes(a.type)&&!i.includes(a.type));t.legend.additionalItems=o,e.legend.additionalItems=ES(o,r,"name")}}const v=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Mf=(t,e)=>e===Kt.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,Ea=(t,e)=>{const{x0:n,x1:r,y0:i,y1:s}=Mf(t,e);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function An(t,e,n){return n===Kt.VERTICAL?[t,e]:[e,t]}var Af=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(Af||{});const Cs=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function Cf(t,e,n,r,i){const s=e===0,o=Number(Hn(new Date(t),"c"))===2,a=Number(Hn(new Date(t),"q"))===1,l=e!==0?n[e-1]:null;switch(r){case"15seconds":return s||Hr(t)||er(t,l)||Ue(t);case"minute":return s||Hr(t)||er(t,l)||Ue(t);case"30minutes":return s||Hr(t)||er(t,l)||Ue(t);case"hourly":return s||Hr(t)||er(t,l)||Ue(t);case"daily":return i?s||o||Ue(t):s||er(t,l)||Ue(t);case"weekly":return s||o||Ue(t);case"monthly":return s||Ue(t);case"quarterly":return s||a;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function oo(t,e,n,r,i){const s=i.showDayName,o=r==="daily"&&s?"weekly":r,a=new Date(t),l=v(i,"timeIntervalFormats")[o],c=v(l,"primary"),u=v(l,"secondary");let h=Cf(t,e,n,r,s)?c:u;r==="15seconds"&&a.getMilliseconds()!==0&&(h=h.replace("pp","h:mm:ss.SSS a"));const f=i.localeObject;return Hn(a,h,{locale:f})}function Ai(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function iE(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}function sE(t){const e=Cs.reduce((n,[,r],i)=>{const s=Cs[n][1],o=Math.abs(s-t),a=Math.abs(r-t);return o<a?n:i},0);return Cs[e][0]}function ao(t,e){if(Af[e])return e;if(t.length===1)return"15seconds";const n=iE(t),r=$p(n);return sE(r)}function Hr(t){const{s:e,m:n,H:r}=Ai(t);return r===0&&n===0&&e===0}function er(t,e){const n=Ai(t).M,r=Ai(e).M;return n!==r}function Ue(t){const{M:e,d:n,s:r,m:i,H:s}=Ai(t);return e===1&&n===1&&s===0&&i===0&&r===0}function yc(t){return t===void 0?"":t.toISOString()}var _t=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(_t||{});function oE(t,e){return t&&vf(t,e,kr)}function aE(t,e){return function(n,r){if(n==null)return n;if(!Wn(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var lE=aE(oE);const kf=lE;function cE(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function uE(t,e,n,r){return kf(t,function(i,s,o){e(r,i,n(i),o)}),r}function hE(t,e){return function(n,r){var i=Ft(n)?cE:uE,s=e?e():{};return i(n,t,xa(r),s)}}function fE(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var dE=Object.prototype,pE=dE.hasOwnProperty,mE=hE(function(t,e,n){pE.call(t,n)?t[n].push(e):Zi(t,n,[e])});const gE=mE;class $a{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:s}=v(n,"data"),o=v(n,"axes");return e&&(r=r.filter(a=>e.includes(a[s]))),o&&Object.keys(o).forEach(a=>{const l=o[a].mapsTo,c=o[a].scaleType;if((c===B.LINEAR||c===B.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&o[a].domain)if(c===B.LABELS)r=r.filter(u=>o[a].domain.includes(u[l]));else{const[u,h]=o[a].domain;r=r.filter(f=>!(l in f)||f[l]>=u&&f[l]<=h)}}),r.filter(a=>i.find(l=>l.name===a[s]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=It.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(s=>r.find(o=>o.name===s[i]&&o.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(ns(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return v(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=It.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return gE(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),s=n.axes[r],{groupMapsTo:o}=n.data,{bins:a=AS.defaultBins}=s,l=Array.isArray(a),c=Sp().value(d=>d[i]).thresholds(a)(e);if(l)c[c.length-1].x1=a[a.length-1];else{const d=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+d}const u=l?[a[0],a[a.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(d=>d[o]))),f=[];return c.forEach(d=>{const p=`${d.x0}-${d.x1}`,y=this.aggregateBinDataByGroup(d);h.forEach(m=>{f.push({group:m,key:p,value:y[m]||0,bin:d.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),s=this.getDataValuesGroupedByKeys({bins:i});return Ts().keys(r)(s).map((o,a)=>Object.keys(o).filter(l=>!isNaN(l)).map(l=>{const c=o[l];return c[n]=r[a],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(s=>{const o=s[i];r[o]!==null&&r[o]!==void 0?r[o].push(s):r[o]=[s]}),Object.keys(r).map(s=>({name:s,data:r[s]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let s;e?s=e.map(l=>`${l.x0}-${l.x1}`):s=wr(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?yc(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const o=this.services.cartesianScales.domainAxisPosition,a=r.axes[o].scaleType;return a===B.TIME?s.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(a===B.LOG||a===B.LINEAR)&&s.sort((l,c)=>l-c),s}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getDisplayData(n),o=this.getDataGroupNames(),a=this.getStackKeys({bins:e,groups:n});return e?a.map(l=>{const[c,u]=l.split("-"),h={x0:c,x1:u},f=e.find(d=>d.x0.toString()===c.toString());return o.forEach(d=>{h[d]=f.filter(p=>p[i]===d).length}),h}):a.map(l=>{const c={sharedStackKey:l};return o.forEach(u=>{const h=s.find(d=>{const p=this.services.cartesianScales.getDomainIdentifier(d);return d[i]===u&&Object.prototype.hasOwnProperty.call(d,p)&&(d[p]instanceof Date?yc(d[p])===l:d[p].toString()===l)}),f=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[f]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:s}=i.data,o=this.getActiveDataGroupNames(n),a=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=fE(a.map(c=>[c.sharedStackKey,0]));a.forEach(c=>{o.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),a.forEach(c=>{o.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?Ts().offset(R1):Ts()).keys(o)(a).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[s]=o[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();$f(n,e),this.set({options:tt(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(S.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=It.items.status,i=this.getDataGroups(),s=i.some(c=>c.status===r),o=i.filter(c=>c.status===n);if(s)if(o.length===1&&o[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const a=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=a.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(S.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const s=this.getOptions();return s.getIsFilled?s.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),s=v(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,s):s}getStrokeColor(e,n,r){const i=this.getOptions(),s=v(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,s):s}isUserProvidedColorScaleValid(){const e=v(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");const n=[],{datasets:r,labels:i}=e;return r.forEach(s=>{s.data.forEach((o,a)=>{let l;const c=v(s,"label");if(c===null){const h=v(i,a);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[a]};isNaN(o)?(u.value=o.value,u.date=o.date):u.value=o,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(a=>a.map(l=>`"${l==="&ndash;"?"":l}"`));let n="",r="";e.forEach(function(a,l){r=a.join(","),n+=l<e.length?r+`
`:r});const i=this.getOptions();let s="myChart";const o=v(i,"fileDownload","fileName");typeof o=="function"?s=o("csv"):typeof o=="string"&&(s=o),this.services.files.downloadCSV(n,`${s}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=It.items.status,s=this.getOptions(),o=wr(e.map(l=>l[n]));s.data.selectedGroups.length&&(s.data.selectedGroups.every(l=>o.includes(l))||(s.data.selectedGroups=[]));const a=l=>!s.data.selectedGroups.length||s.data.selectedGroups.includes(l)?r:i;return o.map(l=>({name:l,status:a(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=v(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=v(this.getOptions(),"color","pairing");let n=v(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=v(e,"option");const i=MS.pairingOptions,s=n>5?14:n,o=`${s}-color`;r=r<=i[o]?r:1;const a=this.allDataGroups.map((l,c)=>`${s}-${r}-${c%14+1}`);this.colorClassNames=Wo().range(a).domain(this.allDataGroups)}}class vE extends $a{constructor(e){super(e),this.axisFlavor=Ro.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(s=>{const o=i[s];e.scales[o]?i[s]={position:o,label:e.getScaleLabel(o),identifier:v(n,"axes",o,"mapsTo")}:i[s]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{cartesianScales:i}=this.services,{primaryDomain:s,primaryRange:o,secondaryDomain:a,secondaryRange:l}=this.assignRangeAndDomains(),c=i.getDomainAxisScaleType();let u;return c===B.TIME&&(u=h=>Hn(h,"MMM d, yyyy")),[["Group",s.label,o.label,...a?[a.label]:[],...l?[l.label]:[]],...e.map(h=>[h[r],h[s.identifier]===null?"&ndash;":u?u(h[s.identifier]):h[s.identifier],h[o.identifier]===null||isNaN(h[o.identifier])?"&ndash;":h[o.identifier].toLocaleString(),...a?[h[a.identifier]===null?"&ndash;":h[a.identifier]]:[],...l?[h[l.identifier]===null||isNaN(h[l.identifier])?"&ndash;":h[l.identifier]]:[]])]}setData(e){let n;if(e&&(n=super.setData(e),v(this.getOptions(),"zoomBar",$.TOP,"enabled"))){const r=v(this.getOptions(),"zoomBar",$.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(ns(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const s=i.getDomainIdentifier(),o=i.getRangeIdentifier();let a=n.map(l=>l[s].getTime());a=wr(a).sort(),r=a.map(l=>{let c=0;const u={};return n.forEach(h=>{h[s].getTime()===l&&(c+=h[o])}),u[s]=new Date(l),u[o]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys($).forEach(i=>{const s=$[i],o=n.axes[s];if(o&&o.scaleType===B.TIME){const a=o.mapsTo;(a!==null||a!==void 0)&&r.push(a)}}),r.length>0&&e.forEach(i=>{r.forEach(s=>{v(i,s,"getTime")===null&&(i[s]=new Date(i[s]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e),e}}let yE=class extends $a{constructor(e){super(e)}getTabularData(e){const n=super.getTabularData(e);return e!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data;return[["Group","Value"],...e.map(i=>[i[r],i.value===null?"&ndash;":i.value.toLocaleString()])]}sanitize(e){return this.getTabularData(e).sort((n,r)=>r.value-n.value)}};var bE=/\s/;function _E(t){for(var e=t.length;e--&&bE.test(t.charAt(e)););return e}var wE=/^\s+/;function xE(t){return t&&t.slice(0,_E(t)+1).replace(wE,"")}var bc=0/0,TE=/^[-+]0x[0-9a-f]+$/i,OE=/^0b[01]+$/i,SE=/^0o[0-7]+$/i,EE=parseInt;function cr(t){if(typeof t=="number")return t;if(qi(t))return bc;if(le(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=le(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xE(t);var n=OE.test(t);return n||SE.test(t)?EE(t.slice(2),n?2:8):TE.test(t)?bc:+t}var $E=function(){return me.Date.now()};const ks=$E;var ME="Expected a function",AE=Math.max,CE=Math.min;function kE(t,e,n){var r,i,s,o,a,l,c=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(ME);e=cr(e)||0,le(n)&&(u=!!n.leading,h="maxWait"in n,s=h?AE(cr(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function d(x){var b=r,E=i;return r=i=void 0,c=x,o=t.apply(E,b),o}function p(x){return c=x,a=setTimeout(g,e),u?d(x):o}function y(x){var b=x-l,E=x-c,L=e-b;return h?CE(L,s-E):L}function m(x){var b=x-l,E=x-c;return l===void 0||b>=e||b<0||h&&E>=s}function g(){var x=ks();if(m(x))return _(x);a=setTimeout(g,y(x))}function _(x){return a=void 0,f&&r?d(x):(r=i=void 0,o)}function T(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function O(){return a===void 0?o:_(ks())}function w(){var x=ks(),b=m(x);if(r=arguments,i=this,l=x,b){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(g,e),d(l)}return a===void 0&&(a=setTimeout(g,e)),o}return w.cancel=T,w.flush=O,w}function DE(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const LE=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Me(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function Ci(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function RE(t){const e=Ci(t,"border-left-width"),n=Ci(t,"border-right-width");return t.clientWidth+e+n}function IE(t){const e=Ci(t,"border-top-width"),n=Ci(t,"border-bottom-width");return t.clientHeight+e+n}function Df(t,e={}){const n=e.width||RE(t),r=e.height||IE(t);return{width:n,height:r}}function PE(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Qt=16384;function NE(t){(t.width>Qt||t.height>Qt)&&(t.width>Qt&&t.height>Qt?t.width>t.height?(t.height*=Qt/t.width,t.width=Qt):(t.width*=Qt/t.height,t.height=Qt):t.width>Qt?(t.height*=Qt/t.width,t.width=Qt):(t.width*=Qt/t.height,t.height=Qt))}function ki(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function UE(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function BE(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),UE(i)}const Zt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Zt(n,e)};function HE(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function FE(t){return Me(t).map(e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`}).join(" ")}function VE(t,e,n){const r=`.${t}:${e}`,i=n.cssText?HE(n):FE(n);return document.createTextNode(`${r}{${i}}`)}function _c(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const s=LE();try{e.className=`${e.className} ${s}`}catch{return}const o=document.createElement("style");o.appendChild(VE(s,n,r)),e.appendChild(o)}function zE(t,e){_c(t,e,":before"),_c(t,e,":after")}const wc="application/font-woff",xc="image/jpeg",GE={woff:wc,woff2:wc,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:xc,jpeg:xc,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function jE(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Ma(t){const e=jE(t).toLowerCase();return GE[e]||""}function WE(t){return t.split(/,/)[1]}function lo(t){return t.search(/^(data:)/)!==-1}function Lf(t,e){return`data:${e};base64,${t}`}async function Rf(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const Ds={};function YE(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Aa(t,e,n){const r=YE(t,e,n.includeQueryParams);if(Ds[r]!=null)return Ds[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await Rf(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),WE(a)));i=Lf(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Ds[r]=i,i}async function XE(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ki(e)}async function qE(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return ki(a)}const n=t.poster,r=Ma(n),i=await Aa(n,r,e);return ki(i)}async function ZE(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await ss(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function KE(t,e){return Zt(t,HTMLCanvasElement)?XE(t):Zt(t,HTMLVideoElement)?qE(t,e):Zt(t,HTMLIFrameElement)?ZE(t):t.cloneNode(!1)}const QE=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function JE(t,e,n){var r,i;let s=[];return QE(t)&&t.assignedNodes?s=Me(t.assignedNodes()):Zt(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?s=Me(t.contentDocument.body.childNodes):s=Me(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||Zt(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>ss(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function t$(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Me(r).forEach(i=>{let s=r.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Zt(t,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))})}function e$(t,e){Zt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Zt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function n$(t,e){if(Zt(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function r$(t,e){return Zt(e,Element)&&(t$(t,e),zE(t,e),e$(t,e),n$(t,e)),e}async function i$(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const o=n[s].getAttribute("xlink:href");if(o){const a=t.querySelector(o),l=document.querySelector(o);!a&&l&&!r[o]&&(r[o]=await ss(l,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(o)}return t}async function ss(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>KE(r,e)).then(r=>JE(t,r,e)).then(r=>r$(t,r)).then(r=>i$(r,e))}const If=/url\((['"]?)([^'"]+?)\1\)/g,s$=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,o$=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function a$(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function l$(t){const e=[];return t.replace(If,(n,r,i)=>(e.push(i),n)),e.filter(n=>!lo(n))}async function c$(t,e,n,r,i){try{const s=n?DE(e,n):e,o=Ma(e);let a;if(i){const l=await i(s);a=Lf(l,o)}else a=await Aa(s,o,r);return t.replace(a$(e),`$1${a}$3`)}catch{}return t}function u$(t,{preferredFontFormat:e}){return e?t.replace(o$,n=>{for(;;){const[r,,i]=s$.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function Pf(t){return t.search(If)!==-1}async function Nf(t,e,n){if(!Pf(t))return t;const r=u$(t,n);return l$(r).reduce((i,s)=>i.then(o=>c$(o,s,e,n)),Promise.resolve(r))}async function Fr(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await Nf(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function h$(t,e){await Fr("background",t,e)||await Fr("background-image",t,e),await Fr("mask",t,e)||await Fr("mask-image",t,e)}async function f$(t,e){const n=Zt(t,HTMLImageElement);if(!(n&&!lo(t.src))&&!(Zt(t,SVGImageElement)&&!lo(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Aa(r,Ma(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function d$(t,e){const n=Me(t.childNodes).map(r=>Uf(r,e));await Promise.all(n).then(()=>t)}async function Uf(t,e){Zt(t,Element)&&(await h$(t,e),await f$(t,e),await d$(t,e))}function p$(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Tc={};async function Oc(t){let e=Tc[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},Tc[t]=e,e}async function Sc(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let o=s.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Rf(o,e.fetchRequestInit,({result:a})=>(n=n.replace(s,`url(${a})`),[s,a]))});return Promise.all(i).then(()=>n)}function Ec(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=a.exec(r),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function m$(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Me(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,c=Oc(l).then(u=>Sc(u,e)).then(u=>Ec(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(Oc(i.href).then(a=>Sc(a,e)).then(a=>Ec(a).forEach(l=>{o.insertRule(l,i.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Me(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function g$(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Pf(e.style.getPropertyValue("src")))}async function v$(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Me(t.ownerDocument.styleSheets),r=await m$(n,e);return g$(r)}async function y$(t,e){const n=await v$(t,e);return(await Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return Nf(r.cssText,i,e)}))).join(`
`)}async function b$(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await y$(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function _$(t,e={}){const{width:n,height:r}=Df(t,e),i=await ss(t,e,!0);return await b$(i,e),await Uf(i,e),p$(i,e),await BE(i,n,r)}async function Bf(t,e={}){const{width:n,height:r}=Df(t,e),i=await _$(t,e),s=await ki(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||PE(),c=e.canvasWidth||n,u=e.canvasHeight||r;return o.width=c*l,o.height=u*l,e.skipAutoScale||NE(o),o.style.width=`${c}`,o.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function w$(t,e={}){return(await Bf(t,e)).toDataURL()}async function x$(t,e={}){return(await Bf(t,e)).toDataURL("image/jpeg",e.quality||1)}class Ie{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const T$="DONT_STYLE_ME_css_styles_verifier";class D extends Ie{constructor(e,n){super(e,n),this.chartID=""}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=M(e));const r={width:0,height:0},i=f=>{f&&Object.keys(r).forEach(d=>{if(f[d]){const p=f[d],y=parseFloat(p);p&&y>r[d]&&(""+p).indexOf("%")===-1&&(r[d]=y)}})},s={width:e.attr("width"),height:e.attr("height")},o=e.node();let a,l,c,u;try{typeof o.getBBox=="function"&&(a=o.getBBox(),l={width:a.width,height:a.height})}catch(f){console.error(f)}try{typeof(o==null?void 0:o.getBoundingClientRect)=="function"&&(c=o.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(f){console.error(f)}let h;if(o instanceof SVGSVGElement&&(h={width:o.clientWidth,height:o.clientHeight}),n){if(n.useAttrs&&(i(s),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const f={width:v(e.node(),"width","baseVal","value"),height:v(e.node(),"height","baseVal","value")};i(f)}catch{i(h),i(l),i(s)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),s,o;return i.length===2?(s=i[0],i=i[1].split("."),o=i[0]):(i=n.split("."),s=i[0]),e.append(s).attr("id",o).attr("class",i.slice(1).join(" "))}return r}init(){this.styleHolderElement(),this.initializeID(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=v(e,"style","prefix"),r=M(this.getHolder()).append("div").classed(`${Yt}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",T$),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),M(this.getHolder()).classed(`${Yt}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=M(r);i.classed("filled",!0),x$(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var o;let a="myChart";const l=v(n,"fileDownload","fileName");typeof l=="function"?a=l("jpg"):typeof l=="string"&&(a=l),(o=e.services.files)==null||o.downloadImage(s,`${a}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=M(r);i.classed("filled",!0),w$(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var o;let a="myChart";const l=v(n,"fileDownload","fileName");typeof l=="function"?a=l("png"):typeof l=="string"&&(a=l),(o=e.services.files)==null||o.downloadImage(s,`${a}.png`),i.classed("filled",!1)}).catch(function(s){console.error("oops, something went wrong!",s)})}toggleFullscreen(){const e=this.getHolder();M(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=M(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=D.getSVGElementSize(M(this.mainContainer),{useBBox:!0}),n=M(this.mainContainer).attr("class"),r=M(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(s){i+=Number(D.getSVGElementSize(M(s),{useBBox:!0}).height)}),i<=e?M(this.mainContainer).attr("height",i):M(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&M(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=kE(()=>{var s;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(s=this.services.events)==null||s.dispatchEvent(S.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}class Tr extends Ie{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:Tr.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}var O$={value:function(){}};function Hf(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Jr(n)}function Jr(t){this._=t}function S$(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Jr.prototype=Hf.prototype={constructor:Jr,on:function(t,e){var n=this._,r=S$(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=E$(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=$c(n[i],t.name,e);else if(e==null)for(i in n)n[i]=$c(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Jr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function E$(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function $c(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=O$,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const $$=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Hf},Symbol.toStringTag,{value:"Module"})),M$=Ld($$);M$.dispatch;function A$(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function C$(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=cr(n),n=n===n?n:0),e!==void 0&&(e=cr(e),e=e===e?e:0),A$(cr(t),e,n)}function k$(t,e){return rs(t,e)}function D$(t,e){var n;return kf(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function L$(t,e,n){var r=Ft(t)?ff:D$;return n&&jh(t,e,n)&&(e=void 0),r(t,xa(e))}class wt{constructor(e,n,r){if(this.type="",this.renderType=ot.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=v(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(M(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=v(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${Yt}--${i}--${this.type}`,!0),r&&r.classed(`${Yt}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={withinChartClip:!1}){if(this.type){const n=v(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=D.appendOrSelect(this.parent,`${this.renderType===ot.SVG?"svg":"div"}${r}.${Yt}--${n}--${this.type}`);if(e.withinChartClip){const s=this.model.get("chartClipId");if(s){const o=M(`#${s}`).select("rect");o.size()!==0&&parseFloat(o.attr("height"))>0&&i.attr("clip-path",`url(#${s})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?tt({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}const Ff=class Vf extends wt{constructor(){super(...arguments),this.type="toolbar",this.renderType=ot.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(S.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(S.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer().attr("role","toolbar").attr("aria-label",`chart-${this.services.domUtils.getChartID()} toolbar`);if(v(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const s=n.selectAll("div.toolbar-control").data(r,l=>l.id);s.exit().remove();const o=s.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu").attr("role","button"),a=this;o.merge(s).classed("disabled",l=>l.shouldBeDisabled()).attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${l.id}`)}" aria-label="${l.title}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${l.iconSVG.content}
				</svg>
			</button>`).each(function(l,c){M(this).select("svg").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),M(this).select("button").on("click",u=>{l.shouldBeDisabled()||a.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),a.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?a.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&a.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>v(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.text)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),M(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(S.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(S.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=M(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=M(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=M(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=M(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const s=M(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);s!==null&&(s.on("click",()=>{n.triggerFunctionAndEvent(r,e,s.node()),n.updateOverflowMenu(!1)}),s.on("keydown",o=>{o&&o.key==="Enter"?n.triggerFunctionAndEvent(r,e,s.node()):o&&o.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):o&&o.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):o&&o.key==="Escape"&&n.updateOverflowMenu(!1),o.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(S.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=v(this.getOptions(),"toolbar","numberOfIcons")-1,n=v(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach(o=>{let a=null;o.type===xt.CUSTOM?(v(o,"id")===null&&(o.id=`toolbar-button-${Vf.buttonID++}`),v(o,"shouldBeDisabled")===null&&(o.shouldBeDisabled=()=>!1),a=o):a=this.getControlConfigByType(o.type),a&&(a.text=o.text?o.text:o.type,a.id.indexOf("toolbar-export")!==-1?r.push(a):i.length<e?v(a,"iconSVG","content")===null?s.push(a):i.push(a):s.push(a))}),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){return{id:"toolbar-overflow-menu",title:"More options",shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:e=>this.toggleOverflowMenu(e)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData();let i;switch(e){case xt.ZOOM_IN:n&&(i={id:"toolbar-zoomIn",title:"Zoom in",shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case xt.ZOOM_OUT:n&&(i={id:"toolbar-zoomOut",title:"Zoom out",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case xt.RESET_ZOOM:n&&(i={id:"toolbar-resetZoom",title:"Reset zoom",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case xt.MAKE_FULLSCREEN:i={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:"Make fullscreen",shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case xt.SHOW_AS_DATATABLE:i={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:"Show as table",shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(S.Modal.SHOW)};break;case xt.EXPORT_CSV:i={id:"toolbar-export-CSV",title:"Export as CSV",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case xt.EXPORT_PNG:i={id:"toolbar-export-PNG",title:"Export as PNG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case xt.EXPORT_JPG:i={id:"toolbar-export-JPG",title:"Export as JPG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return i}getControlIconByType(e){switch(e){case xt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case xt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case xt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case xt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case xt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};Ff.buttonID=0;let zf=Ff;const Gf=class jf extends wt{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=jf.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=v(r,"growth");return i===yt.PREFERRED||i===yt.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>v(e,"growth")===yt.STRETCH).size()}render(e=!0){const n=this.parent,{width:r,height:i}=D.getHTMLElementSize(n.node()),s=this.configs.direction===At.ROW||this.configs.direction===At.ROW_REVERSE,o=v(this.model.getOptions(),"style","prefix"),a=n.classed(`${Yt}--${o}--layout-row`,this.configs.direction===At.ROW).classed(`${Yt}--${o}--layout-row-reverse`,this.configs.direction===At.ROW_REVERSE).classed(`${Yt}--${o}--layout-column`,this.configs.direction===At.COLUMN).classed(`${Yt}--${o}--layout-column-reverse`,this.configs.direction===At.COLUMN_REVERSE).classed(`${Yt}--${o}--layout-alignitems-center`,this.configs.alignItems===Ui.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);a.enter().append("div").merge(n.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",c=>`layout-child layout-child-${this._instanceID} ${c.id}`).each(function(c){c.components.forEach(u=>{const h=M(this),f=v(c,"renderType")===ot.SVG;u.setParent(f?D.appendOrSelect(h,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):h);const d=v(c,"growth");(d===yt.PREFERRED||d===yt.FIXED)&&u.render(e)})}),n.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(c){const u=v(c,"growth"),h=v(c,"renderType")===ot.SVG?D.getSVGElementSize(M(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):D.getHTMLElementSize(this);if(u===yt.PREFERRED){const f=s?h.width:h.height,d=s?r:i;c.size=f/d*100}}),a.exit().remove(),this.children.filter(c=>v(c,"growth")===yt.STRETCH).forEach(c=>{c.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const l=n.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);s?l.style("width",c=>`${c.size/100*r}px`).style("height","100%"):l.style("height",c=>`${c.size/100*i}px`).style("width","100%"),l.each(function(c){c.components.forEach(u=>{v(c,"growth")===yt.STRETCH&&u.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};Gf.instanceID=Math.floor(Math.random()*99999999999);let Cn=Gf;class Di extends wt{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer().style("width",`${this.configs.size||gc.default.size}px`).style("height",`${this.configs.size||gc.default.size}px`).attr("opacity",0)}}var R$={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},Ls=R$;function Mc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I$(t,e,n){return e&&Mc(t.prototype,e),n&&Mc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function P$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N$(t){return F$(t)||H$(t)||B$(t)||U$()}function U$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B$(t,e){if(t){if(typeof t=="string")return co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(t,e)}}function H$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F$(t){if(Array.isArray(t))return co(t)}function co(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wf(t){return t.reduce(function(e,n){return Array.isArray(n)?e.push.apply(e,N$(Wf(n))):e.push(n),e},[])}function V$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wf(e).reduce(function(r,i){return i(r)},function(){function r(){P$(this,r)}return I$(r)}())}function uo(t){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(t)}function z$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G$(t,e,n){return e&&Ac(t.prototype,e),n&&Ac(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function j$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}function ho(t,e){return ho=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ho(t,e)}function W$(t){var e=X$();return function(){var n=Li(t),r;if(e){var i=Li(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Y$(this,r)}}function Y$(t,e){if(e&&(uo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yf(t)}function Yf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Li(t){return Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(t)}function q$(t){var e=function(n){j$(i,n);var r=W$(i);function i(s){var o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(z$(this,i),o=r.call(this,s,a),o.children=[],!s||s.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return o.element=s,o.options=Object.assign(Object.create(o.constructor.options),a),o.constructor.components.set(o.element,Yf(o)),o}return G$(i,[{key:"release",value:function(){for(var s=this.children.pop();s;s=this.children.pop())s.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(s,o){return this.components.get(s)||new this(s,o)}}]),i}(t);return e}function fo(t){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(t)}function Z$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K$(t,e,n){return e&&Cc(t.prototype,e),n&&Cc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ti(){return typeof Reflect<"u"&&Reflect.get?ti=Reflect.get:ti=function(t,e,n){var r=Q$(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ti.apply(this,arguments)}function Q$(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=jn(t),t!==null););return t}function J$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&po(t,e)}function po(t,e){return po=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},po(t,e)}function tM(t){var e=rM();return function(){var n=jn(t),r;if(e){var i=jn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eM(this,r)}}function eM(t,e){if(e&&(fo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nM(t)}function nM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jn(t){return jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jn(t)}function iM(t){var e=function(n){J$(i,n);var r=tM(i);function i(){var s;Z$(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=r.call.apply(r,[this].concat(a)),s.handles=new Set,s}return K$(i,[{key:"manage",value:function(s){return this.handles.add(s),s}},{key:"unmanage",value:function(s){return this.handles.delete(s),s}},{key:"release",value:function(){var s=this;return this.handles.forEach(function(o){o.release(),s.handles.delete(o)}),ti(jn(i.prototype),"release",this).call(this)}}]),i}(t);return e}function or(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function mo(t){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(t)}function sM(t){return cM(t)||lM(t)||aM(t)||oM()}function oM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aM(t,e){if(t){if(typeof t=="string")return go(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return go(t,e)}}function lM(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cM(t){if(Array.isArray(t))return go(t)}function go(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hM(t,e,n){return e&&kc(t.prototype,e),n&&kc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vo(t,e)}function vo(t,e){return vo=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},vo(t,e)}function dM(t){var e=gM();return function(){var n=Ri(t),r;if(e){var i=Ri(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pM(this,r)}}function pM(t,e){if(e&&(mo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mM(t)}function mM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ri(t){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ri(t)}function vM(t){var e=function(n){fM(i,n);var r=dM(i);function i(){return uM(this,i),r.apply(this,arguments)}return hM(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var s=this,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=typeof a[0]=="string"?a.shift():void 0,u=Object(a[0])===a[0]&&typeof a[0]!="function"?a.shift():void 0,h=typeof a[0]=="function"?a.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,u)){h&&h(null,!0);return}var f={group:u&&u.group,state:c},d=[f.group,c].filter(Boolean).join("-").split("-").map(function(T){return T[0].toUpperCase()+T.substr(1)}).join(""),p=new CustomEvent(this.options["eventBefore".concat(d)],{bubbles:!0,cancelable:!0,detail:u}),y=u&&u.delegatorNode||this.element,m=!y.dispatchEvent(p);if(m){if(h){var g=new Error("Changing state (".concat(JSON.stringify(f),") has been canceled."));g.canceled=!0,h(g)}}else{var _=[c,u].filter(Boolean);this._changeState.apply(this,sM(_).concat([function(){y.dispatchEvent(new CustomEvent(s.options["eventAfter".concat(d)],{bubbles:!0,cancelable:!0,detail:u})),h&&h()}]))}}}]),i}(t);return e}function yo(t,e){var n=t.target,r=t.currentTarget;if(typeof n.matches=="function"){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var i=n.closest(e);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function Dc(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function bo(t){"@babel/helpers - typeof";return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(t)}function yM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bM(t,e,n){return e&&Lc(t.prototype,e),n&&Lc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _M(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_o(t,e)}function _o(t,e){return _o=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},_o(t,e)}function wM(t){var e=OM();return function(){var n=Ii(t),r;if(e){var i=Ii(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xM(this,r)}}function xM(t,e){if(e&&(bo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TM(t)}function TM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ii(t){return Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(t)}function SM(t){var e=function(n){_M(i,n);var r=wM(i);function i(){return yM(this,i),r.apply(this,arguments)}return bM(i,[{key:"show",value:function(s,o){(!s||typeof s=="function")&&(o=s),this.changeState("shown",Dc(s),o)}},{key:"hide",value:function(s,o){(!s||typeof s=="function")&&(o=s),this.changeState("hidden",Dc(s),o)}}]),i}(t);return e}var EM=[vM,SM];const $M=EM;function wo(t){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}function MM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function AM(t,e,n){return e&&Rc(t.prototype,e),n&&Rc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}function xo(t,e){return xo=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},xo(t,e)}function kM(t){var e=RM();return function(){var n=Pi(t),r;if(e){var i=Pi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DM(this,r)}}function DM(t,e){if(e&&(wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LM(t)}function LM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pi(t){return Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pi(t)}function IM(t){var e=function(n){CM(i,n);var r=kM(i);function i(){return MM(this,i),r.apply(this,arguments)}return AM(i,null,[{key:"init",value:function(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object.assign(Object.create(this.options),a);if(!o||o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(o.nodeType===Node.ELEMENT_NODE&&o.matches(l.selectorInit))this.create(o,a);else{var c=l.initEventNames.map(function(u){return or(o,u,function(h){var f=yo(h,"[".concat(l.attribInitTarget,"]"));if(f){h.delegateTarget=f;var d=f.ownerDocument.querySelectorAll(f.getAttribute(l.attribInitTarget));if(d.length>1)throw new Error("Target widget must be unique.");if(d.length===1){f.tagName==="A"&&h.preventDefault();var p=s.create(d[0],a);typeof p.createdByLauncher=="function"&&p.createdByLauncher(h)}}})});return{release:function(){for(var u=c.pop();u;u=c.pop())u.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return e}function To(t){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(t)}function PM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ic(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function NM(t,e,n){return e&&Ic(t.prototype,e),n&&Ic(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function UM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e)}function Oo(t,e){return Oo=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Oo(t,e)}function BM(t){var e=VM();return function(){var n=Ni(t),r;if(e){var i=Ni(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return HM(this,r)}}function HM(t,e){if(e&&(To(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FM(t)}function FM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ni(t){return Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ni(t)}var zM=function(t){UM(n,t);var e=BM(n);function n(r,i){var s;return PM(this,n),s=e.call(this,r,i),s._handleFocusinListener=void 0,s._handleKeydownListener=void 0,s._handleFocusin=function(o){var a=s.element.querySelector(s.options.selectorModalContainer)||s.element;s.element.classList.contains(s.options.classVisible)&&!a.contains(o.target)&&s.options.selectorsFloatingMenus.every(function(l){return!yo(o,l)})&&s.element.querySelector(Ls.selectorTabbable).focus()},s._hookCloseActions(),s}return NM(n,[{key:"createdByLauncher",value:function(r){this.show(r)}},{key:"shouldStateBeChanged",value:function(r){return r==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(r,i,s){var o=this,a,l=function(){if(a&&(a=o.unmanage(a).release()),r==="shown"&&o.element.offsetWidth>0&&o.element.offsetHeight>0){o.previouslyFocusedNode=o.element.ownerDocument.activeElement;var h=o.element.querySelector(o.options.selectorPrimaryFocus)||o.element.querySelector(Ls.selectorTabbable);h.focus()}s()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),r==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,u=c?"focusin":"focus";this._handleFocusinListener=this.manage(or(this.element.ownerDocument,u,this._handleFocusin,!c))}r==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):r==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),a=this.manage(or(this.element,"transitionend",l))}},{key:"_hookCloseActions",value:function(){var r=this;this.manage(or(this.element,"click",function(i){var s=yo(i,r.options.selectorModalClose);s&&(i.delegateTarget=s),(s||i.target===r.element)&&r.hide(i)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(or(this.element.ownerDocument.body,"keydown",function(i){i.which===27&&r.shouldStateBeChanged("hidden")&&(i.stopPropagation(),r.hide(i))}))}}],[{key:"options",get:function(){var r=Ls.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(r,"--overflow-menu-options"),".".concat(r,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(r,"--modal-container"),classVisible:"is-visible",classBody:"".concat(r,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),n.components=new WeakMap,n}(V$(q$,IM,$M,iM));const GM=zM;class Xf extends wt{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),GM.create(this.modal.node()).show()},this.init()}addEventListeners(){this.services.events.addEventListener(S.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(S.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.model.getOptions(),n=v(e,"style","prefix"),r=this.model.getTabularDataArray();return`
		<div class="cds--modal-container cds--modal-container">
			<div class="cds--modal-header cds--modal-header">
				<p class="cds--modal-header__label cds--type-delta cds--modal-header__label cds--type-delta" id="modal-title">Tabular representation</p>

				<p class="cds--modal-header__heading cds--type-beta cds--modal-header__heading cds--type-beta" id="modal-description">${e.title}</p>

				<button class="cds--modal-close cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${ma(r,0).map(i=>`<th scope="col">
								<div class="cds--table-header-label cds--table-header-label">${i}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${r.slice(1).map(i=>`
							<tr>
								${i.map(s=>`<td>${s}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer cds--modal-footer">
			  <div class="${Yt}--${n}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary cds--btn cds--btn--primary" type="button" data-modal-primary-focus>Download as CSV</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=M(this.services.domUtils.getHolder()),i=v(n,"style","prefix");this.modal=D.appendOrSelect(r,`div.${Yt}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0,this.modal.attr("data-modal",!0).attr("class","cds--modal cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby","modal-title").attr("aria-describedby","modal-description").attr("tabindex",-1)}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class qf extends wt{constructor(){super(...arguments),this.type="title",this.renderType=ot.HTML}render(e=!1){const n=this.getComponentContainer(),r=v(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(s=>s),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const s=this;i.on("mouseover",function(o){s.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:i,content:i.text()})}).on("mousemove",function(o){s.services.events.dispatchEvent(S.Tooltip.MOVE,{event:o})}).on("mouseout",function(){s.services.events.dispatchEvent(S.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=D.appendOrSelect(e,"tspan").node().getComputedTextLength(),s=e.text(),o=this.getSubstringIndex(e.node(),0,s.length-1,n-i);e.html(s.substring(0,o-1)).append("tspan").text("...");const a=this;e.on("mouseover",function(l){a.services.events.dispatchEvent(S.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){a.services.events.dispatchEvent(S.Tooltip.MOVE,{event:l})}).on("mouseout",function(){a.services.events.dispatchEvent(S.Tooltip.HIDE)})}}getMaxTitleWidth(){return D.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const s=Math.floor((r+n)/2);return e.getSubStringLength(0,s)>i?this.getSubstringIndex(e,n,s,i):e.getSubStringLength(0,s)<i?e.getSubStringLength(0,s+1)>i?s:this.getSubstringIndex(e,s,r,i):s}}class Zf extends wt{constructor(){super(...arguments),this.type="legend",this.renderType=ot.HTML}render(e=!1){const n=this.getOptions(),r=v(n,"legend"),i=v(r,"alignment"),s=v(n,"legend","orientation");let o=this.model.getDataGroups();const{DISABLED:a}=It.items.status,l=o.some(_=>_.status===a),c=v(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===ee.CENTER).classed("right-aligned",i===ee.RIGHT).classed(s,!0).classed("has-deactivated-items",l).attr("role",_t.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(o=this.sortDataGroups(o,c));const h=u.selectAll("div.legend-item").data(o,_=>_.name),f=h.enter().append("div").attr("class","legend-item");f.merge(u.selectAll("div.legend-item")).classed("active",function(_){return _.status===It.items.status.ACTIVE});const d=v(this.getOptions(),"legend","clickable");u.classed("clickable",d&&o.length>1);const p=It.checkbox.radius,y=f.append("div").classed("checkbox",!0),m=y.merge(h.select("div.checkbox")).attr("role",_t.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",(_,T)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${T}-title`)).attr("aria-checked",({status:_})=>_===It.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",_=>this.model.getColorClassName({classNameTypes:[Lt.BACKGROUND],dataGroupName:_.name,originalClassName:"checkbox"})).style("background",_=>_.status===It.items.status.ACTIVE?this.model.getFillColor(_.name)||this.model.getStrokeColor(_.name):null).classed("active",function(_){return _.status===It.items.status.ACTIVE});y.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),f.append("p").merge(h.select("p"));const g=v(n,"legend","additionalItems");if(g&&o.length){const _=this,T=u.selectAll("div.additional-item").data(g);T.exit().remove();const O=T.enter().append("div").merge(T).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(b,E)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${m.size()+E}-title`));O.selectAll("*").remove();let w,x=1;O.append("svg").classed("icon",!0).each(function(b){const E=M(this);!w||w!=b.type?(w=b.type,x=1):x++,_.addAdditionalItem(E,b,x)}),O.append("p").merge(O.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&f.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:s}=It.area;if(n.type===Dt.RADIUS?e.style("width",`${s}px`).style("height",`${s}px`):e.style("width",`${i}px`).style("height",`${s}px`),n.type===Dt.RADIUS){const{iconData:o,fill:a,stroke:l}=It.radius;e.attr("fill","none").selectAll("circle").data(o).enter().append("circle").classed("radius",!0).attr("role",_t.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Dt.LINE){const o=It.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",_t.IMG).attr("aria-label","line").attr("x1",0).attr("y1",o.yPosition).attr("x2",i).attr("y2",o.yPosition).style("stroke",n.stroke?n.stroke:o.stroke).style("stroke-width",o.strokeWidth)}else if(n.type===Dt.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",_t.IMG).attr("aria-label","area").attr("width",i).attr("height",s).style("fill",r>3&&!n.fill?It.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Dt.SIZE){const{iconData:o,fill:a,stroke:l}=It.size;e.attr("fill","none").attr("role",_t.IMG).attr("aria-label","size").selectAll("rect").data(o).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Dt.QUARTILE){const{iconData:o}=It.quartile;e.selectAll("rect").attr("role",_t.IMG).attr("aria-label","quartile").data(o).enter().append("rect").attr("class",(a,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height)}else if(n.type===Dt.ZOOM){const{iconData:o,color:a}=v(It,"zoom"),l=e.attr("role",_t.IMG).attr("aria-label","zoom").selectAll("g.icon").data(o).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:a),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:a)}}truncateLegendText(){const e=this.getComponentContainer(),n=v(this.getOptions(),"legend","truncation"),r=v(n,"type"),i=v(n,"threshold"),s=v(n,"numCharacter"),o=e.selectAll("div.legend-item p");o.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==he.NONE?o.html(function(a){return a.name.length>i&&a.name.length!==s?xr(a.name,r,s):a.name}):o.html(a=>a.name)}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=v(r,"legend"),s=v(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(o){e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:M(this)});const a=M(this);a.select("div.checkbox").classed("hovered",!0);const l=a.datum();l.name.length>s.threshold&&s.numCharacter<l.name.length&&s.type!==he.NONE&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:a,content:l.name})}).on("mousemove",function(o){M(this).datum().name.length>s.threshold&&s.type!==he.NONE&&e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:o})}).on("click",function(){e.services.events.dispatchEvent(S.Legend.ITEM_CLICK,{clickedElement:M(this)});const o=M(this).datum();e.model.toggleDataLabel(o.name)}).on("mouseout",function(){const o=M(this);o.select("div.checkbox").classed("hovered",!1),o.datum().name.length>s.threshold&&s.type!==he.NONE&&e.services.events.dispatchEvent(S.Tooltip.HIDE),e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:o})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(o){o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:M(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(o,a){o.key&&o.key===" "?(o.preventDefault(),e.model.toggleDataLabel(a.name)):o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:M(this)})}),n.selectAll("g.additional-item").on("mouseover",function(o){const a=M(this),l=a.datum();l.name.length>s.threshold&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:a,content:l.name})})}}class Kf extends wt{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=ot.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[s,o]=r.range(),[a,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=D.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=D.appendOrSelect(this.chartClipPath,`rect.${this.type}`);o-s>0&&c.attr("x",s).attr("y",l).attr("width",o-s).attr("height",a-l),this.chartClipPath.merge(c).lower()}}class jM extends Kf{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=D.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=D.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=D.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var wn,Pt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Pt||(Pt={}));var Pc=(wn={},wn[Pt.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},wn[Pt.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},wn[Pt.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},wn[Pt.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},wn),Nc=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},os=function(){function t(e){e===void 0&&(e={}),this.positions=Pc,this.positions=Object.assign({},Pc,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var s=e.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:s.top-o.top+r.top,left:s.left-o.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var s=i(e),o=e.getBoundingClientRect();return this.calculatePosition(s,o,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,s){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),s===void 0&&(s=this.findPosition.bind(this));var a=r.map(function(l){var c=s(e,n,l),u=o.getPlacementBox(n,c),h=0,f=0,d=i();u.top<d.top?h=d.top-u.top:u.bottom>d.height&&(h=u.bottom-d.height),u.left<d.left?f=d.left-u.left:u.right>d.width&&(f=u.right-d.width),h&&!f?f=1:f&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,y=h*f,m=p-y,g=m/p;return{placement:l,weight:g}});return a.sort(function(l,c){return c.weight-l.weight}),a[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var o=function(a,l,c){return s.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,o)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:Nc.innerHeight,width:Nc.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new os;class Qf extends wt{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=ot.HTML,this.isEventListenerAdded=!1,this.positionService=new os,this.handleShowTooltip=i=>{const s=i.detail.data||i.detail.items;let o;const a=this.formatItems(this.getItems(i));i.detail.content?o=`<div class="title-tooltip"><p>${i.detail.content}</p></div>`:o=this.getTooltipHTML(a);const l=D.appendOrSelect(this.tooltip,"div.content-box");if(v(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const c=`<div class="title-tooltip"><p>${i.detail.content}</p></div>`;l.html(c)}else l.html(this.model.getOptions().tooltip.customHTML(s,o));else l.html(o);l.selectAll(".datapoint-tooltip").each(function(c,u){const h=a[u];a[u]&&a[u].color&&M(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",h.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1)},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(S.Tooltip.MOVE,e=>{this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(S.Tooltip.MOVE,null),this.services.events.removeEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=v(n,"tooltip","truncation","type"),i=v(n,"tooltip","truncation","threshold"),s=v(n,"tooltip","truncation","numCharacter");return r!==he.NONE?e.map(o=>{const a=o.labelIcon?12:0;return o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o.label&&o.label.length+a>i&&(o.label=xr(o.label,r,s)),o.value&&o.value.length>i&&(o.value=xr(o.value,r,s)),o}):e.map(o=>(o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}valueFormatter(e,n){const r=this.getOptions(),i=v(r,"tooltip","valueFormatter");if(i)return i(e,n);if(typeof e.getTime=="function")return Hn(e,"MMM d, yyyy");try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return Hn(Date.parse(e),"MMM d, yyyy")}catch{}return e.toLocaleString()}render(e=!1){const n=this.getOptions(),r=v(n,"tooltip","enabled");if(r){const i=M(this.services.domUtils.getHolder()),s=v(n,"style","prefix");this.tooltip=D.appendOrSelect(i,`div.${Yt}--${s}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=this.tooltip.node(),i=this.getOptions(),s=v(i,"zoomBar","top","enabled");let o=v(e,"detail","mousePosition");if(!o)o=on(v(e,"detail","event"),n);else{const f=v(i,"zoomBar","top","type"),d=Jt.height[f];s&&(o[1]+=d+Jt.spacerHeight)}const a=n.offsetWidth,l=n.offsetHeight;let c;o[0]/a>.9?c=Pt.LEFT:o[0]/a<.1?c=Pt.RIGHT:c=this.positionService.findBestPlacementAt({left:o[0],top:o[1]},r,[Pt.RIGHT,Pt.LEFT,Pt.TOP,Pt.BOTTOM],()=>({top:void 0,left:void 0,width:a,height:l}));let{horizontalOffset:u}=CS;c===Pt.LEFT&&(u*=-1);const h=this.positionService.findPositionAt({left:o[0]+u,top:o[1]},r,c);this.positionService.setElement(r,h)}}const Jf=class ei extends wt{constructor(){super(...arguments),this.type="grid-brush",this.renderType=ot.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer();if(!n)throw new Error("SVG was not defined");const i=D.appendOrSelect(n,"svg.chart-grid-backdrop"),s=D.appendOrSelect(i,`g.${this.type}`),o=D.appendOrSelect(s,this.selectionSelector),{width:a,height:l}=D.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[f]=h.range();r.attr("transform",`translate(${f},0)`);const d=D.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===B.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const y=w=>{const x=w[1]-w[0];let b="0,"+x.toString();const E=Math.floor(l/ei.DASH_LENGTH),L=E*ei.DASH_LENGTH;for(let k=0;k<E;k++)b+=","+ei.DASH_LENGTH;b+=","+(l-L),E%2===1&&(b+=",0"),b+=","+x.toString(),b+=","+l.toString(),d.attr("stroke-dasharray",b)},m=w=>{const x=w.selection;x===null||x[0]===x[1]||(d.attr("x",parseFloat(o.attr("x"))+parseFloat(i.attr("x"))).attr("y",o.attr("y")).attr("width",o.attr("width")).attr("height",o.attr("height")).style("cursor","pointer").style("display",null),y(x))},g=(w,x)=>{const b=wh().range([0,a]).domain(p);let E=[b.invert(w),b.invert(x)];E[0].valueOf()===E[1].valueOf()&&(E=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==E[0].valueOf()||p[1].valueOf()!==E[1].valueOf())&&this.services.zoom.handleDomainChange(E)};let _;const T=w=>{const x=w.selection;x!==null&&(g(x[0],x[1]),s.call(_.move,null),d.style("display","none"))};l!=0&&a!=0&&(_=oh().extent([[0,0],[a-1,l]]).on("start brush end",m).on("end.brushed",T),s.call(_));const O=this.services.zoom.getZoomRatio();i.on("click",function(w){if(w.shiftKey){const x=this.services.domUtils.getHolder(),b=on(s.node(),x)[0];let E=b-a*O/2;E<0&&(E=0);let L=b+a*O/2;L>a&&(L=a),g(E,L)}})}}};Jf.DASH_LENGTH=4;let WM=Jf;class YM extends wt{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=ot.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=oh(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(S.ZoomBar.UPDATE,this.render.bind(this));const e=v(this.getOptions(),"zoomBar",$.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer(),r=this.services.zoom.isZoomBarLoading($.TOP),i=this.services.zoom.isZoomBarLocked($.TOP),s=v(this.getOptions(),"zoomBar",$.TOP,"type"),o=v(this.getOptions(),"axes",$.BOTTOM,"highlights"),a=Jt.height[s],{width:l}=D.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const h=D.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",a).attr("opacity",1);if(D.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",a).attr("width","100%").attr("height",Jt.spacerHeight).attr("opacity",1).attr("fill","none"),s===ye.GRAPH_VIEW?D.appendOrSelect(h,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):s===ye.SLIDER_VIEW&&D.appendOrSelect(h,"rect.zoom-slider-bg").attr("x",c).attr("y",a/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(h,c,l);return}const{cartesianScales:f}=this.services,d=f.getMainXScale(),p=f.getMainYScale(),y=f.getMainXScaleType();if(d&&y===B.TIME){let m=this.services.zoom.getZoomBarData();if(bS(m)||m.length===1)return;this.xScale=d.copy(),this.yScale=p.copy();const g=this.services.zoom.getDefaultZoomBarDomain(m);m=this.compensateDataForDefaultDomain(m,g);const _=this.model.get("initialZoomDomain"),T=v(this.getOptions(),"zoomBar",$.TOP,"initialZoomDomain");T&&T[0]&&T[1]&&(T[0]=new Date(T[0]),T[1]=new Date(T[1])),T&&!(_&&_[0].valueOf()===T[0].valueOf()&&_[1].valueOf()===T[1].valueOf())?this.model.set({initialZoomDomain:tt([],T),zoomDomain:T?tt([],T):g},{skipUpdate:!0}):T===null&&_!==null&&this.model.set({initialZoomDomain:null,zoomDomain:tt([],g)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(g),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,a-6]).domain(En(m,x=>x.value));const O=this.model.get("zoomDomain");if(s===ye.GRAPH_VIEW&&(this.renderZoomBarArea(h,"path.zoom-graph-area-unselected",m,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(h,"path.zoom-graph-area",m,this.clipId),this.renderZoomBarBaseline(h,c,l),o)){const x=o.highlightStartMapsTo,b=o.highlightEndMapsTo,E=o.color,L=o.labelMapsTo;o.data.forEach((k,R)=>{D.appendOrSelect(h,`rect.highlight-${R}`).attr("height",a-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(k[x])).attr("width",this.xScale(k[b])-this.xScale(k[x])).style("fill",E&&E.scale[k[L]]?E.scale[k[L]]:null).style("fill-opacity",.1).style("stroke",E&&E.scale[k[L]]?E.scale[k[L]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(O,c,l);const w=D.appendOrSelect(n,this.brushSelector).call(this.brush);if(O!==void 0)if(O[0].valueOf()===O[1].valueOf())w.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const x=O.map(b=>this.xScale(b));x[1]-x[0]<this.MIN_SELECTION_DIFF||(w.call(this.brush.move,x),this.updateBrushHandle(this.getComponentContainer(),x))}i&&(this.brush.filter(()=>!1),w.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const i=a=>{const l=a.selection;l===null?this.handleBrushedEvent(a,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(a,e,this.xScale,l)},s=v(this.getOptions(),"zoomBar",$.TOP,"type"),o=Jt.height[s];this.brush.extent([[n,0],[r,o]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(e,n,r,i){const s=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(n===void 0||n[0]!==s[0]||n[1]!==s[1])&&this.services.zoom.handleDomainChange(s,{dispatchEvent:!1});let o;e.type==="start"?o=S.ZoomBar.SELECTION_START:e.type==="brush"?o=S.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(o=S.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:s})),this.services.events.dispatchEvent(o,{selection:i,newDomain:s})}}updateBrushHandle(e,n){const r=this,i=Jt.handleWidth,s=v(this.getOptions(),"zoomBar",$.TOP,"type"),o=Jt.height[s],a=-i/2,l=Jt.handleBarWidth,c=s===ye.GRAPH_VIEW?Jt.handleBarHeight:6,u=-l/2,h=(o-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(d){if(d.type==="w")return Math.max(n[0]+a,r.maxSelectionRange[0]);if(d.type==="e")return Math.min(n[1]+a,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",o).attr("cursor","ew-resize").style("display",null);const f=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);f.enter().append("rect").attr("class",function(d){return"handle-bar handle-bar--"+d.type}),f.attr("x",function(d){if(d.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-a+u);if(d.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+a+u)}).attr("y",h).attr("width",l).attr("height",c).attr("cursor","ew-resize"),s===ye.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],o)}updateSliderSelectedArea(e){const n=v(this.getOptions(),"zoomBar",$.TOP,"type"),r=Jt.height[n],i=this.getComponentContainer().select("svg.zoom-container");D.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:s}=this.services,o=s.getMainXAxisPosition(),a=s.getMainYAxisPosition(),l=s.getMainXScaleType(),c=s.getMainYScaleType(),u=(g,_,T)=>O=>s.getValueFromScale(g,_,T,O),h=u(this.xScale,l,o),f=u(this.yScale,c,a),d=v(this.getOptions(),"zoomBar",$.TOP,"type"),p=Jt.height[d],y=ra().x(g=>h(g)).y0(p).y1(g=>p-f(g)),m=D.appendOrSelect(e,n).datum(r).attr("d",y);i&&m.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,s,o){const a=D.appendOrSelect(e,"clipPath").attr("id",n);D.appendOrSelect(a,"rect").attr("x",r).attr("y",i).attr("width",s).attr("height",o)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=ns(e),i=this.services.cartesianScales.getDomainIdentifier(),s=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const o={};o[i]=n[0],o[s]=0,r.unshift(o)}if(Number(n[1])>Number(r[r.length-1][i])){const o={};o[i]=n[1],o[s]=0,r.push(o)}return r}renderZoomBarBaseline(e,n,r,i=!1){const s=v(this.model.getOptions(),"zoomBar",$.TOP,"type"),o=Jt.height[s],a=na()([[n,o],[r,o]]);D.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",a).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),D.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),v(this.getOptions(),"zoomBar",$.TOP,"type")===ye.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(S.ZoomBar.UPDATE,this.render.bind(this))}}class XM extends wt{constructor(e,n){super(e,n),this.type="threshold",this.renderType=ot.SVG,this.positionService=new os}render(e=!1){const n=v(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values($).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u==null?void 0:u.correspondingDatasets,mapsTo:u==null?void 0:u.mapsTo})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const o=s.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));o.exit().attr("opacity",0).remove();const a=o.enter().append("g");a.append("line").attr("class","threshold-line"),a.append("rect").attr("class","threshold-hoverable-area"),a.merge(o).attr("class","threshold-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),h=l.services.cartesianScales.getScaleTypeByPosition(c);let f=null,d=null;c===$.LEFT||c===$.RIGHT?(d=u,f=l.services.cartesianScales.getMainXScale()):(f=u,d=l.services.cartesianScales.getMainYScale());const p=h===B.LABELS,[y,m]=f.range(),[g,_]=d.range(),{cartesianScales:T}=l.services,O=T.getOrientation(),w=k=>T.getDomainValue(k),x=k=>T.getRangeValue(k),[b,E]=An(w,x,O),L=M(this);c===$.TOP||c===$.BOTTOM?(L.selectAll("line.threshold-line").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"threshold-line-update",animate:e})).attr("y1",_).attr("y2",g).attr("x1",({datum:k})=>b(k)+(p?u.step()/2:0)).attr("x2",({datum:k})=>b(k)+(p?u.step()/2:0)).style("stroke",({fillColor:k})=>k),L.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:k})=>-b(k)).attr("width",Math.abs(g-_)).classed("rotate",!0)):(L.selectAll("line.threshold-line").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"threshold-line-update",animate:e})).attr("x1",y).attr("x2",m).attr("y1",({datum:k})=>E(k)+(p?u.step()/2:0)).attr("y2",({datum:k})=>E(k)+(p?u.step()/2:0)).style("stroke",({fillColor:k})=>k),L.selectAll("rect.threshold-hoverable-area").attr("x",y).attr("y",({datum:k})=>E(k)).attr("width",Math.abs(m-y)).classed("rotate",!1))}),this.services.events.addEventListener(S.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(S.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions();if(this.services.cartesianScales.getScaleTypeByPosition(r)===B.TIME){const s=[$.LEFT,$.RIGHT].includes(r),o=this.services.cartesianScales.getMainXScale(),a=this.services.cartesianScales.getMainYScale(),l=s?a:o,c=v(i,"timeScale"),u=ao(l.ticks(),v(c,"timeInterval"));return oo(n,0,l.ticks(),u,c)}return n.toLocaleString("en")}appendThresholdLabel(){const e=M(this.services.domUtils.getHolder()),n=v(this.getOptions(),"style","prefix");this.label=D.appendOrSelect(e,`div.${Yt}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=on(e,r),s=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(`${n.label||"Threshold"}: ${s}`).style("background-color",n.fillColor);const o=this.label.node(),a=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},o,[Pt.RIGHT,Pt.LEFT,Pt.TOP,Pt.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},o,a);this.positionService.setElement(o,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=v(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){M(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(S.Threshold.SHOW,{event:n,hoveredElement:M(this),datum:M(this).datum()})}).on("mouseout",function(n){M(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(S.Threshold.HIDE,{event:n,hoveredElement:M(this),datum:M(this).datum()})})}}class qM extends wt{constructor(e,n){super(e,n),this.type="highlight",this.renderType=ot.SVG,this.positionService=new os,this.highlightStrokeWidth=1}render(e=!1){const n=v(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values($).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-highlight ${c.axisPosition}`);const o=s.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));o.exit().attr("opacity",0).remove();const a=o.enter().append("g");a.append("rect").attr("class","highlight-bar"),a.append("line").attr("class","highlight-line"),a.merge(o).attr("class","highlight-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),h=l.services.cartesianScales.getMainYScale(),[f,d]=u.range(),[p,y]=h.range(),{cartesianScales:m}=l.services,g=m.getOrientation(),_=b=>m.getDomainValue(b),T=b=>m.getRangeValue(b),[O,w]=An(_,T,g),x=M(this);c===$.TOP||c===$.BOTTOM?x.selectAll("rect.highlight-bar").transition().call(b=>l.services.transitions.setupTransition({transition:b,name:"highlight-bar-update",animate:e})).attr("y",Math.max(y+l.highlightStrokeWidth,0)).attr("height",Math.max(p-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:b,...E})=>O(E[b])).attr("width",({highlightStartMapsTo:b,highlightEndMapsTo:E,...L})=>Math.max(O(L[E])-O(L[b]),0)).style("stroke",({color:b,labelMapsTo:E,...L})=>b&&b.scale[L[E]]?b.scale[L[E]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:b,labelMapsTo:E,...L})=>b&&b.scale[L[E]]?b.scale[L[E]]:null):x.selectAll("rect.highlight-bar").transition().call(b=>l.services.transitions.setupTransition({transition:b,name:"highlight-bar-update",animate:e})).attr("x",f).attr("width",Math.max(d-f,0)).attr("y",({highlightEndMapsTo:b,...E})=>w(E[b])).attr("height",({highlightStartMapsTo:b,highlightEndMapsTo:E,...L})=>Math.max(w(L[b])-w(L[E]),0)).style("stroke",({color:b,labelMapsTo:E,...L})=>b&&b.scale[L[E]]?b.scale[L[E]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:b,labelMapsTo:E,...L})=>b&&b.scale[L[E]]?b.scale[L[E]]:null)})}}class ZM extends Qf{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,s=i.getDomainIdentifier(),o=i.isDualAxes(),{groupMapsTo:a}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][s];let h;if(n.length===1){const f=n[0],d=i.getRangeIdentifier(f);if(o){const y=i.getRangeAxisPosition({datum:f,groups:[f[a]]});c=i.getScaleLabel(y)}const p=f[d];h=[{label:l,value:u},...Array.isArray(p)&&p.length===2?[{label:"Start",value:p[0]},{label:"End",value:p[1]}]:[{label:c,value:f[d]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(y=>h.push({label:y.label,value:y.value})),h.push({label:r.tooltip.groupLabel,value:f[a],color:this.model.getFillColor(f[a]),class:this.model.getColorClassName({classNameTypes:[Lt.TOOLTIP],dataGroupName:f[a]})})}else if(n.length>1&&(h=[{label:l,value:u}],h=h.concat(n.map(f=>{const d=f[i.getRangeIdentifier(f)];return{label:f[a],value:Array.isArray(d)&&d.length===2?`${d[0]} - ${d[1]}`:d,color:this.model.getFillColor(f[a]),class:this.model.getColorClassName({classNameTypes:[Lt.TOOLTIP],dataGroupName:f[a]})}}).sort((f,d)=>d.value-f.value)),!o&&v(r,"tooltip","showTotal")===!0)){const f=i.getRangeIdentifier();h.push({label:ma(r,"tooltip.totalLabel")||"Total",value:n.reduce((d,p)=>d+p[f],0),bold:!0})}return h}}class KM extends wt{constructor(){super(...arguments),this.type="grid",this.renderType=ot.SVG}render(e=!0){const n=v(this.getOptions(),"grid","x","enabled"),r=v(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),!(!n&&!r)&&(n&&(D.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),r&&(D.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))}drawXGrid(e){const n=this.parent,r=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),s=ku(i).tickSizeInner(-r).tickSizeOuter(0);if(v(this.getOptions(),"grid","x","alignWithAxisTicks")){const a=this.services.cartesianScales.getDomainAxisPosition(),l=v(this.getOptions(),"axes",a,"ticks","values");l&&s.tickValues(l)}else{const a=v(this.getOptions(),"grid","x","numberOfTicks");s.ticks(a)}const o=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);e?o.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(s):o.call(s),this.cleanGrid(o)}drawYGrid(e){const n=this.parent,r=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),s=Du(i).tickSizeInner(-r).tickSizeOuter(0);if(v(this.getOptions(),"grid","y","alignWithAxisTicks")){const a=this.services.cartesianScales.getRangeAxisPosition(),l=v(this.getOptions(),"axes",a,"ticks","values");l&&s.tickValues(l)}else{const a=v(this.getOptions(),"grid","y","numberOfTicks");s.ticks(a)}const o=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);e?o.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(s):o.call(s),this.cleanGrid(o)}getGridlineThreshold(e){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,h)=>Number(Oe(u).tx)-Number(Oe(h).tx));let i=-1;if(!r.length)return;r.forEach(u=>{e[0]>=+Oe(u).tx&&i++});const s=i+1<r.length?i+1:r.length,o=r[i],a=r[s];let l;if(!o)l=+Oe(a).tx;else if(a)l=+Oe(a).tx-+Oe(o).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=D.getSVGElementSize(u).width-+Oe(o).tx}const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(e){const n=v(this.getOptions,"tooltip","gridline","threshold"),r=n||this.getGridlineThreshold(e);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=Oe(this),s={min:Number(i.tx)-r,max:Number(i.tx)+r};return s.min<=e[0]&&e[0]<=s.max})}drawBackdrop(e,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),s=this.services.cartesianScales.getMainYScale(),[o,a]=i.range(),[l,c]=s.range();this.backdrop=D.appendOrSelect(r,"svg.chart-grid-backdrop");const u=D.appendOrSelect(this.backdrop,e||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",o).attr("y",c).attr("width",Math.abs(a-o)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(e){e.selectAll("text").remove(),e.select(".domain").remove()}}class QM extends wt{constructor(){super(...arguments),this.type="area",this.renderType=ot.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?Se.opacity.unselected:Se.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Se.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:s}=this.services,o=s.getOrientation(),a=ra().curve(this.services.curves.getD3Curve()).defined(w=>{const x=s.getRangeIdentifier();return w[x]!=null}),l=this.model.getGroupedData(this.configs.groups),c=v(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const f=(w,x)=>{v(r,"axes",w,"includeZero")===!1&&x[0]>0&&x[1]>0&&(h=x[0])},d=w=>u?s.getBoundedScaledValues(w)[0]:s.getRangeValue(h),p=w=>u?s.getBoundedScaledValues(w)[1]:s.getRangeValue(w);o===Kt.VERTICAL?(i=s.getMainYScale().domain(),f(s.getMainYAxisPosition(),i),a.x(w=>s.getDomainValue(w)).y0(w=>d(w)).y1(w=>p(w))):(i=s.getMainXScale().domain(),f(s.getMainXAxisPosition(),i),a.x0(w=>d(w)).x1(w=>p(w)).y(w=>s.getDomainValue(w)));const y=v(r,"color","gradient","enabled"),m=l&&l.length===1&&y;l.length>1&&y&&console.error("Gradients can only be enabled when having 1 single dataset");const g=n.selectAll("path.area").data(l,w=>w.name),_=M(this.services.domUtils.getMainContainer());if(g.exit().attr("opacity",0).remove(),!l.length)return;if(m){const w=_.select(`path.${this.model.getColorClassName({classNameTypes:[Lt.STROKE],dataGroupName:l[0].name})}`).node();let x;if(w)x=getComputedStyle(w,null).getPropertyValue("stroke");else{const b=v(this.model.getOptions(),"color","scale");if(b!==null){const E=Object.keys(b);x=b[E[0]]}}Tr.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:Tr.getStops(i,x)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const T=this,O=g.enter().append("path");m?O.merge(g).style("fill",w=>`url(#${this.services.domUtils.generateElementIDString(`${w.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",w=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:w.name,originalClassName:"area"})).attr("d",w=>{const{data:x}=w;return a(x)}):(O.attr("opacity",0).merge(g).attr("class","area").attr("class",w=>this.model.getColorClassName({classNameTypes:[Lt.FILL,Lt.STROKE],dataGroupName:w.name,originalClassName:"area"})).style("fill",w=>T.model.getFillColor(w.name)).transition().call(w=>this.services.transitions.setupTransition({transition:w,name:"area-update-enter",animate:e})).attr("opacity",u?1:Se.opacity.selected).attr("d",w=>{const{data:x}=w;return a(x)}),u&&O.attr("fill-opacity",Se.opacity.selected).style("stroke",w=>T.model.getStrokeColor(w.name)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Rs extends wt{constructor(){super(...arguments),this.type="line",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?Ms.opacity.unselected:Ms.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",Ms.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,s=d=>r.getDomainValue(d),o=d=>r.getRangeValue(d),[a,l]=An(s,o,r.getOrientation()),c=this.getOptions(),u=na().x(a).y(l).curve(i.getD3Curve()).defined(d=>{const p=r.getRangeIdentifier(d);return d[p]!=null});let h=[];if(this.configs.stacked){const d=Object.keys(c.axes).some(y=>c.axes[y].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:d}).map(y=>{const m=this.services.cartesianScales.getDomainIdentifier(y),g=this.services.cartesianScales.getRangeIdentifier(y);return{name:v(y,0,p),data:y.map(_=>({[m]:_.data.sharedStackKey,[p]:_[p],[g]:_[1]})),hidden:!L$(y,_=>_[0]!==_[1])}})}else h=this.model.getGroupedData(this.configs.groups);const f=n.selectAll("path.line").data(h,d=>d.name);f.exit().attr("opacity",0).remove(),f.enter().append("path").classed("line",!0).attr("opacity",0).merge(f).data(h,d=>d.name).attr("class",d=>this.model.getColorClassName({classNameTypes:[Lt.STROKE],dataGroupName:d.name,originalClassName:"line"})).style("stroke",d=>this.model.getStrokeColor(d.name)).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",d=>{const{data:p}=d;return p.map(y=>{const m=this.services.cartesianScales.getRangeIdentifier(y);return y[m]}).join(",")}).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"line-update-enter",animate:e})).attr("opacity",d=>d.hidden?0:1).attr("d",d=>{const{data:p}=d;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const Uc=5;function JM(t,e){return t>e-Uc&&t<e+Uc}let t2=class extends wt{constructor(){super(...arguments),this.type="ruler",this.renderType=ot.SVG,this.isXGridEnabled=v(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=v(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=v(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,s=this.services.cartesianScales.getOrientation(),o=this.model.getDisplayData(),a=this.services.cartesianScales.getRangeScale(),[l,c]=a.range(),u=s===Kt.HORIZONTAL?r:n,h=D.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),f=D.appendOrSelect(h,"line.ruler-line"),d=i.selectAll("[role=graphics-symbol]"),p=o.map(m=>({domainValue:this.services.cartesianScales.getDomainValue(m),originalData:m})).filter(m=>JM(m.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(m=>m.domainValue).join()===this.pointsWithinLine.map(m=>m.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(S.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const y=this.pointsWithinLine.reduce((m,g)=>{if(m.length===0)return m.push(g),m;const _=m[0].domainValue,T=Math.abs(u-g.domainValue),O=Math.abs(u-_);return T>O||(T<O?m=[g]:m.push(g)),m},[]);if(y.length>0){const m=y.map(O=>O.originalData).filter(O=>{const w=this.services.cartesianScales.getRangeIdentifier(O);return O[w]!=null}),g=y.map(O=>O.domainValue),_=d.filter(O=>{const w=this.services.cartesianScales.getDomainValue(O);return g.includes(w)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!k$(this.elementsToHighlight,_)&&this.hideRuler(),_.dispatch("mouseover"),this.elementsToHighlight=_,this.services.events.dispatchEvent(S.Tooltip.SHOW,{mousePosition:[n,r],hoveredElement:f,data:this.formatTooltipData(m)}),h.attr("opacity",1);const T=y[0];s==="horizontal"?f.attr("x1",c).attr("x2",l).attr("y1",T.domainValue).attr("y2",T.domainValue):f.attr("y1",c).attr("y2",l).attr("x1",T.domainValue).attr("x2",T.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=D.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(S.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(s){const o=on(s,e.parent.node());e.showRuler(s,o)};if(r.length>100){const s=r.length%50*12.5;i=rE(function(o){const{mousePosition:a}=this;e.showRuler(o,a)},s,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=D.appendOrSelect(e,"svg.chart-grid-backdrop")}};class ni extends wt{constructor(){super(...arguments),this.type="scatter",this.renderType=ot.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var s;return(s=this.services.transitions)==null?void 0:s.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(s=>s[r].getTime()>=i[0].getTime()&&s[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(s=>e.axes[s].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(s=>{const o=i.getRangeIdentifier(s);return s[o]!==void 0&&s[o]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(v(this.getOptions(),"points","enabled")||v(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services;if(!s)throw new Error("Services cartesianScales are undefined.");const o=s.getDomainIdentifier(),a=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[o]}`);a.exit().attr("opacity",0).remove();const l=a.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(a);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[s,o]=An(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[a,l]=An(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=a(e),u=l(e);return o&&s?u<=o.scaleValue&&c>=s.scaleValue:o?u<=o.scaleValue:s?c>=s.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:s}=r.points,{cartesianScales:o}=this.services;if(!o)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:a}=r.data,l=d=>o.getDomainValue(d),c=d=>o.getRangeValue(d),[u,h]=An(l,c,o.getOrientation()),{fadeInOnChartHolderMouseover:f}=this.configs;e.raise().classed("dot",!0).attr("class",d=>{const p=o.getDomainIdentifier(d),y=this.model.getIsFilled(d[a],d[p],d,i)?[Lt.FILL,Lt.STROKE]:[Lt.STROKE];return this.model.getColorClassName({classNameTypes:y,dataGroupName:d[a],originalClassName:"dot"})||""}).classed("threshold-anomaly",d=>this.isDatapointThresholdAnomaly(d)).classed("filled",d=>{const p=o.getDomainIdentifier(d);return this.model.getIsFilled(d[a],d[p],d,i)}).classed("unfilled",d=>{const p=o.getDomainIdentifier(d);return!this.model.getIsFilled(d[a],d[p],d,i)}).transition().call(d=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:d,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",d=>{const p=o.getDomainIdentifier(d);if(this.model.getIsFilled(d[a],d[p],d,i))return this.model.getFillColor(d[a],d[p],d)}).style("stroke",d=>{const p=o.getDomainIdentifier(d);return this.model.getStrokeColor(d[a],d[p],d)}).attr("fill-opacity",i?s:1).attr("opacity",f?0:1).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",d=>{const p=o.getRangeIdentifier(d);return d[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var s,o;const a=M(this);a.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:l[n],originalClassName:a.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(s=e.services.events)==null||s.dispatchEvent(S.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var s,o;const a=M(this);(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_MOUSEMOVE,{event:r,element:a,datum:i}),(o=e.services.events)==null||o.dispatchEvent(S.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var s;(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_CLICK,{event:r,element:M(this),datum:i})}).on("mouseout",function(r,i){var s,o,a;const l=M(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(s=e.services.cartesianScales)==null?void 0:s.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",f=>h||c?e.model.getFillColor(f[n],f[u],f):null)}(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(a=e.services.events)==null||a.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class td extends wt{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=ot.SVG,this.truncation={[$.LEFT]:!1,[$.RIGHT]:!1,[$.TOP]:!1,[$.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=v(r,"axes",n,"visible"),s=this.getComponentContainer(),{width:o,height:a}=D.getSVGElementSize(s,{useAttrs:!0}),l=D.appendOrSelect(s,`g.axis.${n}`);let c,u;if(n===$.BOTTOM||n===$.TOP?(c=this.configs.axes[$.LEFT]?this.margins.left:0,u=this.configs.axes[$.RIGHT]?o-this.margins.right:o):(c=a-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const h=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===B.LABELS||this.scaleType===B.LABELS_RATIO?h.rangeRound([c,u]):h.range([c,u]);let f;switch(n){case $.LEFT:f=Du;break;case $.BOTTOM:f=ku;break;case $.RIGHT:f=Pp;break;case $.TOP:f=Ip;break}l.attr("aria-label",`${n} axis`);const d=!l.select("g.ticks").empty();let p=D.appendOrSelect(l,"g.ticks");d||(p.attr("role",`${_t.GRAPHICS_OBJECT} ${_t.GROUP}`),p.attr("aria-label",`${n} ticks`));const y=D.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),m=v(r,"axes",n),g=this.scaleType===B.TIME||m.scaleType===B.TIME,_=n===$.LEFT||n===$.RIGHT,T=this.model.get("zoomDomain");if(T&&g&&!_&&h.domain(T),!i){p.attr("aria-hidden",!0);return}const O=v(m,"scaleType"),w=v(r,"data","loading"),x=v(m,"ticks","number"),b=v(m,"ticks","values"),E=v(m,"truncation","type"),L=v(m,"truncation","threshold"),k=v(m,"truncation","numCharacter"),R=x!==null,V=v(r,"timeScale"),I=D.appendOrSelect(y,"g.tick"),N=D.appendOrSelect(I,"text").text("0"),et=D.getSVGElementSize(N.node(),{useBBox:!0}).height;I.remove();const K=this.scaleType||m.scaleType||B.LINEAR,A=f(h).tickSizeOuter(0);if(h.ticks){let U;if(R?U=x:(U=Ve.ticks.number,_&&(U=this.getNumberOfFittingTicks(a,et,Ve.ticks.verticalSpaceRatio))),h.ticks().length===1&&h.ticks()[0]===0&&(U=0),A.ticks(U),g)if(!h.ticks(U).length)A.tickValues([]);else{const Z=v(r,"timeScale","addSpaceOnEdges"),ut=v(r,"axes",n,"domain"),rt=h.copy();Z&&!ut&&rt.nice(U);const Tt=rt.ticks(U);Z&&Tt.length>2&&!ut&&(Tt.splice(Tt.length-1,1),Tt.splice(0,1)),A.tickValues(Tt)}}let pt;const nt=v(m,"ticks","formatter");if(g){const U=ao(A.tickValues(),v(r,"timeScale","timeInterval"));nt===null?pt=(Z,ut)=>oo(Z,ut,A.tickValues(),U,V):pt=(Z,ut)=>{const rt=oo(Z,ut,A.tickValues(),U,V);return nt(Z,ut,rt)}}else nt===null?K===B.LINEAR&&(pt=U=>U.toLocaleString()):pt=nt;A.tickFormat(pt);const[mt,ht]=this.services.cartesianScales.getScaleByPosition(n).domain();let lt;if(b){if(g)b.forEach((U,Z)=>{U.getTime===void 0&&(b[Z]=new Date(U))}),lt=b.filter(U=>{const Z=U.getTime();return Z>=new Date(mt).getTime()&&Z<=new Date(ht).getTime()});else if(O===B.LABELS){const U=this.services.cartesianScales.getScaleByPosition(n).domain();lt=b.filter(Z=>U.includes(Z))}else lt=b.filter(U=>U>=mt&&U<=ht);A.tickValues(lt)}switch(n){case $.LEFT:p.attr("transform",`translate(${this.margins.left}, 0)`);break;case $.BOTTOM:p.attr("transform",`translate(0, ${a-this.margins.bottom})`);break;case $.RIGHT:p.attr("transform",`translate(${o-this.margins.right}, 0)`);break;case $.TOP:p.attr("transform",`translate(0, ${this.margins.top})`);break}const ce=this.model.isDataEmpty();if(m.title){const U=D.appendOrSelect(l,"text.axis-title").html(ce||w?"":m.title),Z=v(m,"titleOrientation");let ut;switch(n){case $.LEFT:Z===Is.RIGHT?U.attr("transform","rotate(90)").attr("y",0).attr("x",h.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):U.attr("transform","rotate(-90)").attr("y",0).attr("x",-(h.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case $.BOTTOM:U.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${a+4})`).style("text-anchor","middle");break;case $.RIGHT:Z===Is.LEFT?U.attr("transform","rotate(-90)").attr("y",o).attr("x",-(h.range()[0]/2)).style("text-anchor","middle"):U.attr("transform","rotate(90)").attr("y",-o).attr("x",h.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case $.TOP:ut=D.getSVGElementSize(U,{useBBox:!0}).height,U.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${ut/2})`).style("text-anchor","middle");break}}if(g){const U=ao(A.tickValues(),v(r,"timeScale","timeInterval")),Z=V.showDayName,ut=p;e&&(p=p.transition().call(rt=>this.services.transitions.setupTransition({transition:rt,name:"axis-update",animate:e}))),p=p.call(A),ut.selectAll(".tick").data(A.tickValues(),h).order().select("text").style("font-weight",(rt,Tt)=>Cf(rt,Tt,A.tickValues(),U,Z)?"bold":"normal")}else!e||!d?p=p.call(A):p=p.transition().call(U=>this.services.transitions.setupTransition({transition:U,name:"axis-update",animate:e})).call(A);if(y.call(A),n===$.BOTTOM||n===$.TOP){let U=!1;const Z=v(m,"ticks","rotation");if(Z===zr.ALWAYS)U=!0;else if(Z===zr.NEVER)U=!1;else if(!Z||Z===zr.AUTO)if(h.step)U=y.selectAll("g.tick text").nodes().some(ut=>D.getSVGElementSize(ut,{useBBox:!0}).width>=h.step());else{U=!1;const ut=y.append("text").text("A"),rt=D.getSVGElementSize(ut.node(),{useBBox:!0}).width;let Tt;y.selectAll("g.tick").each(function(){const P=M(this),X=parseFloat(v(Oe(this),"tx"));X!==null&&Tt+P.text().length*rt*.8>=X&&(U=!0),Tt=X}),ut.remove()}U?(R||(A.ticks(this.getNumberOfFittingTicks(o,et,Ve.ticks.horizontalSpaceRatio)),y.call(A),p.call(A)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===$.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(w?l.attr("opacity",0):l.attr("opacity",1),p.selectAll("g.tick").attr("aria-label",U=>U),y.selectAll("g.tick").attr("aria-label",U=>U),E!==he.NONE&&O===B.LABELS&&!b){const U=this.services.cartesianScales.getScaleDomain(n);if(U.length>0){const Z=s.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(Z);const ut=this;l.selectAll("g.tick text").data(U).text(function(rt){return rt.length>L?(ut.truncation[n]=!0,xr(rt,E,k)):rt}),this.getInvisibleAxisRef().selectAll("g.tick text").data(U).text(function(rt){return rt.length>L?xr(rt,E,k):rt}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(U)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=D.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=v(i,"axes",n),o=v(s,"scaleType"),a=v(s,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:M(this),datum:u}),o===B.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,hoveredElement:M(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:M(this),datum:u}),o===B.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:M(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:M(this),datum:u}),o===B.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){const i=Math.floor(e/(n*r));return C$(i,2,Ve.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;D.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class e2 extends td{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer(),i=D.appendOrSelect(r,`g.axis.${n}`),s=this;i.selectAll("g.tick").each(function(o,a){const l=M(this);l.classed("tick-hover",!0).attr("tabindex",a===0?0:-1);const c=l.select("text"),{width:u,height:h}=D.getSVGElementSize(c,{useBBox:!0}),f=D.appendOrSelect(l,"rect.axis-holder");let d=0,p=0;switch(n){case $.LEFT:d=-u+Number(c.attr("x")),p=-(h/2);break;case $.RIGHT:d=Math.abs(Number(c.attr("x"))),p=-(h/2);break;case $.TOP:d=-(u/2),p=-h+Number(c.attr("y"))/2,s.truncation[n]&&(d=0,f.attr("transform","rotate(-45)"));break;case $.BOTTOM:d=-(u/2),p=h/2-2,s.truncation[n]&&(d=-u,f.attr("transform","rotate(-45)"));break}f.attr("x",d-Ve.hover.rectanglePadding).attr("y",p).attr("width",u+Ve.hover.rectanglePadding*2).attr("height",h).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=D.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=v(i,"axes",n),o=v(s,"scaleType"),a=v(s,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=M(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:h}),o===B.LABELS&&h.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,element:u,datum:h})}).on("mousemove",function(c){const u=M(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:h}),l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:M(this).select("text"),datum:M(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:M(this).select("text"),datum:M(this).select("text").datum()}),o===B.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const h=c.target.getBoundingClientRect();u.clientX=h.x,u.clientY=h.y}l.services.events.dispatchEvent(S.Axis.LABEL_FOCUS,{event:{...c,...u},element:M(this),datum:M(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:M(this),datum:M(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent(S.Tooltip.HIDE),l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:M(this),datum:M(this).select("text").datum()})),n===$.LEFT||n===$.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;D.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class n2 extends wt{constructor(){super(...arguments),this.type="2D-axes",this.renderType=ot.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys($),i=v(this.getOptions(),"axes");r.forEach(o=>{i[$[o]]&&(n[$[o]]=!0)}),this.configs.axes=n,r.forEach(o=>{const a=$[o];if(this.configs.axes[a]&&!this.children[a]){const l={position:a,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===Ro.DEFAULT?new td(this.model,this.services,l):new e2(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[a]=c}}),Object.keys(this.children).forEach(o=>{this.children[o].render(e)});const s={};Object.keys(this.children).forEach(o=>{const a=this.children[o],l=a.configs.position,c=a.getInvisibleAxisRef(),{width:u,height:h}=D.getSVGElementSize(c,{useBBox:!0});let f;switch(a.getTitleRef().empty()?f=0:(f=D.getSVGElementSize(a.getTitleRef(),{useBBox:!0}).height,(l===$.LEFT||l===$.RIGHT)&&(f+=5)),l){case $.TOP:s.top=h+f;break;case $.BOTTOM:s.bottom=h+f;break;case $.LEFT:s.left=u+f;break;case $.RIGHT:s.right=u+f;break}}),this.services.events.dispatchEvent(S.Axis.RENDER_COMPLETE),Object.keys(s).some(o=>this.margins[o]!==s[o])&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(S.ZoomBar.UPDATE),Object.keys(this.children).forEach(o=>{const a=this.children[o];a.margins=this.margins}),this.render(!0))}}class Ca extends wt{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=v(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Fe.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Fe.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Fe.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Fe.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===Kt.VERTICAL&&this.drawYGrid(e),n===Kt.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius(),r=0;this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=gi().domain([0,1]).range(e),this.yScale=gi().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=D.getSVGElementSize(n,{useAttrs:!0});this.backdrop=D.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const s=D.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");const[o]=this.xScale.range(),[,a]=this.yScale.range();this.backdrop.merge(s).attr("x",o).attr("y",a),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=v(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(a=>a*n),s=D.appendOrSelect(this.backdrop,"g.x.skeleton"),o=s.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",a=>a).attr("x2",a=>a).attr("y1",0).attr("y2","100%"),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=v(this.getOptions(),"grid","y","numberOfTicks"),s=this.xScale.ticks(i).map(l=>l*n),o=D.appendOrSelect(this.backdrop,"g.y.skeleton"),a=o.selectAll("line").data(s);a.enter().append("line").merge(a).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:s,height:o}=D.getSVGElementSize(i,{useAttrs:!0}),a=D.appendOrSelect(i,"svg.chart-skeleton").attr("width",s).attr("height",o),l=n===0?"pie":"donut",c=v(this.getOptions(),l,"alignment");D.appendOrSelect(a,"rect.chart-skeleton-area-container").attr("width",s).attr("height",o).attr("fill","none");const u=Ks().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),h=e+Math.abs(vt.radiusOffset),f=e+(Math.min(s,o)-e*2)/2,d=D.appendOrSelect(a,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${h}, ${f})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=e+vt.xOffset;c===ee.CENTER?p=s/2:c===ee.RIGHT&&(p=s-e-vt.xOffset);const y=e+vt.yOffset;d.attr("transform",`translate(${p}, ${y})`)}computeOuterRadius(){const{width:e,height:n}=D.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+vt.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:s}=D.getSVGElementSize(this.parent,{useAttrs:!0}),o=0,a=s,l=D.appendOrSelect(i,"defs").lower(),c=D.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",o-3*.2*s).attr("x2",a).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${o}"></stop>
			<stop class="${r}" offset="${o+.2}"></stop>
			<stop class="${n}" offset="${o+2*.2}"></stop>
		`;c.html(u),h();function h(){c.attr("gradientTransform",`translate(${o-3*.2*s}, 0)`).transition().duration(2e3).delay(1e3).ease(t0).attr("gradientTransform",`translate(${a+3*.2*s}, 0)`).on("end",h)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class ed extends wt{constructor(){super(...arguments),this.type="zero-line",this.renderType=ot.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,s]=r.domain(),o=i>0&&s<0||i<0&&s>0,a=this.getComponentContainer();if(!o){a.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=Mf({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());D.appendOrSelect(a,"line.domain").transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class Bc extends t2{formatTooltipData(e){return e.reverse()}}class ka extends wt{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=D.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const s=v(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*s/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}function r2(t,e){const n=Er(this._current,t);return r=>(this._current=n(r),e(this._current))}class nd extends wt{constructor(){super(...arguments),this.type="pie",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return vt.innerRadius}render(e=!0){const n=this,r=this.getComponentContainer(),i=this.getOptions(),{groupMapsTo:s}=i.data,{valueMapsTo:o}=i.pie,a=this.model.getDisplayData().filter(b=>b[o]>0),l=this.computeRadius();this.arc=Ks().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=Ks().innerRadius(this.getInnerRadius()).outerRadius(l+vt.hoverArc.outerRadiusOffset);const c=p1().value(b=>b[o]).sort(v(i,"pie","sortFunction")).padAngle(vt.padAngle)(a),u=D.appendOrSelect(r,"g.slices").attr("role",_t.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,b=>b.data[s]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",b=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:b.data[s],originalClassName:"slice"})).style("fill",b=>n.model.getFillColor(b.data[s])).attr("d",this.arc).transition().call(b=>this.services.transitions.setupTransition({transition:b,name:"pie_slice_enter_update",animate:e})).attr("opacity",1).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",b=>`${b[o]}, ${As(b.data[o],a,o)+"%"}`).attrTween("d",function(b){return r2.bind(this)(b,n.arc)});const h=i.pie.labels.enabled,f=h?c.filter(b=>b.data[o]>0):[],d=D.appendOrSelect(r,"g.labels").attr("role",_t.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(f,b=>b.data[s]);d.exit().attr("opacity",0).remove();const p=d.enter().append("text").classed("pie-label",!0),y=[];p.merge(d).style("text-anchor","middle").text(b=>i.pie.labels.formatter?i.pie.labels.formatter({...b,percentageValue:As(b.data[o],a,o,!0)}):As(b.data[o],a,o)+"%").datum(function(b){const E=l+7,L=(b.endAngle-b.startAngle)/2+b.startAngle,k=L/Math.PI*180,R=this.getComputedTextLength();return b.textOffsetX=R/2,b.textOffsetY=k>90&&k<270?10:0,b.xPosition=(b.textOffsetX+E)*Math.sin(L),b.yPosition=(b.textOffsetY+E)*-Math.cos(L),b}).attr("transform",function(b,E){const L=f.length,k=(b.endAngle-b.startAngle)*(180/Math.PI);if(E>=L-2&&k<vt.callout.minSliceDegree){let R,V;return b.index===L-1?(R=b.xPosition+vt.callout.offsetX+vt.callout.textMargin+b.textOffsetX,V=b.yPosition-vt.callout.offsetY,b.direction=Vr.RIGHT,y.push(b)):(R=b.xPosition-vt.callout.offsetX-b.textOffsetX-vt.callout.textMargin,V=b.yPosition-vt.callout.offsetY,b.direction=Vr.LEFT,y.push(b)),`translate(${R}, ${V})`}return`translate(${b.xPosition}, ${b.yPosition})`}),this.renderCallouts(y);const m=v(i,"donut")?"donut":"pie",g=v(i,m,"alignment"),{width:_}=D.getSVGElementSize(this.getParent(),{useAttrs:!0}),T=h?vt.xOffset:0,O=h?vt.yOffset:0;let w=l+T;g===ee.CENTER?w=_/2:g===ee.RIGHT&&(w=_-l-vt.xOffset);let x=l+O;y.length>0&&(x+=vt.yOffsetCallout),r.attr("x",w+7).attr("y",x),this.addEventListeners()}renderCallouts(e){const n=D.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",_t.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(e);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",_t.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(s){const{xPosition:o,yPosition:a,direction:l}=s;return l===Vr.RIGHT?(s.startPos={x:o,y:a+s.textOffsetY},s.endPos={x:o+vt.callout.offsetX,y:a-vt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x-vt.callout.horizontalLineLength):(s.startPos={x:o,y:a+s.textOffsetY},s.endPos={x:o-vt.callout.offsetX,y:a-vt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x+vt.callout.horizontalLineLength),s}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return M(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.startPos.x).attr("y1",s=>s.startPos.y).attr("x2",s=>s.intersectPointX).attr("y2",s=>s.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return M(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.intersectPointX).attr("y1",s=>s.endPos.y).attr("x2",s=>s.endPos.x).attr("y2",s=>s.endPos.y)}addEventListeners(){const e=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=M(this);i.classed("hovered",!0).transition("pie_slice_mouseover").call(a=>e.services.transitions.setupTransition({transition:a,name:"pie_slice_mouseover"})).attr("d",e.hoverArc),e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEOVER,{event:n,element:M(this),datum:r});const{groupMapsTo:s}=e.getOptions().data,{valueMapsTo:o}=e.getOptions().pie;e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[s],value:r.data[o]}]})}).on("mousemove",function(n,r){const i=M(this);e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Pie.SLICE_CLICK,{event:n,element:M(this),datum:r})}).on("mouseout",function(n,r){const i=M(this);i.classed("hovered",!1).transition("pie_slice_mouseout").call(s=>e.services.transitions.setupTransition({transition:s,name:"pie_slice_mouseout"})).attr("d",e.arc),e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:e,height:n}=D.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(e,n)/2;return r.pie.labels.enabled?i+vt.radiusOffset:i}}class i2 extends nd{constructor(){super(...arguments),this.type="donut",this.renderType=ot.SVG}render(e=!0){super.render(e);const n=this;if(this.model.isDataEmpty()){this.getComponentContainer().select("g.center").remove();return}const r=D.appendOrSelect(this.getComponentContainer(),"g.center"),i=this.getOptions(),s=this.computeRadius(),o=v(i,"donut","center","label");D.appendOrSelect(r,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",()=>o===null||o===""?"central":"initial").style("font-size",()=>i.donut.center.numberFontSize(s)).transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"donut-figure-enter-update",animate:e})).tween("text",function(){return n.centerNumberTween(M(this))}),o!==null&&o!==""&&D.appendOrSelect(r,"text.donut-title").attr("text-anchor","middle").style("font-size",()=>i.donut.center.titleFontSize(s)).attr("y",i.donut.center.titleYPosition(s)).text(o)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(e){const n=this.getOptions();let r=v(n,"donut","center","number");r===null&&(r=this.model.getDisplayData().reduce((a,l)=>a+l[n.pie.valueMapsTo],0));const i=parseInt(e.text().replace(/[, ]+/g,""),10)||0;let s;i%1===0&&r%1===0?s=qu:s=re;const o=s(i,r);return a=>{const{numberFormatter:l}=n.donut.center;e.text(l(o(a)))}}}class s2 extends ka{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=ot.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const s=this.getComponentContainer({withinChartClip:!0}),o=wr(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),a=s.selectAll("g.bars").data(o,u=>u);a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("bars",!0).attr("role",_t.GROUP).attr("data-name","bars").merge(a);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===Kt.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>this.model.getFillColor(u[i])).attr("d",u=>{const h=this.groupScale(u[i]),f=this.getBarWidth(),d=h,p=h+f,y=this.services.cartesianScales.getRangeAxisPosition({datum:u}),m=this.services.cartesianScales.getValueThroughAxisPosition(y,0),g=this.services.cartesianScales.getRangeValue(u),_=this.services.cartesianScales.getDomainValue(u)-f/2,T=_+f;if(!this.isOutsideZoomedDomain(_,T))return Ea({x0:d,x1:p,y0:m,y1:g},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=M(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=M(this);e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:M(this),datum:r})}).on("mouseout",function(n,r){const i=M(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(s=>{var o;return((o=s.data)==null?void 0:o.length)>1});if(i){const s=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][s])-e(i.data[0][s]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=v(e,"bars","width"),r=v(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,s=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-s)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Yo().domain(e).rangeRound([0,this.getGroupWidth()])}}class rd extends ka{constructor(){super(...arguments),this.type="simple-bar",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),o=this.services.cartesianScales.getOrientation(),a=i.selectAll("path.bar").data(s,l=>l[r]);a.exit().attr("opacity",0).remove(),a.enter().append("path").attr("opacity",0).merge(a).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>this.model.getFillColor(l[r])).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],f=this.services.cartesianScales.getDomainValue(l)-u/2,d=f+u;let p,y;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),y=this.services.cartesianScales.getRangeValue(h[1]);else{const g=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,g)),y=this.services.cartesianScales.getRangeValue(l)}const m=Math.abs(y-p);if(m!==0&&m<2&&(h>0&&o===Kt.VERTICAL||h<0&&o===Kt.HORIZONTAL?y=p-2:y=p+2),!this.isOutsideZoomedDomain(f,d))return Ea({x0:f,x1:d,y0:p,y1:y},o)}).attr("opacity",1).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=M(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:M(this),datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:M(this),datum:r})}).on("mouseout",function(n,r){const i=M(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class o2 extends wt{constructor(){super(...arguments),this.type="area-stacked",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})).attr("opacity",s=>v(s,0,i)!==n.datum().name?Se.opacity.unselected:Se.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Se.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:s}=i.data,o=Object.keys(i.axes).some(d=>i.axes[d].percentage),a=this.model.getStackedData({percentage:o,groups:this.configs.groups}),l=v(a,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),f=n.selectAll("path.area").data(a,d=>v(d,0,s));this.areaGenerator=ra().x(d=>this.services.cartesianScales.getValueThroughAxisPosition(c,d.data.sharedStackKey)).y0(d=>h(d[0])).y1(d=>h(d[1])).curve(this.services.curves.getD3Curve()),f.exit().attr("opacity",0).remove(),f.enter().append("path").attr("opacity",0).merge(f).data(a,d=>v(d,0,s)).attr("class","area").attr("class",d=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:v(d,0,s),originalClassName:"area"})).style("fill",d=>r.model.getFillColor(v(d,0,s))).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",d=>v(d,0,s)).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"area-update-enter",animate:e})).attr("opacity",Se.opacity.selected).attr("d",this.areaGenerator)}}class a2 extends ka{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),o=this.model.getActiveDataGroupNames(),a=n.selectAll("g.bars").data(s,c=>v(c,0,i));a.exit().attr("opacity",0).remove(),a.enter().append("g").classed("bars",!0).attr("role",_t.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[Lt.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i])).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),f=this.services.cartesianScales.getDomainValue(u)-h/2,d=f+h,p=this.services.cartesianScales.getRangeValue(c[0]);let y=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(f,d)){if(Math.abs(y-p)>0&&Math.abs(y-p)>r.bars.dividerSize){const m=c[0]<0&&c[1]<=0;m&&o.length>1?this.services.cartesianScales.getOrientation()===Kt.VERTICAL?y+=c[1]===0?2:1:y-=1:m||(this.services.cartesianScales.getOrientation()===Kt.VERTICAL?y+=1:y-=1)}return Ea({x0:f,x1:d,y0:p,y1:y},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",_t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,s){const o=M(this);o.classed("hovered",!0),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:i,element:o,datum:s});let a=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===s.data[s[n]]&&l[c].toString()===s.data.sharedStackKey&&l[n]===s[n]});if(a===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();a={[l]:s.data.sharedStackKey,[c]:s.data[s[n]],[n]:s[n]}}r.services.events.dispatchEvent(S.Tooltip.SHOW,{event:i,hoveredElement:o,data:[a]})}).on("mousemove",function(i,s){const o=M(this);r.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:i,element:o,datum:s}),r.services.events.dispatchEvent(S.Tooltip.MOVE,{event:i})}).on("click",function(i,s){r.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:i,element:M(this),datum:s})}).on("mouseout",function(i,s){const o=M(this);o.classed("hovered",!1),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:i,element:o,datum:s}),r.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:o})})}getBarWidth(){const e=this.getOptions();if(v(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=D.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,s=v(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*s/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class l2 extends ni{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=ot.SVG}render(e){if(!v(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(u=>r.axes[u].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:s}),a=n.selectAll("g.dots").data(o,u=>v(u,0,i));a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("dots",!0).attr("role",_t.GROUP).merge(a).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],f=this.services.cartesianScales.getDomainIdentifier(u),d=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[f]:u.data.sharedStackKey,[d]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(l=>r.axes[l].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:s}),a=[];return o.forEach((l,c)=>{l.forEach((u,h)=>{const f=u[i],d=u.data.sharedStackKey;let p=u.data[f];const y=u[1],m=this.services.cartesianScales.getDomainIdentifier(u),g=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(d)&&n===this.services.cartesianScales.getRangeValue(y)&&(s&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[f]),p!==null&&a.push({[i]:f,[m]:d,[g]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return a.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}function id(t,e){Q(2,arguments);var n=ct(t),r=Ct(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Da(t,e){Q(2,arguments);var n=ct(t),r=Ct(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}var c2=36e5;function sd(t,e){Q(2,arguments);var n=Ct(e);return Yi(t,n*c2)}function Hc(t){Q(1,arguments);var e=ct(t);return e.setHours(0,0,0,0),e}var u2=864e5;function h2(t,e){Q(2,arguments);var n=Hc(t),r=Hc(e),i=n.getTime()-Qs(n),s=r.getTime()-Qs(r);return Math.round((i-s)/u2)}var f2=6e4;function So(t,e){Q(2,arguments);var n=Ct(e);return Yi(t,n*f2)}function Eo(t,e){Q(2,arguments);var n=Ct(e);return Yi(t,n*1e3)}function od(t,e){Q(2,arguments);var n=Ct(e);return Da(t,n*12)}function ur(t,e){Q(2,arguments);var n=ct(t),r=ct(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}var d2=6e4,p2=36e5;function m2(t,e){Q(2,arguments);var n=ct(t),r=ct(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function g2(t,e){Q(2,arguments);var n=ct(t),r=ct(e);return n.getFullYear()-r.getFullYear()}function Fc(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function v2(t,e){Q(2,arguments);var n=ct(t),r=ct(e),i=Fc(n,r),s=Math.abs(h2(n,r));n.setDate(n.getDate()-i*s);var o=+(Fc(n,r)===-i),a=i*(s-o);return a===0?0:a}function La(t,e){return Q(2,arguments),ct(t).getTime()-ct(e).getTime()}var Vc={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},y2="trunc";function Ra(t){return t?Vc[t]:Vc[y2]}function b2(t,e,n){Q(2,arguments);var r=La(t,e)/p2;return Ra(n==null?void 0:n.roundingMethod)(r)}function zc(t,e,n){Q(2,arguments);var r=La(t,e)/d2;return Ra(n==null?void 0:n.roundingMethod)(r)}function _2(t){Q(1,arguments);var e=ct(t);return e.setHours(23,59,59,999),e}function w2(t){Q(1,arguments);var e=ct(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function x2(t){Q(1,arguments);var e=ct(t);return _2(e).getTime()===w2(e).getTime()}function T2(t,e){Q(2,arguments);var n=ct(t),r=ct(e),i=ur(n,r),s=Math.abs(m2(n,r)),o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);var a=ur(n,r)===-i;x2(ct(t))&&s===1&&ur(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Gc(t,e,n){Q(2,arguments);var r=La(t,e)/1e3;return Ra(n==null?void 0:n.roundingMethod)(r)}function O2(t,e){Q(2,arguments);var n=ct(t),r=ct(e),i=ur(n,r),s=Math.abs(g2(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=ur(n,r)===-i,a=i*(s-Number(o));return a===0?0:a}function S2(t,e){Q(2,arguments);var n=Ct(e);return id(t,-n)}function E2(t,e){Q(2,arguments);var n=Ct(e);return Da(t,-n)}function $2(t,e){Q(2,arguments);var n=Ct(e);return sd(t,-n)}function jc(t,e){Q(2,arguments);var n=Ct(e);return So(t,-n)}function Wc(t,e){Q(2,arguments);var n=Ct(e);return Eo(t,-n)}function M2(t,e){Q(2,arguments);var n=Ct(e);return od(t,-n)}function A2(t){var e=t==null?0:t.length;return e?va(t,1):[]}class C2 extends Ie{zoomIn(e,n,r){let i,s,o;const a=r||mc;e&&(i=e.x,s=e.y,o=2);const{width:l,height:c}=D.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(a.duration).ease(a.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${o}) translate(${-i},${-s})`),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_IN,{element:M(e)})}zoomOut(e,n){const r=n||mc;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_OUT)}}class k2 extends Ie{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class D2 extends Ie{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const s=URL.createObjectURL(new Blob([e],{type:i}));r.href=s,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class L2 extends Ie{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(S.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(v(vc,n,"duration")||vc.default.duration)}getPendingTransitions(){return this.pendingTransitions}}class R2 extends Ie{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=v(n,"axes",this.secondaryDomainAxisPosition),s=e[r];if(i!=null&&i.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,s=v(r,"axes",this.secondaryRangeAxisPosition);let o;if(e!==null?o=e[i]:n&&n.length>0&&(o=n[0]),s!=null&&s.correspondingDatasets&&s.correspondingDatasets.includes(o))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return v(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===$.BOTTOM||e===$.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys($).map(e=>$[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===$.LEFT||this.rangeAxisPosition===$.RIGHT)&&(this.domainAxisPosition===$.BOTTOM||this.domainAxisPosition===$.TOP)?this.orientation=Kt.VERTICAL:this.orientation=Kt.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const s=this.model.getOptions(),o=v(s,"axes");((e=o[$.LEFT])!=null&&e.correspondingDatasets&&o[$.RIGHT]||(n=o[$.RIGHT])!=null&&n.correspondingDatasets&&o[$.LEFT]||(r=o[$.TOP])!=null&&r.correspondingDatasets&&o[$.BOTTOM]||(i=o[$.BOTTOM])!=null&&i.correspondingDatasets&&o[$.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=v(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===B.LINEAR||this.scaleTypes[e]===B.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[$.BOTTOM,$.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[$.LEFT,$.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const s=this.model.getOptions(),o=v(s,"axes")[r],{mapsTo:a}=o,l=v(i,a)!==null?i[a]:i;let c;switch(n){case B.LABELS:c=e(l)+e.step()/2;break;case B.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],s=this.model.getOptions(),o=v(s,"axes")[r],{mapsTo:a}=o,l=e[a]!==void 0?e[a]:e;return[i(v(e,n.upperBoundMapsTo)!==null?e[n.upperBoundMapsTo]:l),i(v(e,n.lowerBoundMapsTo)!==null?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return v(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return v(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=v(r,"axes",e);if(i.scaleType===B.TIME){const s=v(r,"timeScale","addSpaceOnEdges");return I2(n,s)}else return P2(n,Ve.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=v(e,"axes"),r=this.isDualAxes();return v(n,$.LEFT)===null&&v(n,$.RIGHT)!==null||v(n,$.RIGHT,"main")===!0||r&&v(n,$.LEFT,"correspondingDatasets")?{primary:$.RIGHT,secondary:$.LEFT}:{primary:$.LEFT,secondary:$.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=v(e,"axes"),r=this.isDualAxes();return v(n,$.BOTTOM)===null&&v(n,$.TOP)!==null||v(n,$.TOP,"main")===!0||r&&v(n,$.BOTTOM,"correspondingDatasets")?{primary:$.TOP,secondary:$.BOTTOM}:{primary:$.BOTTOM,secondary:$.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=v(r,"axes",e.primary),s=v(r,"axes",n.primary),o=i.scaleType||B.LINEAR,a=s.scaleType||B.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(a===B.LABELS||a===B.TIME)&&o===B.LABELS||o===B.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=v(n,"axes",e),i=v(n,"bounds"),{includeZero:s}=r,o=v(r,"scaleType")||B.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:g}=this.model.getBinConfigurations();return[0,Ep(g,_=>_.length)]}else if(r.limitDomainToBins){const{bins:g}=this.model.getBinConfigurations(),_=this.model.getStackKeys({bins:g});return[_[0].split("-")[0],_[_.length-1].split("-")[1]]}const a=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:h}=r,{reference:f,compareTo:d}=Ve.ratio;if(r.domain)return o===B.LABELS?r.domain:(o===B.TIME&&(r.domain=r.domain.map(g=>g.getTime===void 0?new Date(g):g)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&o===B.LABELS)return wr(a.map(g=>g[c]));let p,y;const m=this.model.getDataGroupNames();if(o===B.LABELS_RATIO)return a.map(g=>`${g[f]}/${g[d]}`);if(o===B.TIME)y=a.map(g=>+new Date(g[c]));else if(i&&n.axes)y=[],a.forEach(g=>{y.push(g[c]),g[i.upperBoundMapsTo]&&y.push(g[i.upperBoundMapsTo]),g[i.lowerBoundMapsTo]&&y.push(g[i.lowerBoundMapsTo])});else if(r.stacked===!0&&m&&e===this.getRangeAxisPosition()){const{groupMapsTo:g}=n.data,_=this.model.getDataValuesGroupedByKeys({groups:m}),T=a.filter(w=>!m.includes(w[g])),O=[];_.forEach(w=>{const{...x}=w;let b=0,E=0;Object.values(x).forEach(L=>{isNaN(L)||(L<0?E+=L:b+=L)}),O.push([E,b])}),y=[...A2(O),...T.map(w=>w[c])]}else y=[],a.forEach(g=>{const _=g[c];Array.isArray(_)&&_.length===2?(y.push(_[0]),y.push(_[1])):(l&&y.push(Math.max(g[c],g[l])),y.push(_))});return o!==B.TIME&&o!==B.LOG&&s&&y.push(0),h&&h.length>0&&h.forEach(g=>{const _=v(g,"value");_!==null&&y.push(_)}),p=En(y),p=this.extendsDomain(e,p),p}createScale(e){const n=this.model.getOptions(),r=v(n,"axes",e);if(!r)return null;const i=v(r,"scaleType")||B.LINEAR;this.scaleTypes[e]=i;let s;return i===B.TIME?s=wh():i===B.LOG?s=dh().base(r.base||10):i===B.LABELS||i===B.LABELS_RATIO?s=Yo():s=gi(),s.domain(this.getScaleDomain(e)),s}getHighestDomainThreshold(){const e=v(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),s=r.sort((o,a)=>a.value-o.value)[0];return this.getScaleTypeByPosition(n)===B.TIME&&(typeof s.value=="string"||s.value.getTime===void 0)&&(s.value=new Date(s.value)),{threshold:s,scaleValue:i(s.value)}}getHighestRangeThreshold(){const e=v(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),s=r.sort((o,a)=>a.value-o.value)[0];return{threshold:s,scaleValue:i(s.value)}}}function I2(t,e){const n=new Date(t[0]),r=new Date(t[1]);return O2(r,n)>1?[M2(n,e),od(r,e)]:T2(r,n)>1?[E2(n,e),Da(r,e)]:v2(r,n)>1?[S2(n,e),id(r,e)]:b2(r,n)>1?[$2(n,e),sd(r,e)]:zc(r,n)>30?[jc(n,e*30),So(r,e*30)]:zc(r,n)>1?[jc(n,e),So(r,e)]:Gc(r,n)>15?[Wc(n,e*15),Eo(r,e*15)]:Gc(r,n)>1?[Wc(n,e),Eo(r,e)]:[n,r]}function P2([t,e],n,r){const i=(e-t)*n,s=e<=0&&e+i>0?0:e+i;let o=t>=0&&t-i<0?0:t-i;if(r===B.LOG&&o<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");o=t}return[o,s]}class N2 extends Ie{constructor(){super(...arguments),this.curveTypes={curveLinear:ea,curveLinearClosed:S1,curveBasis:m1,curveBasisClosed:g1,curveBasisOpen:v1,curveBundle:y1,curveCardinal:b1,curveCardinalClosed:_1,curveCardinalOpen:w1,curveCatmullRom:x1,curveCatmullRomClosed:T1,curveCatmullRomOpen:O1,curveMonotoneX:E1,curveMonotoneY:$1,curveNatural:M1,curveStep:A1,curveStepAfter:k1,curveStepBefore:C1}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?e=n:e=n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class U2 extends Ie{isZoomBarEnabled(){if(!this.services.cartesianScales||!v(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=v(this.model.getOptions(),"axes",e,"scaleType");return e===$.BOTTOM&&n===B.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),s=r.getDomainIdentifier(),o=v(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(o)&&o.length===2)return o;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,En(n,a=>a[s]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&((r=this.services.events)==null||r.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return v(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),s=Object.assign({stacked:!1},n),o=v(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&o&&i){const a=s.stacked?"sharedStackKey":(r=this.services.cartesianScales)==null?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[a])>=i[0]&&new Date(c[a])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=Jt.handleWidth,s=(n=this.services.cartesianScales)==null?void 0:n.getMainXScale().copy();s.domain(this.getDefaultZoomBarDomain());const o=s(r[0]),a=s(r[1]);if(a-o<i+1)return;const l=s.range(),c=a-o,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let h=o+u,f=a-u;h>=f&&(h=o+c/2-i/2,f=a-c/2+i/2);const d=[s.invert(h),s.invert(f)];(r[0].valueOf()!==d[0].valueOf()||r[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),s=r(n[1]),o=r.range(),a=(o[1]-o[0])/2*(e/2),l=Math.max(i-a,o[0]),c=Math.min(s+a,o[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;const r=e[1].valueOf()-e[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),s=v(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<s}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(e&&n&&e[0].valueOf()===n[0].valueOf()&&e[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(e){return v(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return v(this.model.getOptions(),"zoomBar",e,"locked")}}class ad{constructor(e,n){this.components=[],this.services={canvasZoom:C2,domUtils:D,events:k2,files:D2,gradientUtils:Tr,transitions:L2},this.model=new $a(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(S.Model.UPDATE,r=>{const i=!!v(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(S.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(s=>s));Promise.all(r).then(()=>this.services.events.dispatchEvent(S.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=v(r,"toolbar","enabled"),s={id:"legend",components:[new Zf(this.model,this.services)],growth:yt.PREFERRED},o=v(r,"canvasZoom","enabled");o&&o===!0&&e.push(new jM(this.model,this.services));const a=!!this.model.getOptions().title,l={id:"title",components:[new qf(this.model,this.services)],growth:yt.STRETCH},c={id:"toolbar",components:[new zf(this.model,this.services)],growth:yt.PREFERRED},u={id:"header",components:[new Cn(this.model,this.services,[l,...i?[c]:[]],{direction:At.ROW,alignItems:Ui.CENTER})],growth:yt.PREFERRED},h={id:"graph-frame",components:e,growth:yt.STRETCH,renderType:v(n,"graphFrameRenderType")||ot.SVG},f=v(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let d=At.COLUMN;if(f){const g=v(r,"legend","position");g==="left"?(d=At.ROW,r.legend.orientation||(r.legend.orientation=fr.VERTICAL)):g==="right"?(d=At.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=fr.VERTICAL)):g==="bottom"&&(d=At.COLUMN_REVERSE)}const p={id:"spacer",components:[new Di(this.model,this.services)],growth:yt.PREFERRED},y={id:"full-frame",components:[new Cn(this.model,this.services,[...f?[s]:[],...f?[p]:[],h],{direction:d})],growth:yt.STRETCH},m=[];if(a||i){m.push(u);const g={id:"spacer",components:[new Di(this.model,this.services,i?{size:15}:void 0)],growth:yt.PREFERRED};m.push(g)}return m.push(y),[new Qf(this.model,this.services),new Xf(this.model,this.services),new Cn(this.model,this.services,m,{direction:At.COLUMN})]}}class B2 extends ad{constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:R2,curves:N2,zoom:U2}),this.model=new vE(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=v(r,"zoomBar",$.TOP,"enabled"),s=v(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const o=this.services.cartesianScales.getMainXAxisPosition(),a=v(r,"axes",o,"scaleType"),l=i&&o===$.BOTTOM&&a===B.TIME,c=this.services.zoom.isZoomBarLocked($.TOP),u=!!this.model.getOptions().title,h={id:"title",components:[new qf(this.model,this.services)],growth:yt.STRETCH},f={id:"toolbar",components:[new zf(this.model,this.services)],growth:yt.PREFERRED},d={id:"header",components:[new Cn(this.model,this.services,[h,...s?[f]:[]],{direction:At.ROW,alignItems:Ui.CENTER})],growth:yt.PREFERRED},p={id:"legend",components:[new Zf(this.model,this.services)],growth:yt.PREFERRED};l&&!c&&e.push(new Kf(this.model,this.services),new WM(this.model,this.services)),e.push(new XM(this.model,this.services)),e.push(new qM(this.model,this.services));const y={id:"graph-frame",components:e,growth:yt.STRETCH,renderType:ot.SVG},m=v(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let g=At.COLUMN;if(m){const x=v(this.model.getOptions(),"legend","position");x===ar.LEFT?(g=At.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=fr.VERTICAL)):x===ar.RIGHT?(g=At.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=fr.VERTICAL)):x===ar.BOTTOM&&(g=At.COLUMN_REVERSE)}const _={id:"spacer",components:[new Di(this.model,this.services)],growth:yt.PREFERRED},T={id:"full-frame",components:[new Cn(this.model,this.services,[...m?[p]:[],...m?[_]:[],y],{direction:g})],growth:yt.STRETCH},O={id:"zoom-bar",components:[new YM(this.model,this.services)],growth:yt.PREFERRED,renderType:ot.SVG},w=[];if(u||s){w.push(d);const x={id:"spacer",components:[new Di(this.model,this.services,s?{size:15}:void 0)],growth:yt.PREFERRED};w.push(x)}return l&&w.push(O),w.push(T),[new ZM(this.model,this.services),new Xf(this.model,this.services),new Cn(this.model,this.services,w,{direction:At.COLUMN})]}}Be.LINE+"",Be.SCATTER+"",Be.AREA+"",Be.STACKED_AREA+"",Be.SIMPLE_BAR+"",Be.GROUPED_BAR+"",Be.STACKED_BAR+"";class H2 extends ad{constructor(e,n,r=!1){super(e,n),this.model=new yE(this.services),!r&&(this.model.setOptions(Sa(Oa.pieChart,n.options)),this.init(e,n))}getComponents(){const e=[new nd(this.model,this.services),new Ca(this.model,this.services,{skeleton:Fe.PIE})];return this.getChartComponents(e)}}class F2 extends H2{constructor(e,n){super(e,n,!0),this.model.setOptions(Sa(Oa.donutChart,n.options)),this.init(e,n)}getComponents(){const e=[new i2(this.model,this.services),new Ca(this.model,this.services,{skeleton:Fe.DONUT})];return this.getChartComponents(e)}}class V2 extends B2{constructor(e,n){super(e,n),this.model.setOptions(Sa(Oa.simpleBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new n2(this.model,this.services),new KM(this.model,this.services),new rd(this.model,this.services),new ed(this.model,this.services),new Ca(this.model,this.services,{skeleton:Fe.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}function z2(t){let e,n=[{id:t[1]},{class:Yc},t[2]],r={};for(let i=0;i<n.length;i+=1)r=Mt(r,n[i]);return{c(){e=jt("div"),this.h()},l(i){e=Wt(i,"DIV",{id:!0,class:!0}),de(e).forEach(z),this.h()},h(){ze(e,r)},m(i,s){J(i,e,s),t[7](e)},p(i,[s]){ze(e,r=Ze(n,[s&2&&{id:i[1]},{class:Yc},s&4&&i[2]]))},i:oe,o:oe,d(i){i&&z(e),t[7](null)}}}const Yc="cds--chart-holder";function G2(t,e,n){const r=["data","options","Chart","chart","ref","id"];let i=se(e,r),{data:s=[]}=e,{options:o={}}=e,{Chart:a=void 0}=e,{chart:l=null}=e,{ref:c=null}=e,{id:u=`chart-${Math.random().toString(36)}`}=e;const h=dd();pd(()=>{try{n(3,l=new a(c,{data:s,options:o})),h("load")}catch(d){console.error("Failed to initialize chart:",d)}}),Xc(()=>{if(l)try{l.model.setData(s),l.model.setOptions(o),h("update",{data:s,options:o})}catch(d){console.error("Failed to update chart:",d)}}),md(()=>{l&&(h("destroy"),l.components.forEach(d=>d.destroy()),l.model.set({destroyed:!0},{skipUpdate:!0}),n(3,l=null))});function f(d){Ae[d?"unshift":"push"](()=>{c=d,n(0,c)})}return t.$$set=d=>{e=Mt(Mt({},e),sn(d)),n(2,i=se(e,r)),"data"in d&&n(4,s=d.data),"options"in d&&n(5,o=d.options),"Chart"in d&&n(6,a=d.Chart),"chart"in d&&n(3,l=d.chart),"ref"in d&&n(0,c=d.ref),"id"in d&&n(1,u=d.id)},[c,u,i,l,s,o,a,f]}class ld extends Xe{constructor(e){super(),qe(this,e,G2,z2,Ye,{data:4,options:5,Chart:6,chart:3,ref:0,id:1})}}function j2(t){let e,n,r,i;const s=[t[4],{Chart:V2},{options:t[2]},{data:t[3]}];function o(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<s.length;c+=1)l=Mt(l,s[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new ld({props:l}),Ae.push(()=>Ln(e,"ref",o)),Ae.push(()=>Ln(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){G(e.$$.fragment)},l(c){j(e.$$.fragment,c)},m(c,u){W(e,c,u),i=!0},p(c,[u]){const h=u&28?Ze(s,[u&16&&Do(c[4]),s[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],kn(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],kn(()=>r=!1)),e.$set(h)},i(c){i||(F(e.$$.fragment,c),i=!0)},o(c){H(e.$$.fragment,c),i=!1},d(c){Y(e,c)}}}function W2(t,e,n){const r=["options","data","chart","ref"];let i=se(e,r),{options:s}=e,{data:o}=e,{chart:a=null}=e,{ref:l=null}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){Xt.call(this,t,p)}function f(p){Xt.call(this,t,p)}function d(p){Xt.call(this,t,p)}return t.$$set=p=>{e=Mt(Mt({},e),sn(p)),n(4,i=se(e,r)),"options"in p&&n(2,s=p.options),"data"in p&&n(3,o=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,s,o,i,c,u,h,f,d]}class Y2 extends Xe{constructor(e){super(),qe(this,e,W2,j2,Ye,{options:2,data:3,chart:0,ref:1})}}function X2(t){let e,n,r,i;const s=[t[4],{Chart:F2},{options:t[2]},{data:t[3]}];function o(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<s.length;c+=1)l=Mt(l,s[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new ld({props:l}),Ae.push(()=>Ln(e,"ref",o)),Ae.push(()=>Ln(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){G(e.$$.fragment)},l(c){j(e.$$.fragment,c)},m(c,u){W(e,c,u),i=!0},p(c,[u]){const h=u&28?Ze(s,[u&16&&Do(c[4]),s[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],kn(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],kn(()=>r=!1)),e.$set(h)},i(c){i||(F(e.$$.fragment,c),i=!0)},o(c){H(e.$$.fragment,c),i=!1},d(c){Y(e,c)}}}function q2(t,e,n){const r=["options","data","chart","ref"];let i=se(e,r),{options:s}=e,{data:o}=e,{chart:a=null}=e,{ref:l=null}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){Xt.call(this,t,p)}function f(p){Xt.call(this,t,p)}function d(p){Xt.call(this,t,p)}return t.$$set=p=>{e=Mt(Mt({},e),sn(p)),n(4,i=se(e,r)),"options"in p&&n(2,s=p.options),"data"in p&&n(3,o=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,s,o,i,c,u,h,f,d]}class Z2 extends Xe{constructor(e){super(),qe(this,e,q2,X2,Ye,{options:2,data:3,chart:0,ref:1})}}function K2(t){let e,n,r=[{preserveAspectRatio:"xMidYMid meet"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{width:"64"},{height:"64"},{fill:"currentColor"},{title:t[0]},t[1],t[2]],i={};for(let s=0;s<r.length;s+=1)i=Mt(i,r[s]);return{c(){e=Ia("svg"),n=Ia("path"),this.h()},l(s){e=Pa(s,"svg",{preserveAspectRatio:!0,xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0,title:!0});var o=de(e);n=Pa(o,"path",{d:!0}),de(n).forEach(z),o.forEach(z),this.h()},h(){gd(n,"d","M31,31.36H1c-0.199,0-0.36-0.161-0.36-0.36V1h0.72v14.632c3.704-0.168,5.584-2.933,7.405-5.609	c1.8-2.646,3.662-5.382,7.235-5.382s5.436,2.736,7.235,5.382c1.879,2.762,3.821,5.618,7.765,5.618v0.72	c-4.324,0-6.376-3.016-8.36-5.933C20.867,7.822,19.192,5.36,16,5.36c-3.193,0-4.867,2.461-6.64,5.067	c-1.928,2.834-3.92,5.763-8,5.926V30.64h2.28V20c0-0.199,0.161-0.36,0.36-0.36h3.64V16c0-0.199,0.161-0.36,0.36-0.36h3.64V11	c0-0.199,0.161-0.36,0.36-0.36h4c0.199,0,0.36,0.161,0.36,0.36v1.64H20c0.199,0,0.36,0.161,0.36,0.36v3.64H24	c0.199,0,0.36,0.161,0.36,0.36v4.64H28c0.199,0,0.36,0.161,0.36,0.36v8.64H31V31.36z M24.36,30.64h3.279v-8.28H24.36V30.64z M20.36,30.64h3.279V17.36H20.36V30.64z M16.36,30.64h3.28V13.36h-3.28V30.64z M12.36,30.64h3.28V11.36h-3.28V30.64z M8.36,30.64	h3.28V16.36H8.36V30.64z M4.36,30.64h3.28V20.36H4.36V30.64z"),Na(e,i)},m(s,o){J(s,e,o),hr(e,n)},p(s,[o]){Na(e,i=Ze(r,[{preserveAspectRatio:"xMidYMid meet"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{width:"64"},{height:"64"},{fill:"currentColor"},o&1&&{title:s[0]},o&2&&s[1],o&4&&s[2]]))},i:oe,o:oe,d(s){s&&z(e)}}}function Q2(t,e,n){let r,i;const s=["title"];let o=se(e,s),{title:a=void 0}=e;return t.$$set=l=>{n(4,e=Mt(Mt({},e),sn(l))),n(2,o=se(e,s)),"title"in l&&n(0,a=l.title)},t.$$.update=()=>{n(3,r=e["aria-label"]||e["aria-labelledby"]||e.title),n(1,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=sn(e),[a,i,o,r]}class J2 extends Xe{constructor(e){super(),qe(this,e,Q2,K2,Ye,{title:0})}}function tA(t){let e,n="Reportes",r,i,s="Reportes de ventas y pagos";return{c(){e=jt("h1"),e.textContent=n,r=Et(),i=jt("p"),i.textContent=s},l(o){e=Wt(o,"H1",{"data-svelte-h":!0}),Dn(e)!=="svelte-15a5y0e"&&(e.textContent=n),r=$t(o),i=Wt(o,"P",{"data-svelte-h":!0}),Dn(i)!=="svelte-iwdueb"&&(i.textContent=s)},m(o,a){J(o,e,a),J(o,r,a),J(o,i,a)},p:oe,d(o){o&&(z(e),z(r),z(i))}}}function eA(t){let e,n;return e=new J2({}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function nA(t){let e,n,r,i;return e=new te({props:{$$slots:{default:[tA]},$$scope:{ctx:t}}}),r=new te({props:{class:"flex justify-end",$$slots:{default:[eA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function rA(t){let e,n="Registros de pagos";return{c(){e=jt("h4"),e.textContent=n},l(r){e=Wt(r,"H4",{"data-svelte-h":!0}),Dn(e)!=="svelte-145bgpx"&&(e.textContent=n)},m(r,i){J(r,e,i)},p:oe,d(r){r&&z(e)}}}function iA(t){let e,n;return e=new te({props:{$$slots:{default:[rA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function sA(t){let e,n;return e=new Lo({props:{titulo:"ltimo mes",data:t[1]}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p:oe,i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function oA(t){let e,n;return e=new Lo({props:{titulo:"Diario",data:t[0]}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function aA(t){let e,n;return e=new Lo({props:{titulo:"ltima semana",data:t[0]}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function lA(t){let e,n,r,i,s,o;return e=new te({props:{$$slots:{default:[sA]},$$scope:{ctx:t}}}),r=new te({props:{$$slots:{default:[oA]},$$scope:{ctx:t}}}),s=new te({props:{$$slots:{default:[aA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment),i=Et(),G(s.$$.fragment)},l(a){j(e.$$.fragment,a),n=$t(a),j(r.$$.fragment,a),i=$t(a),j(s.$$.fragment,a)},m(a,l){W(e,a,l),J(a,n,l),W(r,a,l),J(a,i,l),W(s,a,l),o=!0},p(a,l){const c={};l&32&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l&33&&(u.$$scope={dirty:l,ctx:a}),r.$set(u);const h={};l&33&&(h.$$scope={dirty:l,ctx:a}),s.$set(h)},i(a){o||(F(e.$$.fragment,a),F(r.$$.fragment,a),F(s.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(r.$$.fragment,a),H(s.$$.fragment,a),o=!1},d(a){a&&(z(n),z(i)),Y(e,a),Y(r,a),Y(s,a)}}}function cA(t){let e,n="Grficos de ventas";return{c(){e=jt("h4"),e.textContent=n},l(r){e=Wt(r,"H4",{"data-svelte-h":!0}),Dn(e)!=="svelte-kq7584"&&(e.textContent=n)},m(r,i){J(r,e,i)},p:oe,d(r){r&&z(e)}}}function uA(t){let e,n;return e=new te({props:{$$slots:{default:[cA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function hA(t){let e,n="Rango de fechas";return{c(){e=jt("h5"),e.textContent=n},l(r){e=Wt(r,"H5",{"data-svelte-h":!0}),Dn(e)!=="svelte-1xqzdwa"&&(e.textContent=n)},m(r,i){J(r,e,i)},p:oe,d(r){r&&z(e)}}}function fA(t){let e,n,r,i;return e=new ii({props:{placeholder:"dd/mm/aaa",name:"fechasalida"}}),r=new ii({props:{placeholder:"dd/mm/aaa",name:"fecharetorno"}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p:oe,i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function dA(t){let e,n;return e=new Zc({props:{datePickerType:"range",dateFormat:"d/m/Y",locale:Kc.Spanish,valueFrom:new Date().toISOString(),valueTo:new Date().toISOString(),$$slots:{default:[fA]},$$scope:{ctx:t}}}),e.$on("change",t[3]),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function pA(t){let e,n,r,i;return e=new te({props:{$$slots:{default:[hA]},$$scope:{ctx:t}}}),r=new te({props:{$$slots:{default:[dA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function mA(t){let e,n,r,i;return e=new en({props:{$$slots:{default:[pA]},$$scope:{ctx:t}}}),r=new Z2({props:{data:t[2],options:{theme:"g100",title:"Proporcin del total de pagos por paquete",height:"400px",resizable:!0,donut:{center:{label:"Total ARS"}}}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function gA(t){let e,n;return e=new ko({props:{$$slots:{default:[mA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function vA(t){let e,n="Rango de fechas";return{c(){e=jt("h5"),e.textContent=n},l(r){e=Wt(r,"H5",{"data-svelte-h":!0}),Dn(e)!=="svelte-1xqzdwa"&&(e.textContent=n)},m(r,i){J(r,e,i)},p:oe,d(r){r&&z(e)}}}function yA(t){let e,n,r,i;return e=new ii({props:{placeholder:"dd/mm/aaa",name:"fechasalida"}}),r=new ii({props:{placeholder:"dd/mm/aaa",name:"fecharetorno"}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p:oe,i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function bA(t){let e,n;return e=new Zc({props:{datePickerType:"range",dateFormat:"d/m/Y",locale:Kc.Spanish,valueFrom:new Date().toISOString(),valueTo:new Date().toISOString(),$$slots:{default:[yA]},$$scope:{ctx:t}}}),e.$on("change",t[4]),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function _A(t){let e,n,r,i;return e=new te({props:{$$slots:{default:[vA]},$$scope:{ctx:t}}}),r=new te({props:{$$slots:{default:[bA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function wA(t){let e,n,r,i;return e=new en({props:{$$slots:{default:[_A]},$$scope:{ctx:t}}}),r=new Y2({props:{data:t[2],options:{theme:"g100",title:"Pagos por paquete",height:"400px",axes:{left:{mapsTo:"value"},bottom:{mapsTo:"group",scaleType:"labels"}}}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function xA(t){let e,n;return e=new ko({props:{$$slots:{default:[wA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function TA(t){let e,n,r,i;return e=new te({props:{$$slots:{default:[gA]},$$scope:{ctx:t}}}),r=new te({props:{$$slots:{default:[xA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment)},l(s){j(e.$$.fragment,s),n=$t(s),j(r.$$.fragment,s)},m(s,o){W(e,s,o),J(s,n,o),W(r,s,o),i=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(F(e.$$.fragment,s),F(r.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),H(r.$$.fragment,s),i=!1},d(s){s&&z(n),Y(e,s),Y(r,s)}}}function OA(t){let e,n,r,i,s,o,a,l,c,u;return e=new en({props:{$$slots:{default:[nA]},$$scope:{ctx:t}}}),r=new en({props:{class:"mt-8",$$slots:{default:[iA]},$$scope:{ctx:t}}}),s=new en({props:{class:"mb-8",$$slots:{default:[lA]},$$scope:{ctx:t}}}),a=new en({props:{class:"mt-8",$$slots:{default:[uA]},$$scope:{ctx:t}}}),c=new en({props:{$$slots:{default:[TA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=Et(),G(r.$$.fragment),i=Et(),G(s.$$.fragment),o=Et(),G(a.$$.fragment),l=Et(),G(c.$$.fragment)},l(h){j(e.$$.fragment,h),n=$t(h),j(r.$$.fragment,h),i=$t(h),j(s.$$.fragment,h),o=$t(h),j(a.$$.fragment,h),l=$t(h),j(c.$$.fragment,h)},m(h,f){W(e,h,f),J(h,n,f),W(r,h,f),J(h,i,f),W(s,h,f),J(h,o,f),W(a,h,f),J(h,l,f),W(c,h,f),u=!0},p(h,f){const d={};f&32&&(d.$$scope={dirty:f,ctx:h}),e.$set(d);const p={};f&32&&(p.$$scope={dirty:f,ctx:h}),r.$set(p);const y={};f&33&&(y.$$scope={dirty:f,ctx:h}),s.$set(y);const m={};f&32&&(m.$$scope={dirty:f,ctx:h}),a.$set(m);const g={};f&32&&(g.$$scope={dirty:f,ctx:h}),c.$set(g)},i(h){u||(F(e.$$.fragment,h),F(r.$$.fragment,h),F(s.$$.fragment,h),F(a.$$.fragment,h),F(c.$$.fragment,h),u=!0)},o(h){H(e.$$.fragment,h),H(r.$$.fragment,h),H(s.$$.fragment,h),H(a.$$.fragment,h),H(c.$$.fragment,h),u=!1},d(h){h&&(z(n),z(i),z(o),z(l)),Y(e,h),Y(r,h),Y(s,h),Y(a,h),Y(c,h)}}}function SA(t){let e,n;return e=new Rd({props:{$$slots:{default:[OA]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,i){W(e,r,i),n=!0},p(r,[i]){const s={};i&33&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(F(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function EA(t,e,n){let{data:r}=e,i=r;const s=r.ventas.map(l=>{if(l.expand.pagos&&Array.isArray(l.expand.pagos)){const c=l.expand.paquete.nombre,u=l.expand.pagos.reduce((h,f)=>h+(f.valor||0),0);return{group:c,value:u}}else return{group:l.expand.paquete.nombre,value:0}});function o(l){Xt.call(this,t,l)}function a(l){Xt.call(this,t,l)}return t.$$set=l=>{"data"in l&&n(0,r=l.data)},[r,i,s,o,a]}class HA extends Xe{constructor(e){super(),qe(this,e,EA,SA,Ye,{data:0})}}export{HA as component};
